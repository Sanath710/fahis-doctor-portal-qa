(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var px={exports:{}},Yc={},gx={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=Symbol.for("react.element"),xE=Symbol.for("react.portal"),vE=Symbol.for("react.fragment"),_E=Symbol.for("react.strict_mode"),wE=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),NE=Symbol.for("react.forward_ref"),TE=Symbol.for("react.suspense"),IE=Symbol.for("react.memo"),jE=Symbol.for("react.lazy"),_g=Symbol.iterator;function SE(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xx=Object.assign,vx={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=vx,this.updater=n||yx}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _x(){}_x.prototype=Ai.prototype;function _f(t,e,n){this.props=t,this.context=e,this.refs=vx,this.updater=n||yx}var wf=_f.prototype=new _x;wf.constructor=_f;xx(wf,Ai.prototype);wf.isPureReactComponent=!0;var wg=Array.isArray,wx=Object.prototype.hasOwnProperty,bf={current:null},bx={key:!0,ref:!0,__self:!0,__source:!0};function Ex(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)wx.call(e,r)&&!bx.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Na,type:t,key:i,ref:a,props:s,_owner:bf.current}}function CE(t,e){return{$$typeof:Na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ef(t){return typeof t=="object"&&t!==null&&t.$$typeof===Na}function kE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bg=/\/+/g;function ld(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kE(""+t.key):e.toString(36)}function Rl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Na:case xE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ld(a,0):r,wg(s)?(n="",t!=null&&(n=t.replace(bg,"$&/")+"/"),Rl(s,e,n,"",function(d){return d})):s!=null&&(Ef(s)&&(s=CE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",wg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+ld(i,c);a+=Rl(i,e,n,u,s)}else if(u=SE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+ld(i,c++),a+=Rl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function sl(t,e,n){if(t==null)return t;var r=[],s=0;return Rl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function RE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},Al={transition:null},AE={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Al,ReactCurrentOwner:bf};function Nx(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:sl,forEach:function(t,e,n){sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sl(t,function(){e++}),e},toArray:function(t){return sl(t,function(e){return e})||[]},only:function(t){if(!Ef(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ai;te.Fragment=vE;te.Profiler=wE;te.PureComponent=_f;te.StrictMode=_E;te.Suspense=TE;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AE;te.act=Nx;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=bf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)wx.call(e,u)&&!bx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Na,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:EE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bE,_context:t},t.Consumer=t};te.createElement=Ex;te.createFactory=function(t){var e=Ex.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:NE,render:t}};te.isValidElement=Ef;te.lazy=function(t){return{$$typeof:jE,_payload:{_status:-1,_result:t},_init:RE}};te.memo=function(t,e){return{$$typeof:IE,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};te.unstable_act=Nx;te.useCallback=function(t,e){return gt.current.useCallback(t,e)};te.useContext=function(t){return gt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};te.useEffect=function(t,e){return gt.current.useEffect(t,e)};te.useId=function(){return gt.current.useId()};te.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return gt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};te.useRef=function(t){return gt.current.useRef(t)};te.useState=function(t){return gt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return gt.current.useTransition()};te.version="18.3.1";gx.exports=te;var I=gx.exports;const PE=yE(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE=I,LE=Symbol.for("react.element"),ME=Symbol.for("react.fragment"),VE=Object.prototype.hasOwnProperty,OE=DE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FE={key:!0,ref:!0,__self:!0,__source:!0};function Tx(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)VE.call(e,r)&&!FE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:LE,type:t,key:i,ref:a,props:s,_owner:OE.current}}Yc.Fragment=ME;Yc.jsx=Tx;Yc.jsxs=Tx;px.exports=Yc;var o=px.exports,Ix={exports:{}},At={},jx={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var xe=Z-1>>>1,Se=B[xe];if(0<s(Se,Y))B[xe]=Y,B[Z]=Se,Z=xe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var xe=0,Se=B.length,ts=Se>>>1;xe<ts;){var Lt=2*(xe+1)-1,ns=B[Lt],Wt=Lt+1,tr=B[Wt];if(0>s(ns,Z))Wt<Se&&0>s(tr,ns)?(B[xe]=tr,B[Wt]=Z,xe=Wt):(B[xe]=ns,B[Lt]=Z,xe=Lt);else if(Wt<Se&&0>s(tr,Z))B[xe]=tr,B[Wt]=Z,xe=Wt;else break e}}return Y}function s(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,m=null,p=3,x=!1,N=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function D(B){if(k=!1,w(B),!N)if(n(u)!==null)N=!0,Wi(L);else{var Y=n(d);Y!==null&&Gi(D,Y.startTime-B)}}function L(B,Y){N=!1,k&&(k=!1,b(v),v=-1),x=!0;var Z=p;try{for(w(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!R());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,p=m.priorityLevel;var Se=xe(m.expirationTime<=Y);Y=t.unstable_now(),typeof Se=="function"?m.callback=Se:m===n(u)&&r(u),w(Y)}else r(u);m=n(u)}if(m!==null)var ts=!0;else{var Lt=n(d);Lt!==null&&Gi(D,Lt.startTime-Y),ts=!1}return ts}finally{m=null,p=Z,x=!1}}var V=!1,E=null,v=-1,T=5,S=-1;function R(){return!(t.unstable_now()-S<T)}function C(){if(E!==null){var B=t.unstable_now();S=B;var Y=!0;try{Y=E(!0,B)}finally{Y?j():(V=!1,E=null)}}else V=!1}var j;if(typeof _=="function")j=function(){_(C)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Tn=Ge.port2;Ge.port1.onmessage=C,j=function(){Tn.postMessage(null)}}else j=function(){A(C,0)};function Wi(B){E=B,V||(V=!0,j())}function Gi(B,Y){v=A(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,Wi(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return B()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=p;p=B;try{return Y()}finally{p=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var xe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?xe+Z:xe):Z=xe,B){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=Z+Se,B={id:h++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:Se,sortIndex:-1},Z>xe?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(k?(b(v),v=-1):k=!0,Gi(D,Z-xe))):(B.sortIndex=Se,e(u,B),N||x||(N=!0,Wi(L))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=p;return function(){var Z=p;p=Y;try{return B.apply(this,arguments)}finally{p=Z}}}})(Sx);jx.exports=Sx;var UE=jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=I,Rt=UE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cx=new Set,Ko={};function As(t,e){gi(t,e),gi(t+"Capture",e)}function gi(t,e){for(Ko[t]=e,t=0;t<e.length;t++)Cx.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=Object.prototype.hasOwnProperty,$E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eg={},Ng={};function BE(t){return Qd.call(Ng,t)?!0:Qd.call(Eg,t)?!1:$E.test(t)?Ng[t]=!0:(Eg[t]=!0,!1)}function HE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qE(t,e,n,r){if(e===null||typeof e>"u"||HE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nf=/[\-:]([a-z])/g;function Tf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nf,Tf);tt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nf,Tf);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nf,Tf);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function If(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qE(e,n,s,r)&&(n=null),r||s===null?BE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),Yd=Symbol.for("react.profiler"),kx=Symbol.for("react.provider"),Rx=Symbol.for("react.context"),Sf=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),Ax=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,cd;function bo(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var ud=!1;function dd(t,e){if(!t||ud)return"";ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?bo(t):""}function WE(t){switch(t.tag){case 5:return bo(t.type);case 16:return bo("Lazy");case 13:return bo("Suspense");case 19:return bo("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function Zd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Ws:return"Portal";case Yd:return"Profiler";case jf:return"StrictMode";case Jd:return"Suspense";case Xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rx:return(t.displayName||"Context")+".Consumer";case kx:return(t._context.displayName||"Context")+".Provider";case Sf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:Zd(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return Zd(t(e))}catch{}}return null}function GE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zd(e);case 8:return e===jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Px(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KE(t){var e=Px(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ol(t){t._valueTracker||(t._valueTracker=KE(t))}function Dx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Px(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eh(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ig(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lx(t,e){e=e.checked,e!=null&&If(t,"checked",e,!1)}function th(t,e){Lx(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&nh(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nh(t,e,n){(e!=="number"||nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eo=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Eo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function Mx(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var al,Ox=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QE=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){QE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function Fx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function Ux(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var YE=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ih(t,e){if(e){if(YE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lh=null,oi=null,ai=null;function kg(t){if(t=ja(t)){if(typeof lh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=tu(e),lh(t.stateNode,t.type,e))}}function zx(t){oi?ai?ai.push(t):ai=[t]:oi=t}function $x(){if(oi){var t=oi,e=ai;if(ai=oi=null,kg(t),e)for(t=0;t<e.length;t++)kg(e[t])}}function Bx(t,e){return t(e)}function Hx(){}var hd=!1;function qx(t,e,n){if(hd)return t(e,n);hd=!0;try{return Bx(t,e,n)}finally{hd=!1,(oi!==null||ai!==null)&&(Hx(),$x())}}function Yo(t,e){var n=t.stateNode;if(n===null)return null;var r=tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ch=!1;if(zn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){ch=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{ch=!1}function JE(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Po=!1,rc=null,sc=!1,uh=null,XE={onError:function(t){Po=!0,rc=t}};function ZE(t,e,n,r,s,i,a,c,u){Po=!1,rc=null,JE.apply(XE,arguments)}function eN(t,e,n,r,s,i,a,c,u){if(ZE.apply(this,arguments),Po){if(Po){var d=rc;Po=!1,rc=null}else throw Error(U(198));sc||(sc=!0,uh=d)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rg(t){if(Ps(t)!==t)throw Error(U(188))}function tN(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rg(s),t;if(i===r)return Rg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Gx(t){return t=tN(t),t!==null?Kx(t):null}function Kx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kx(t);if(e!==null)return e;t=t.sibling}return null}var Qx=Rt.unstable_scheduleCallback,Ag=Rt.unstable_cancelCallback,nN=Rt.unstable_shouldYield,rN=Rt.unstable_requestPaint,ke=Rt.unstable_now,sN=Rt.unstable_getCurrentPriorityLevel,Rf=Rt.unstable_ImmediatePriority,Yx=Rt.unstable_UserBlockingPriority,ic=Rt.unstable_NormalPriority,iN=Rt.unstable_LowPriority,Jx=Rt.unstable_IdlePriority,Jc=null,pn=null;function oN(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Jc,t,void 0,(t.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:cN,aN=Math.log,lN=Math.LN2;function cN(t){return t>>>=0,t===0?32:31-(aN(t)/lN|0)|0}var ll=64,cl=4194304;function No(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=No(c):(i&=a,i!==0&&(r=No(i)))}else a=n&~s,a!==0?r=No(a):i!==0&&(r=No(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xt(e),s=1<<n,r|=t[n],e&=~s;return r}function uN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Xt(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=uN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function dh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xx(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xt(e),t[e]=n}function hN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function Zx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ev,Pf,tv,nv,rv,hh=!1,ul=[],Er=null,Nr=null,Tr=null,Jo=new Map,Xo=new Map,hr=[],fN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ja(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mN(t,e,n,r,s){switch(e){case"focusin":return Er=fo(Er,t,e,n,r,s),!0;case"dragenter":return Nr=fo(Nr,t,e,n,r,s),!0;case"mouseover":return Tr=fo(Tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Jo.set(i,fo(Jo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xo.set(i,fo(Xo.get(i)||null,t,e,n,r,s)),!0}return!1}function sv(t){var e=ds(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=Wx(n),e!==null){t.blockedOn=e,rv(t.priority,function(){tv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ah=r,n.target.dispatchEvent(r),ah=null}else return e=ja(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function Dg(t,e,n){Pl(t)&&n.delete(e)}function pN(){hh=!1,Er!==null&&Pl(Er)&&(Er=null),Nr!==null&&Pl(Nr)&&(Nr=null),Tr!==null&&Pl(Tr)&&(Tr=null),Jo.forEach(Dg),Xo.forEach(Dg)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,hh||(hh=!0,Rt.unstable_scheduleCallback(Rt.unstable_NormalPriority,pN)))}function Zo(t){function e(s){return mo(s,t)}if(0<ul.length){mo(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&mo(Er,t),Nr!==null&&mo(Nr,t),Tr!==null&&mo(Tr,t),Jo.forEach(e),Xo.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)sv(n),n.blockedOn===null&&hr.shift()}var li=Jn.ReactCurrentBatchConfig,ac=!0;function gN(t,e,n,r){var s=ue,i=li.transition;li.transition=null;try{ue=1,Df(t,e,n,r)}finally{ue=s,li.transition=i}}function yN(t,e,n,r){var s=ue,i=li.transition;li.transition=null;try{ue=4,Df(t,e,n,r)}finally{ue=s,li.transition=i}}function Df(t,e,n,r){if(ac){var s=fh(t,e,n,r);if(s===null)Ed(t,e,r,lc,n),Pg(t,r);else if(mN(s,t,e,n,r))r.stopPropagation();else if(Pg(t,r),e&4&&-1<fN.indexOf(t)){for(;s!==null;){var i=ja(s);if(i!==null&&ev(i),i=fh(t,e,n,r),i===null&&Ed(t,e,r,lc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ed(t,e,r,null,n)}}var lc=null;function fh(t,e,n,r){if(lc=null,t=kf(r),t=ds(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lc=t,null}function iv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sN()){case Rf:return 1;case Yx:return 4;case ic:case iN:return 16;case Jx:return 536870912;default:return 16}default:return 16}}var _r=null,Lf=null,Dl=null;function ov(){if(Dl)return Dl;var t,e=Lf,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Dl=s.slice(t,1<r?1-r:void 0)}function Ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function Lg(){return!1}function Pt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dl:Lg,this.isPropagationStopped=Lg,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=Pt(Pi),Ia=Ee({},Pi,{view:0,detail:0}),xN=Pt(Ia),md,pd,po,Xc=Ee({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(md=t.screenX-po.screenX,pd=t.screenY-po.screenY):pd=md=0,po=t),md)},movementY:function(t){return"movementY"in t?t.movementY:pd}}),Mg=Pt(Xc),vN=Ee({},Xc,{dataTransfer:0}),_N=Pt(vN),wN=Ee({},Ia,{relatedTarget:0}),gd=Pt(wN),bN=Ee({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),EN=Pt(bN),NN=Ee({},Pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TN=Pt(NN),IN=Ee({},Pi,{data:0}),Vg=Pt(IN),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CN[t])?!!e[t]:!1}function Vf(){return kN}var RN=Ee({},Ia,{key:function(t){if(t.key){var e=jN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?Ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AN=Pt(RN),PN=Ee({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=Pt(PN),DN=Ee({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),LN=Pt(DN),MN=Ee({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),VN=Pt(MN),ON=Ee({},Xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FN=Pt(ON),UN=[9,13,27,32],Of=zn&&"CompositionEvent"in window,Do=null;zn&&"documentMode"in document&&(Do=document.documentMode);var zN=zn&&"TextEvent"in window&&!Do,av=zn&&(!Of||Do&&8<Do&&11>=Do),Fg=" ",Ug=!1;function lv(t,e){switch(t){case"keyup":return UN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ks=!1;function $N(t,e){switch(t){case"compositionend":return cv(e);case"keypress":return e.which!==32?null:(Ug=!0,Fg);case"textInput":return t=e.data,t===Fg&&Ug?null:t;default:return null}}function BN(t,e){if(Ks)return t==="compositionend"||!Of&&lv(t,e)?(t=ov(),Dl=Lf=_r=null,Ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return av&&e.locale!=="ko"?null:e.data;default:return null}}var HN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HN[t.type]:e==="textarea"}function uv(t,e,n,r){zx(r),e=cc(e,"onChange"),0<e.length&&(n=new Mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,ea=null;function qN(t){wv(t,0)}function Zc(t){var e=Js(t);if(Dx(e))return t}function WN(t,e){if(t==="change")return e}var dv=!1;if(zn){var yd;if(zn){var xd="oninput"in document;if(!xd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),xd=typeof $g.oninput=="function"}yd=xd}else yd=!1;dv=yd&&(!document.documentMode||9<document.documentMode)}function Bg(){Lo&&(Lo.detachEvent("onpropertychange",hv),ea=Lo=null)}function hv(t){if(t.propertyName==="value"&&Zc(ea)){var e=[];uv(e,ea,t,kf(t)),qx(qN,e)}}function GN(t,e,n){t==="focusin"?(Bg(),Lo=e,ea=n,Lo.attachEvent("onpropertychange",hv)):t==="focusout"&&Bg()}function KN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(ea)}function QN(t,e){if(t==="click")return Zc(e)}function YN(t,e){if(t==="input"||t==="change")return Zc(e)}function JN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rn=typeof Object.is=="function"?Object.is:JN;function ta(t,e){if(rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qd.call(e,s)||!rn(t[s],e[s]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,e){var n=Hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hg(n)}}function fv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mv(){for(var t=window,e=nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nc(t.document)}return e}function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XN(t){var e=mv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fv(n.ownerDocument.documentElement,n)){if(r!==null&&Ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qg(n,i);var a=qg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZN=zn&&"documentMode"in document&&11>=document.documentMode,Qs=null,mh=null,Mo=null,ph=!1;function Wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||Qs==null||Qs!==nc(r)||(r=Qs,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&ta(Mo,r)||(Mo=r,r=cc(mh,"onSelect"),0<r.length&&(e=new Mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qs)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},vd={},pv={};zn&&(pv=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function eu(t){if(vd[t])return vd[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pv)return vd[t]=e[n];return t}var gv=eu("animationend"),yv=eu("animationiteration"),xv=eu("animationstart"),vv=eu("transitionend"),_v=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){_v.set(t,e),As(e,[t])}for(var _d=0;_d<Gg.length;_d++){var wd=Gg[_d],e2=wd.toLowerCase(),t2=wd[0].toUpperCase()+wd.slice(1);Gr(e2,"on"+t2)}Gr(gv,"onAnimationEnd");Gr(yv,"onAnimationIteration");Gr(xv,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(vv,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n2=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function Kg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eN(r,e,void 0,t),t.currentTarget=null}function wv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Kg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Kg(s,c,d),i=u}}}if(sc)throw t=uh,sc=!1,uh=null,t}function pe(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(bv(e,t,2,!1),n.add(r))}function bd(t,e,n){var r=0;e&&(r|=4),bv(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function na(t){if(!t[fl]){t[fl]=!0,Cx.forEach(function(n){n!=="selectionchange"&&(n2.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,bd("selectionchange",!1,e))}}function bv(t,e,n,r){switch(iv(e)){case 1:var s=gN;break;case 4:s=yN;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ed(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=ds(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}qx(function(){var d=i,h=kf(n),m=[];e:{var p=_v.get(t);if(p!==void 0){var x=Mf,N=t;switch(t){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":x=AN;break;case"focusin":N="focus",x=gd;break;case"focusout":N="blur",x=gd;break;case"beforeblur":case"afterblur":x=gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=_N;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=LN;break;case gv:case yv:case xv:x=EN;break;case vv:x=VN;break;case"scroll":x=xN;break;case"wheel":x=FN;break;case"copy":case"cut":case"paste":x=TN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Og}var k=(e&4)!==0,A=!k&&t==="scroll",b=k?p!==null?p+"Capture":null:p;k=[];for(var _=d,w;_!==null;){w=_;var D=w.stateNode;if(w.tag===5&&D!==null&&(w=D,b!==null&&(D=Yo(_,b),D!=null&&k.push(ra(_,D,w)))),A)break;_=_.return}0<k.length&&(p=new x(p,N,null,n,h),m.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==ah&&(N=n.relatedTarget||n.fromElement)&&(ds(N)||N[$n]))break e;if((x||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=d,N=N?ds(N):null,N!==null&&(A=Ps(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=d),x!==N)){if(k=Mg,D="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Og,D="onPointerLeave",b="onPointerEnter",_="pointer"),A=x==null?p:Js(x),w=N==null?p:Js(N),p=new k(D,_+"leave",x,n,h),p.target=A,p.relatedTarget=w,D=null,ds(h)===d&&(k=new k(b,_+"enter",N,n,h),k.target=w,k.relatedTarget=A,D=k),A=D,x&&N)t:{for(k=x,b=N,_=0,w=k;w;w=Us(w))_++;for(w=0,D=b;D;D=Us(D))w++;for(;0<_-w;)k=Us(k),_--;for(;0<w-_;)b=Us(b),w--;for(;_--;){if(k===b||b!==null&&k===b.alternate)break t;k=Us(k),b=Us(b)}k=null}else k=null;x!==null&&Qg(m,p,x,k,!1),N!==null&&A!==null&&Qg(m,A,N,k,!0)}}e:{if(p=d?Js(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var L=WN;else if(zg(p))if(dv)L=YN;else{L=KN;var V=GN}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=QN);if(L&&(L=L(t,d))){uv(m,L,n,h);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&nh(p,"number",p.value)}switch(V=d?Js(d):window,t){case"focusin":(zg(V)||V.contentEditable==="true")&&(Qs=V,mh=d,Mo=null);break;case"focusout":Mo=mh=Qs=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,Wg(m,n,h);break;case"selectionchange":if(ZN)break;case"keydown":case"keyup":Wg(m,n,h)}var E;if(Of)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ks?lv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(av&&n.locale!=="ko"&&(Ks||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ks&&(E=ov()):(_r=h,Lf="value"in _r?_r.value:_r.textContent,Ks=!0)),V=cc(d,v),0<V.length&&(v=new Vg(v,t,null,n,h),m.push({event:v,listeners:V}),E?v.data=E:(E=cv(n),E!==null&&(v.data=E)))),(E=zN?$N(t,n):BN(t,n))&&(d=cc(d,"onBeforeInput"),0<d.length&&(h=new Vg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=E))}wv(m,e)})}function ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yo(t,n),i!=null&&r.unshift(ra(t,i,s)),i=Yo(t,e),i!=null&&r.push(ra(t,i,s))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Yo(n,i),u!=null&&a.unshift(ra(n,u,c))):s||(u=Yo(n,i),u!=null&&a.push(ra(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var r2=/\r\n?/g,s2=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(r2,`
`).replace(s2,"")}function ml(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error(U(425))}function uc(){}var gh=null,yh=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,i2=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,o2=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(t){return Jg.resolve(null).then(t).catch(a2)}:vh;function a2(t){setTimeout(function(){throw t})}function Nd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),fn="__reactFiber$"+Di,sa="__reactProps$"+Di,$n="__reactContainer$"+Di,_h="__reactEvents$"+Di,l2="__reactListeners$"+Di,c2="__reactHandles$"+Di;function ds(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[fn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function ja(t){return t=t[fn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function tu(t){return t[sa]||null}var wh=[],Xs=-1;function Kr(t){return{current:t}}function ye(t){0>Xs||(t.current=wh[Xs],wh[Xs]=null,Xs--)}function fe(t,e){Xs++,wh[Xs]=t.current,t.current=e}var Fr={},ut=Kr(Fr),bt=Kr(!1),_s=Fr;function yi(t,e){var n=t.type.contextTypes;if(!n)return Fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function dc(){ye(bt),ye(ut)}function Zg(t,e,n){if(ut.current!==Fr)throw Error(U(168));fe(ut,e),fe(bt,n)}function Ev(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,GE(t)||"Unknown",s));return Ee({},n,r)}function hc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,_s=ut.current,fe(ut,t),fe(bt,bt.current),!0}function e0(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Ev(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,ye(bt),ye(ut),fe(ut,t)):ye(bt),fe(bt,n)}var Cn=null,nu=!1,Td=!1;function Nv(t){Cn===null?Cn=[t]:Cn.push(t)}function u2(t){nu=!0,Nv(t)}function Qr(){if(!Td&&Cn!==null){Td=!0;var t=0,e=ue;try{var n=Cn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,nu=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),Qx(Rf,Qr),s}finally{ue=e,Td=!1}}return null}var Zs=[],ei=0,fc=null,mc=0,Mt=[],Vt=0,ws=null,Rn=1,An="";function ls(t,e){Zs[ei++]=mc,Zs[ei++]=fc,fc=t,mc=e}function Tv(t,e,n){Mt[Vt++]=Rn,Mt[Vt++]=An,Mt[Vt++]=ws,ws=t;var r=Rn;t=An;var s=32-Xt(r)-1;r&=~(1<<s),n+=1;var i=32-Xt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Rn=1<<32-Xt(e)+s|n<<s|r,An=i+t}else Rn=1<<i|n<<s|r,An=t}function Uf(t){t.return!==null&&(ls(t,1),Tv(t,1,0))}function zf(t){for(;t===fc;)fc=Zs[--ei],Zs[ei]=null,mc=Zs[--ei],Zs[ei]=null;for(;t===ws;)ws=Mt[--Vt],Mt[Vt]=null,An=Mt[--Vt],Mt[Vt]=null,Rn=Mt[--Vt],Mt[Vt]=null}var Ct=null,jt=null,ve=!1,Yt=null;function Iv(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,jt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Rn,overflow:An}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,jt=null,!0):!1;default:return!1}}function bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eh(t){if(ve){var e=jt;if(e){var n=e;if(!t0(t,e)){if(bh(t))throw Error(U(418));e=Ir(n.nextSibling);var r=Ct;e&&t0(t,e)?Iv(r,n):(t.flags=t.flags&-4097|2,ve=!1,Ct=t)}}else{if(bh(t))throw Error(U(418));t.flags=t.flags&-4097|2,ve=!1,Ct=t}}}function n0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function pl(t){if(t!==Ct)return!1;if(!ve)return n0(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=jt)){if(bh(t))throw jv(),Error(U(418));for(;e;)Iv(t,e),e=Ir(e.nextSibling)}if(n0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Ct?Ir(t.stateNode.nextSibling):null;return!0}function jv(){for(var t=jt;t;)t=Ir(t.nextSibling)}function xi(){jt=Ct=null,ve=!1}function $f(t){Yt===null?Yt=[t]:Yt.push(t)}var d2=Jn.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r0(t){var e=t._init;return e(t._payload)}function Sv(t){function e(b,_){if(t){var w=b.deletions;w===null?(b.deletions=[_],b.flags|=16):w.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=kr(b,_),b.index=0,b.sibling=null,b}function i(b,_,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<_?(b.flags|=2,_):w):(b.flags|=2,_)):(b.flags|=1048576,_)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,_,w,D){return _===null||_.tag!==6?(_=Ad(w,b.mode,D),_.return=b,_):(_=s(_,w),_.return=b,_)}function u(b,_,w,D){var L=w.type;return L===Gs?h(b,_,w.props.children,D,w.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ur&&r0(L)===_.type)?(D=s(_,w.props),D.ref=go(b,_,w),D.return=b,D):(D=$l(w.type,w.key,w.props,null,b.mode,D),D.ref=go(b,_,w),D.return=b,D)}function d(b,_,w,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Pd(w,b.mode,D),_.return=b,_):(_=s(_,w.children||[]),_.return=b,_)}function h(b,_,w,D,L){return _===null||_.tag!==7?(_=gs(w,b.mode,D,L),_.return=b,_):(_=s(_,w),_.return=b,_)}function m(b,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ad(""+_,b.mode,w),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case il:return w=$l(_.type,_.key,_.props,null,b.mode,w),w.ref=go(b,null,_),w.return=b,w;case Ws:return _=Pd(_,b.mode,w),_.return=b,_;case ur:var D=_._init;return m(b,D(_._payload),w)}if(Eo(_)||uo(_))return _=gs(_,b.mode,w,null),_.return=b,_;gl(b,_)}return null}function p(b,_,w,D){var L=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return L!==null?null:c(b,_,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case il:return w.key===L?u(b,_,w,D):null;case Ws:return w.key===L?d(b,_,w,D):null;case ur:return L=w._init,p(b,_,L(w._payload),D)}if(Eo(w)||uo(w))return L!==null?null:h(b,_,w,D,null);gl(b,w)}return null}function x(b,_,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(w)||null,c(_,b,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case il:return b=b.get(D.key===null?w:D.key)||null,u(_,b,D,L);case Ws:return b=b.get(D.key===null?w:D.key)||null,d(_,b,D,L);case ur:var V=D._init;return x(b,_,w,V(D._payload),L)}if(Eo(D)||uo(D))return b=b.get(w)||null,h(_,b,D,L,null);gl(_,D)}return null}function N(b,_,w,D){for(var L=null,V=null,E=_,v=_=0,T=null;E!==null&&v<w.length;v++){E.index>v?(T=E,E=null):T=E.sibling;var S=p(b,E,w[v],D);if(S===null){E===null&&(E=T);break}t&&E&&S.alternate===null&&e(b,E),_=i(S,_,v),V===null?L=S:V.sibling=S,V=S,E=T}if(v===w.length)return n(b,E),ve&&ls(b,v),L;if(E===null){for(;v<w.length;v++)E=m(b,w[v],D),E!==null&&(_=i(E,_,v),V===null?L=E:V.sibling=E,V=E);return ve&&ls(b,v),L}for(E=r(b,E);v<w.length;v++)T=x(E,b,v,w[v],D),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?v:T.key),_=i(T,_,v),V===null?L=T:V.sibling=T,V=T);return t&&E.forEach(function(R){return e(b,R)}),ve&&ls(b,v),L}function k(b,_,w,D){var L=uo(w);if(typeof L!="function")throw Error(U(150));if(w=L.call(w),w==null)throw Error(U(151));for(var V=L=null,E=_,v=_=0,T=null,S=w.next();E!==null&&!S.done;v++,S=w.next()){E.index>v?(T=E,E=null):T=E.sibling;var R=p(b,E,S.value,D);if(R===null){E===null&&(E=T);break}t&&E&&R.alternate===null&&e(b,E),_=i(R,_,v),V===null?L=R:V.sibling=R,V=R,E=T}if(S.done)return n(b,E),ve&&ls(b,v),L;if(E===null){for(;!S.done;v++,S=w.next())S=m(b,S.value,D),S!==null&&(_=i(S,_,v),V===null?L=S:V.sibling=S,V=S);return ve&&ls(b,v),L}for(E=r(b,E);!S.done;v++,S=w.next())S=x(E,b,v,S.value,D),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?v:S.key),_=i(S,_,v),V===null?L=S:V.sibling=S,V=S);return t&&E.forEach(function(C){return e(b,C)}),ve&&ls(b,v),L}function A(b,_,w,D){if(typeof w=="object"&&w!==null&&w.type===Gs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case il:e:{for(var L=w.key,V=_;V!==null;){if(V.key===L){if(L=w.type,L===Gs){if(V.tag===7){n(b,V.sibling),_=s(V,w.props.children),_.return=b,b=_;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ur&&r0(L)===V.type){n(b,V.sibling),_=s(V,w.props),_.ref=go(b,V,w),_.return=b,b=_;break e}n(b,V);break}else e(b,V);V=V.sibling}w.type===Gs?(_=gs(w.props.children,b.mode,D,w.key),_.return=b,b=_):(D=$l(w.type,w.key,w.props,null,b.mode,D),D.ref=go(b,_,w),D.return=b,b=D)}return a(b);case Ws:e:{for(V=w.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(b,_.sibling),_=s(_,w.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=Pd(w,b.mode,D),_.return=b,b=_}return a(b);case ur:return V=w._init,A(b,_,V(w._payload),D)}if(Eo(w))return N(b,_,w,D);if(uo(w))return k(b,_,w,D);gl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,w),_.return=b,b=_):(n(b,_),_=Ad(w,b.mode,D),_.return=b,b=_),a(b)):n(b,_)}return A}var vi=Sv(!0),Cv=Sv(!1),pc=Kr(null),gc=null,ti=null,Bf=null;function Hf(){Bf=ti=gc=null}function qf(t){var e=pc.current;ye(pc),t._currentValue=e}function Nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){gc=t,Bf=ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(Bf!==t)if(t={context:t,memoizedValue:e,next:null},ti===null){if(gc===null)throw Error(U(308));ti=t,gc.dependencies={lanes:0,firstContext:t}}else ti=ti.next=t;return e}var hs=null;function Wf(t){hs===null?hs=[t]:hs.push(t)}function kv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bn(t,r)}function Bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var dr=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bn(t,n)}return s=r.interleaved,s===null?(e.next=e,Wf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bn(t,n)}function Ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function s0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yc(t,e,n,r){var s=t.updateQueue;dr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==a&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,h=d=u=null,c=i;do{var p=c.lane,x=c.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,k=c;switch(p=e,x=n,k.tag){case 1:if(N=k.payload,typeof N=="function"){m=N.call(x,m,p);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,p=typeof N=="function"?N.call(x,m,p):N,p==null)break e;m=Ee({},m,p);break e;case 2:dr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else x={eventTime:x,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=x,u=m):h=h.next=x,a|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Es|=a,t.lanes=a,t.memoizedState=m}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Sa={},gn=Kr(Sa),ia=Kr(Sa),oa=Kr(Sa);function fs(t){if(t===Sa)throw Error(U(174));return t}function Kf(t,e){switch(fe(oa,e),fe(ia,t),fe(gn,Sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sh(e,t)}ye(gn),fe(gn,e)}function _i(){ye(gn),ye(ia),ye(oa)}function Av(t){fs(oa.current);var e=fs(gn.current),n=sh(e,t.type);e!==n&&(fe(ia,t),fe(gn,n))}function Qf(t){ia.current===t&&(ye(gn),ye(ia))}var we=Kr(0);function xc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function Yf(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var Vl=Jn.ReactCurrentDispatcher,jd=Jn.ReactCurrentBatchConfig,bs=0,be=null,Me=null,qe=null,vc=!1,Vo=!1,aa=0,h2=0;function st(){throw Error(U(321))}function Jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rn(t[n],e[n]))return!1;return!0}function Xf(t,e,n,r,s,i){if(bs=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?g2:y2,t=n(r,s),Vo){i=0;do{if(Vo=!1,aa=0,25<=i)throw Error(U(301));i+=1,qe=Me=null,e.updateQueue=null,Vl.current=x2,t=n(r,s)}while(Vo)}if(Vl.current=_c,e=Me!==null&&Me.next!==null,bs=0,qe=Me=be=null,vc=!1,e)throw Error(U(300));return t}function Zf(){var t=aa!==0;return aa=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?be.memoizedState=qe=t:qe=qe.next=t,qe}function Bt(){if(Me===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=qe===null?be.memoizedState:qe.next;if(e!==null)qe=e,Me=t;else{if(t===null)throw Error(U(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},qe===null?be.memoizedState=qe=t:qe=qe.next=t}return qe}function la(t,e){return typeof e=="function"?e(t):e}function Sd(t){var e=Bt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var h=d.lane;if((bs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,be.lanes|=h,Es|=h}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,rn(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,Es|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=Bt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);rn(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Pv(){}function Dv(t,e){var n=be,r=Bt(),s=e(),i=!rn(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,em(Vv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,ca(9,Mv.bind(null,n,r,s,e),void 0,null),We===null)throw Error(U(349));bs&30||Lv(n,e,s)}return s}function Lv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mv(t,e,n,r){e.value=n,e.getSnapshot=r,Ov(e)&&Fv(t)}function Vv(t,e,n){return n(function(){Ov(e)&&Fv(t)})}function Ov(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rn(t,n)}catch{return!0}}function Fv(t){var e=Bn(t,1);e!==null&&Zt(e,t,1,-1)}function o0(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},e.queue=t,t=t.dispatch=p2.bind(null,be,t),[e.memoizedState,t]}function ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uv(){return Bt().memoizedState}function Ol(t,e,n,r){var s=dn();be.flags|=t,s.memoizedState=ca(1|e,n,void 0,r===void 0?null:r)}function ru(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var a=Me.memoizedState;if(i=a.destroy,r!==null&&Jf(r,a.deps)){s.memoizedState=ca(e,n,i,r);return}}be.flags|=t,s.memoizedState=ca(1|e,n,i,r)}function a0(t,e){return Ol(8390656,8,t,e)}function em(t,e){return ru(2048,8,t,e)}function zv(t,e){return ru(4,2,t,e)}function $v(t,e){return ru(4,4,t,e)}function Bv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hv(t,e,n){return n=n!=null?n.concat([t]):null,ru(4,4,Bv.bind(null,e,t),n)}function tm(){}function qv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gv(t,e,n){return bs&21?(rn(n,e)||(n=Xx(),be.lanes|=n,Es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function f2(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{ue=n,jd.transition=r}}function Kv(){return Bt().memoizedState}function m2(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qv(t))Yv(e,n);else if(n=kv(t,e,n,r),n!==null){var s=pt();Zt(n,t,r,s),Jv(n,e,r)}}function p2(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qv(t))Yv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,rn(c,a)){var u=e.interleaved;u===null?(s.next=s,Wf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=kv(t,e,s,r),n!==null&&(s=pt(),Zt(n,t,r,s),Jv(n,e,r))}}function Qv(t){var e=t.alternate;return t===be||e!==null&&e===be}function Yv(t,e){Vo=vc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var _c={readContext:$t,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},g2={readContext:$t,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:a0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,Bv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=m2.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:o0,useDebugValue:tm,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=o0(!1),e=t[0];return t=f2.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=dn();if(ve){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),We===null)throw Error(U(349));bs&30||Lv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,a0(Vv.bind(null,r,i,t),[t]),r.flags|=2048,ca(9,Mv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=We.identifierPrefix;if(ve){var n=An,r=Rn;n=(r&~(1<<32-Xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y2={readContext:$t,useCallback:qv,useContext:$t,useEffect:em,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:$v,useMemo:Wv,useReducer:Sd,useRef:Uv,useState:function(){return Sd(la)},useDebugValue:tm,useDeferredValue:function(t){var e=Bt();return Gv(e,Me.memoizedState,t)},useTransition:function(){var t=Sd(la)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Pv,useSyncExternalStore:Dv,useId:Kv,unstable_isNewReconciler:!1},x2={readContext:$t,useCallback:qv,useContext:$t,useEffect:em,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:$v,useMemo:Wv,useReducer:Cd,useRef:Uv,useState:function(){return Cd(la)},useDebugValue:tm,useDeferredValue:function(t){var e=Bt();return Me===null?e.memoizedState=t:Gv(e,Me.memoizedState,t)},useTransition:function(){var t=Cd(la)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Pv,useSyncExternalStore:Dv,useId:Kv,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var su={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Cr(t),i=Ln(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(Zt(e,t,s,r),Ml(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Cr(t),i=Ln(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(Zt(e,t,s,r),Ml(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Cr(t),s=Ln(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(Zt(e,t,r,n),Ml(e,t,r))}};function l0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ta(n,r)||!ta(s,i):!0}function Xv(t,e,n){var r=!1,s=Fr,i=e.contextType;return typeof i=="object"&&i!==null?i=$t(i):(s=Et(e)?_s:ut.current,r=e.contextTypes,i=(r=r!=null)?yi(t,s):Fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function c0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&su.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$t(i):(i=Et(e)?_s:ut.current,s.context=yi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&su.enqueueReplaceState(s,s.state,null),yc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wi(t,e){try{var n="",r=e;do n+=WE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v2=typeof WeakMap=="function"?WeakMap:Map;function Zv(t,e,n){n=Ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bc||(bc=!0,Vh=r),jh(t,e)},n}function e1(t,e,n){n=Ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jh(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function u0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=P2.bind(null,t,e,n),e.then(t,t))}function d0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ln(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var _2=Jn.ReactCurrentOwner,wt=!1;function mt(t,e,n,r){e.child=t===null?Cv(e,null,n,r):vi(e,t.child,n,r)}function f0(t,e,n,r,s){n=n.render;var i=e.ref;return ci(e,s),r=Xf(t,e,n,r,i,s),n=Zf(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(ve&&n&&Uf(e),e.flags|=1,mt(t,e,r,s),e.child)}function m0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,t1(t,e,i,r,s)):(t=$l(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ta,n(a,r)&&t.ref===e.ref)return Hn(t,e,s)}return e.flags|=1,t=kr(i,r),t.ref=e.ref,t.return=e,e.child=t}function t1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ta(i,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Hn(t,e,s)}return Sh(t,e,n,r,s)}function n1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(ri,It),It|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(ri,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe(ri,It),It|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,fe(ri,It),It|=r;return mt(t,e,s,n),e.child}function r1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sh(t,e,n,r,s){var i=Et(n)?_s:ut.current;return i=yi(e,i),ci(e,s),n=Xf(t,e,n,r,i,s),r=Zf(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hn(t,e,s)):(ve&&r&&Uf(e),e.flags|=1,mt(t,e,n,s),e.child)}function p0(t,e,n,r,s){if(Et(n)){var i=!0;hc(e)}else i=!1;if(ci(e,s),e.stateNode===null)Fl(t,e),Xv(e,n,r),Ih(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=Et(n)?_s:ut.current,d=yi(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&c0(e,a,r,d),dr=!1;var p=e.memoizedState;a.state=p,yc(e,r,a,s),u=e.memoizedState,c!==r||p!==u||bt.current||dr?(typeof h=="function"&&(Th(e,n,h,r),u=e.memoizedState),(c=dr||l0(e,n,c,r,p,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Rv(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Kt(e.type,c),a.props=d,m=e.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=$t(u):(u=Et(n)?_s:ut.current,u=yi(e,u));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||p!==u)&&c0(e,a,r,u),dr=!1,p=e.memoizedState,a.state=p,yc(e,r,a,s);var N=e.memoizedState;c!==m||p!==N||bt.current||dr?(typeof x=="function"&&(Th(e,n,x,r),N=e.memoizedState),(d=dr||l0(e,n,d,r,p,N,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ch(t,e,n,r,i,s)}function Ch(t,e,n,r,s,i){r1(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&e0(e,n,!1),Hn(t,e,i);r=e.stateNode,_2.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vi(e,t.child,null,i),e.child=vi(e,null,c,i)):mt(t,e,c,i),e.memoizedState=r.state,s&&e0(e,n,!0),e.child}function s1(t){var e=t.stateNode;e.pendingContext?Zg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zg(t,e.context,!1),Kf(t,e.containerInfo)}function g0(t,e,n,r,s){return xi(),$f(s),e.flags|=256,mt(t,e,n,r),e.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function i1(t,e,n){var r=e.pendingProps,s=we.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),fe(we,s&1),t===null)return Eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=au(a,r,0,null),t=gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rh(n),e.memoizedState=kh,t):nm(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return w2(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=kr(c,i):(i=gs(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Rh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=kh,r}return i=t.child,t=i.sibling,r=kr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,r){return r!==null&&$f(r),vi(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w2(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(U(422))),yl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=au({mode:"visible",children:r.children},s,0,null),i=gs(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vi(e,t.child,null,a),e.child.memoizedState=Rh(a),e.memoizedState=kh,i);if(!(e.mode&1))return yl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(U(419)),r=kd(i,r,void 0),yl(t,e,a,r)}if(c=(a&t.childLanes)!==0,wt||c){if(r=We,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bn(t,s),Zt(r,t,s,-1))}return lm(),r=kd(Error(U(421))),yl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=D2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jt=Ir(s.nextSibling),Ct=e,ve=!0,Yt=null,t!==null&&(Mt[Vt++]=Rn,Mt[Vt++]=An,Mt[Vt++]=ws,Rn=t.id,An=t.overflow,ws=e),e=nm(e,r.children),e.flags|=4096,e)}function y0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nh(t.return,e,n)}function Rd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function o1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(mt(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y0(t,n,e);else if(t.tag===19)y0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rd(e,!0,n,null,i);break;case"together":Rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b2(t,e,n){switch(e.tag){case 3:s1(e),xi();break;case 5:Av(e);break;case 1:Et(e.type)&&hc(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;fe(pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?i1(t,e,n):(fe(we,we.current&1),t=Hn(t,e,n),t!==null?t.sibling:null);fe(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,n1(t,e,n)}return Hn(t,e,n)}var a1,Ah,l1,c1;a1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ah=function(){};l1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fs(gn.current);var i=null;switch(n){case"input":s=eh(t,s),r=eh(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=rh(t,s),r=rh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uc)}ih(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ko.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ko.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};c1=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E2(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return Et(e.type)&&dc(),it(e),null;case 3:return r=e.stateNode,_i(),ye(bt),ye(ut),Yf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(Uh(Yt),Yt=null))),Ah(t,e),it(e),null;case 5:Qf(e);var s=fs(oa.current);if(n=e.type,t!==null&&e.stateNode!=null)l1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return it(e),null}if(t=fs(gn.current),pl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[sa]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<To.length;s++)pe(To[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Ig(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":Sg(r,i),pe("invalid",r)}ih(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,c,t),s=["children",""+c]):Ko.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&pe("scroll",r)}switch(n){case"input":ol(r),jg(r,i,!0);break;case"textarea":ol(r),Cg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=uc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[fn]=e,t[sa]=r,a1(t,e,!1,!1),e.stateNode=t;e:{switch(a=oh(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<To.length;s++)pe(To[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":Ig(t,r),s=eh(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Sg(t,r),s=rh(t,r),pe("invalid",t);break;default:s=r}ih(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Ux(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ox(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Qo(t,u):typeof u=="number"&&Qo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ko.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&If(t,i,u,a))}switch(n){case"input":ol(t),jg(t,r,!1);break;case"textarea":ol(t),Cg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)c1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=fs(oa.current),fs(gn.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return it(e),null;case 13:if(ye(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&jt!==null&&e.mode&1&&!(e.flags&128))jv(),xi(),e.flags|=98560,i=!1;else if(i=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[fn]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Yt!==null&&(Uh(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Ue===0&&(Ue=3):lm())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return _i(),Ah(t,e),t===null&&na(e.stateNode.containerInfo),it(e),null;case 10:return qf(e.type._context),it(e),null;case 17:return Et(e.type)&&dc(),it(e),null;case 19:if(ye(we),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)yo(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xc(t),a!==null){for(e.flags|=128,yo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>bi&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=xc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ve)return it(e),null}else 2*ke()-i.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=we.current,fe(we,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function N2(t,e){switch(zf(e),e.tag){case 1:return Et(e.type)&&dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),ye(bt),ye(ut),Yf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qf(e),null;case 13:if(ye(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(we),null;case 4:return _i(),null;case 10:return qf(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var xl=!1,lt=!1,T2=typeof WeakSet=="function"?WeakSet:Set,q=null;function ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ie(t,e,r)}else n.current=null}function Ph(t,e,n){try{n()}catch(r){Ie(t,e,r)}}var x0=!1;function I2(t,e){if(gh=ac,t=mv(),Ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)p=m,m=x;for(;;){if(m===t)break t;if(p===n&&++d===s&&(c=a),p===i&&++h===r&&(u=a),(x=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yh={focusedElem:t,selectionRange:n},ac=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,A=N.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:Kt(e.type,k),A);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Ie(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return N=x0,x0=!1,N}function Oo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ph(e,n,i)}s=s.next}while(s!==r)}}function iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u1(t){var e=t.alternate;e!==null&&(t.alternate=null,u1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[sa],delete e[_h],delete e[l2],delete e[c2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d1(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uc));else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}var Ke=null,Qt=!1;function lr(t,e,n){for(n=n.child;n!==null;)h1(t,e,n),n=n.sibling}function h1(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Jc,n)}catch{}switch(n.tag){case 5:lt||ni(n,e);case 6:var r=Ke,s=Qt;Ke=null,lr(t,e,n),Ke=r,Qt=s,Ke!==null&&(Qt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Qt?(t=Ke,n=n.stateNode,t.nodeType===8?Nd(t.parentNode,n):t.nodeType===1&&Nd(t,n),Zo(t)):Nd(Ke,n.stateNode));break;case 4:r=Ke,s=Qt,Ke=n.stateNode.containerInfo,Qt=!0,lr(t,e,n),Ke=r,Qt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ph(n,e,a),s=s.next}while(s!==r)}lr(t,e,n);break;case 1:if(!lt&&(ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ie(n,e,c)}lr(t,e,n);break;case 21:lr(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,lr(t,e,n),lt=r):lr(t,e,n);break;default:lr(t,e,n)}}function _0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new T2),e.forEach(function(r){var s=L2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Ke=c.stateNode,Qt=!1;break e;case 3:Ke=c.stateNode.containerInfo,Qt=!0;break e;case 4:Ke=c.stateNode.containerInfo,Qt=!0;break e}c=c.return}if(Ke===null)throw Error(U(160));h1(i,a,s),Ke=null,Qt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ie(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f1(e,t),e=e.sibling}function f1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),un(t),r&4){try{Oo(3,t,t.return),iu(3,t)}catch(k){Ie(t,t.return,k)}try{Oo(5,t,t.return)}catch(k){Ie(t,t.return,k)}}break;case 1:Gt(e,t),un(t),r&512&&n!==null&&ni(n,n.return);break;case 5:if(Gt(e,t),un(t),r&512&&n!==null&&ni(n,n.return),t.flags&32){var s=t.stateNode;try{Qo(s,"")}catch(k){Ie(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Lx(s,i),oh(c,a);var d=oh(c,i);for(a=0;a<u.length;a+=2){var h=u[a],m=u[a+1];h==="style"?Ux(s,m):h==="dangerouslySetInnerHTML"?Ox(s,m):h==="children"?Qo(s,m):If(s,h,m,d)}switch(c){case"input":th(s,i);break;case"textarea":Mx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ii(s,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?ii(s,!!i.multiple,i.defaultValue,!0):ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[sa]=i}catch(k){Ie(t,t.return,k)}}break;case 6:if(Gt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Ie(t,t.return,k)}}break;case 3:if(Gt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(k){Ie(t,t.return,k)}break;case 4:Gt(e,t),un(t);break;case 13:Gt(e,t),un(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(im=ke())),r&4&&_0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||h,Gt(e,t),lt=d):Gt(e,t),un(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(m=q=h;q!==null;){switch(p=q,x=p.child,p.tag){case 0:case 11:case 14:case 15:Oo(4,p,p.return);break;case 1:ni(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(k){Ie(r,n,k)}}break;case 5:ni(p,p.return);break;case 22:if(p.memoizedState!==null){b0(m);continue}}x!==null?(x.return=p,q=x):b0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Fx("display",a))}catch(k){Ie(t,t.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Ie(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gt(e,t),un(t),r&4&&_0(t);break;case 21:break;default:Gt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qo(s,""),r.flags&=-33);var i=v0(t);Mh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=v0(t);Lh(t,c,a);break;default:throw Error(U(161))}}catch(u){Ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function j2(t,e,n){q=t,m1(t)}function m1(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||lt;c=xl;var d=lt;if(xl=a,(lt=u)&&!d)for(q=s;q!==null;)a=q,u=a.child,a.tag===22&&a.memoizedState!==null?E0(s):u!==null?(u.return=a,q=u):E0(s);for(;i!==null;)q=i,m1(i),i=i.sibling;q=s,xl=c,lt=d}w0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):w0(t)}}function w0(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&i0(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Zo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}lt||e.flags&512&&Dh(e)}catch(p){Ie(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function b0(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function E0(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{iu(4,e)}catch(u){Ie(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ie(e,s,u)}}var i=e.return;try{Dh(e)}catch(u){Ie(e,i,u)}break;case 5:var a=e.return;try{Dh(e)}catch(u){Ie(e,a,u)}}}catch(u){Ie(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var S2=Math.ceil,wc=Jn.ReactCurrentDispatcher,rm=Jn.ReactCurrentOwner,zt=Jn.ReactCurrentBatchConfig,ae=0,We=null,Ae=null,Ze=0,It=0,ri=Kr(0),Ue=0,ua=null,Es=0,ou=0,sm=0,Fo=null,vt=null,im=0,bi=1/0,Sn=null,bc=!1,Vh=null,Sr=null,vl=!1,wr=null,Ec=0,Uo=0,Oh=null,Ul=-1,zl=0;function pt(){return ae&6?ke():Ul!==-1?Ul:Ul=ke()}function Cr(t){return t.mode&1?ae&2&&Ze!==0?Ze&-Ze:d2.transition!==null?(zl===0&&(zl=Xx()),zl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:iv(t.type)),t):1}function Zt(t,e,n,r){if(50<Uo)throw Uo=0,Oh=null,Error(U(185));Ta(t,n,r),(!(ae&2)||t!==We)&&(t===We&&(!(ae&2)&&(ou|=n),Ue===4&&fr(t,Ze)),Nt(t,r),n===1&&ae===0&&!(e.mode&1)&&(bi=ke()+500,nu&&Qr()))}function Nt(t,e){var n=t.callbackNode;dN(t,e);var r=oc(t,t===We?Ze:0);if(r===0)n!==null&&Ag(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ag(n),e===1)t.tag===0?u2(N0.bind(null,t)):Nv(N0.bind(null,t)),o2(function(){!(ae&6)&&Qr()}),n=null;else{switch(Zx(r)){case 1:n=Rf;break;case 4:n=Yx;break;case 16:n=ic;break;case 536870912:n=Jx;break;default:n=ic}n=b1(n,p1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p1(t,e){if(Ul=-1,zl=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(ui()&&t.callbackNode!==n)return null;var r=oc(t,t===We?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nc(t,r);else{e=r;var s=ae;ae|=2;var i=y1();(We!==t||Ze!==e)&&(Sn=null,bi=ke()+500,ps(t,e));do try{R2();break}catch(c){g1(t,c)}while(!0);Hf(),wc.current=i,ae=s,Ae!==null?e=0:(We=null,Ze=0,e=Ue)}if(e!==0){if(e===2&&(s=dh(t),s!==0&&(r=s,e=Fh(t,s))),e===1)throw n=ua,ps(t,0),fr(t,r),Nt(t,ke()),n;if(e===6)fr(t,r);else{if(s=t.current.alternate,!(r&30)&&!C2(s)&&(e=Nc(t,r),e===2&&(i=dh(t),i!==0&&(r=i,e=Fh(t,i))),e===1))throw n=ua,ps(t,0),fr(t,r),Nt(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:cs(t,vt,Sn);break;case 3:if(fr(t,r),(r&130023424)===r&&(e=im+500-ke(),10<e)){if(oc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vh(cs.bind(null,t,vt,Sn),e);break}cs(t,vt,Sn);break;case 4:if(fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Xt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S2(r/1960))-r,10<r){t.timeoutHandle=vh(cs.bind(null,t,vt,Sn),r);break}cs(t,vt,Sn);break;case 5:cs(t,vt,Sn);break;default:throw Error(U(329))}}}return Nt(t,ke()),t.callbackNode===n?p1.bind(null,t):null}function Fh(t,e){var n=Fo;return t.current.memoizedState.isDehydrated&&(ps(t,e).flags|=256),t=Nc(t,e),t!==2&&(e=vt,vt=n,e!==null&&Uh(e)),t}function Uh(t){vt===null?vt=t:vt.push.apply(vt,t)}function C2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~sm,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xt(e),r=1<<n;t[n]=-1,e&=~r}}function N0(t){if(ae&6)throw Error(U(327));ui();var e=oc(t,0);if(!(e&1))return Nt(t,ke()),null;var n=Nc(t,e);if(t.tag!==0&&n===2){var r=dh(t);r!==0&&(e=r,n=Fh(t,r))}if(n===1)throw n=ua,ps(t,0),fr(t,e),Nt(t,ke()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,vt,Sn),Nt(t,ke()),null}function om(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(bi=ke()+500,nu&&Qr())}}function Ns(t){wr!==null&&wr.tag===0&&!(ae&6)&&ui();var e=ae;ae|=1;var n=zt.transition,r=ue;try{if(zt.transition=null,ue=1,t)return t()}finally{ue=r,zt.transition=n,ae=e,!(ae&6)&&Qr()}}function am(){It=ri.current,ye(ri)}function ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,i2(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dc();break;case 3:_i(),ye(bt),ye(ut),Yf();break;case 5:Qf(r);break;case 4:_i();break;case 13:ye(we);break;case 19:ye(we);break;case 10:qf(r.type._context);break;case 22:case 23:am()}n=n.return}if(We=t,Ae=t=kr(t.current,null),Ze=It=e,Ue=0,ua=null,sm=ou=Es=0,vt=Fo=null,hs!==null){for(e=0;e<hs.length;e++)if(n=hs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}hs=null}return t}function g1(t,e){do{var n=Ae;try{if(Hf(),Vl.current=_c,vc){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vc=!1}if(bs=0,qe=Me=be=null,Vo=!1,aa=0,rm.current=null,n===null||n.return===null){Ue=1,ua=e,Ae=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Ze,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=d0(a);if(x!==null){x.flags&=-257,h0(x,a,c,i,e),x.mode&1&&u0(i,d,e),e=x,u=d;var N=e.updateQueue;if(N===null){var k=new Set;k.add(u),e.updateQueue=k}else N.add(u);break e}else{if(!(e&1)){u0(i,d,e),lm();break e}u=Error(U(426))}}else if(ve&&c.mode&1){var A=d0(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),h0(A,a,c,i,e),$f(wi(u,c));break e}}i=u=wi(u,c),Ue!==4&&(Ue=2),Fo===null?Fo=[i]:Fo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=Zv(i,u,e);s0(i,b);break e;case 1:c=u;var _=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Sr===null||!Sr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=e1(i,c,e);s0(i,D);break e}}i=i.return}while(i!==null)}v1(n)}catch(L){e=L,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function y1(){var t=wc.current;return wc.current=_c,t===null?_c:t}function lm(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(Es&268435455)&&!(ou&268435455)||fr(We,Ze)}function Nc(t,e){var n=ae;ae|=2;var r=y1();(We!==t||Ze!==e)&&(Sn=null,ps(t,e));do try{k2();break}catch(s){g1(t,s)}while(!0);if(Hf(),ae=n,wc.current=r,Ae!==null)throw Error(U(261));return We=null,Ze=0,Ue}function k2(){for(;Ae!==null;)x1(Ae)}function R2(){for(;Ae!==null&&!nN();)x1(Ae)}function x1(t){var e=w1(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?v1(t):Ae=e,rm.current=null}function v1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=N2(n,e),n!==null){n.flags&=32767,Ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Ae=null;return}}else if(n=E2(n,e,It),n!==null){Ae=n;return}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);Ue===0&&(Ue=5)}function cs(t,e,n){var r=ue,s=zt.transition;try{zt.transition=null,ue=1,A2(t,e,n,r)}finally{zt.transition=s,ue=r}return null}function A2(t,e,n,r){do ui();while(wr!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hN(t,i),t===We&&(Ae=We=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,b1(ic,function(){return ui(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var a=ue;ue=1;var c=ae;ae|=4,rm.current=null,I2(t,n),f1(n,t),XN(yh),ac=!!gh,yh=gh=null,t.current=n,j2(n),rN(),ae=c,ue=a,zt.transition=i}else t.current=n;if(vl&&(vl=!1,wr=t,Ec=s),i=t.pendingLanes,i===0&&(Sr=null),oN(n.stateNode),Nt(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bc)throw bc=!1,t=Vh,Vh=null,t;return Ec&1&&t.tag!==0&&ui(),i=t.pendingLanes,i&1?t===Oh?Uo++:(Uo=0,Oh=t):Uo=0,Qr(),null}function ui(){if(wr!==null){var t=Zx(Ec),e=zt.transition,n=ue;try{if(zt.transition=null,ue=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,Ec=0,ae&6)throw Error(U(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,a=i.child;if(q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Oo(8,h,i)}var m=h.child;if(m!==null)m.return=h,q=m;else for(;q!==null;){h=q;var p=h.sibling,x=h.return;if(u1(h),h===d){q=null;break}if(p!==null){p.return=x,q=p;break}q=x}}}var N=i.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var A=k.sibling;k.sibling=null,k=A}while(k!==null)}}q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,q=a;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oo(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,q=b;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){a=q;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,q=w;else e:for(a=_;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:iu(9,c)}}catch(L){Ie(c,c.return,L)}if(c===a){q=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,q=D;break e}q=c.return}}if(ae=s,Qr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Jc,t)}catch{}r=!0}return r}finally{ue=n,zt.transition=e}}return!1}function T0(t,e,n){e=wi(n,e),e=Zv(t,e,1),t=jr(t,e,1),e=pt(),t!==null&&(Ta(t,1,e),Nt(t,e))}function Ie(t,e,n){if(t.tag===3)T0(t,t,n);else for(;e!==null;){if(e.tag===3){T0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=wi(n,t),t=e1(e,t,1),e=jr(e,t,1),t=pt(),e!==null&&(Ta(e,1,t),Nt(e,t));break}}e=e.return}}function P2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Ze&n)===n&&(Ue===4||Ue===3&&(Ze&130023424)===Ze&&500>ke()-im?ps(t,0):sm|=n),Nt(t,e)}function _1(t,e){e===0&&(t.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var n=pt();t=Bn(t,e),t!==null&&(Ta(t,e,n),Nt(t,n))}function D2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_1(t,n)}function L2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),_1(t,n)}var w1;w1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,b2(t,e,n);wt=!!(t.flags&131072)}else wt=!1,ve&&e.flags&1048576&&Tv(e,mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var s=yi(e,ut.current);ci(e,n),s=Xf(null,e,r,t,s,n);var i=Zf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,hc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gf(e),s.updater=su,e.stateNode=s,s._reactInternals=e,Ih(e,r,t,n),e=Ch(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&Uf(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=V2(r),t=Kt(r,t),s){case 0:e=Sh(null,e,r,t,n);break e;case 1:e=p0(null,e,r,t,n);break e;case 11:e=f0(null,e,r,t,n);break e;case 14:e=m0(null,e,r,Kt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Sh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),p0(t,e,r,s,n);case 3:e:{if(s1(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rv(t,e),yc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=wi(Error(U(423)),e),e=g0(t,e,r,n,s);break e}else if(r!==s){s=wi(Error(U(424)),e),e=g0(t,e,r,n,s);break e}else for(jt=Ir(e.stateNode.containerInfo.firstChild),Ct=e,ve=!0,Yt=null,n=Cv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===s){e=Hn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return Av(e),t===null&&Eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,xh(r,s)?a=null:i!==null&&xh(r,i)&&(e.flags|=32),r1(t,e),mt(t,e,a,n),e.child;case 6:return t===null&&Eh(e),null;case 13:return i1(t,e,n);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vi(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),f0(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,fe(pc,r._currentValue),r._currentValue=a,i!==null)if(rn(i.value,a)){if(i.children===s.children&&!bt.current){e=Hn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ln(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Nh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ci(e,n),s=$t(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),m0(t,e,r,s,n);case 15:return t1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Fl(t,e),e.tag=1,Et(r)?(t=!0,hc(e)):t=!1,ci(e,n),Xv(e,r,s),Ih(e,r,s,n),Ch(null,e,r,!0,t,n);case 19:return o1(t,e,n);case 22:return n1(t,e,n)}throw Error(U(156,e.tag))};function b1(t,e){return Qx(t,e)}function M2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new M2(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function V2(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sf)return 11;if(t===Cf)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")cm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gs:return gs(n.children,s,i,e);case jf:a=8,s|=8;break;case Yd:return t=Ut(12,n,e,s|2),t.elementType=Yd,t.lanes=i,t;case Jd:return t=Ut(13,n,e,s),t.elementType=Jd,t.lanes=i,t;case Xd:return t=Ut(19,n,e,s),t.elementType=Xd,t.lanes=i,t;case Ax:return au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kx:a=10;break e;case Rx:a=9;break e;case Sf:a=11;break e;case Cf:a=14;break e;case ur:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ut(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gs(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function au(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=Ax,t.lanes=n,t.stateNode={isHidden:!1},t}function Ad(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function Pd(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function O2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fd(0),this.expirationTimes=fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function um(t,e,n,r,s,i,a,c,u){return t=new O2(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(i),t}function F2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E1(t){if(!t)return Fr;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Et(n))return Ev(t,n,e)}return e}function N1(t,e,n,r,s,i,a,c,u){return t=um(n,r,!0,t,s,i,a,c,u),t.context=E1(null),n=t.current,r=pt(),s=Cr(n),i=Ln(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Ta(t,s,r),Nt(t,r),t}function lu(t,e,n,r){var s=e.current,i=pt(),a=Cr(s);return n=E1(n),e.context===null?e.context=n:e.pendingContext=n,e=Ln(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,a),t!==null&&(Zt(t,s,a,i),Ml(t,s,a)),a}function Tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function I0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){I0(t,e),(t=t.alternate)&&I0(t,e)}function U2(){return null}var T1=typeof reportError=="function"?reportError:function(t){console.error(t)};function hm(t){this._internalRoot=t}cu.prototype.render=hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));lu(t,e,null,null)};cu.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){lu(null,t,null,null)}),e[$n]=null}};function cu(t){this._internalRoot=t}cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=nv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&sv(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j0(){}function z2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Tc(a);i.call(d)}}var a=N1(e,r,t,0,null,!1,!1,"",j0);return t._reactRootContainer=a,t[$n]=a.current,na(t.nodeType===8?t.parentNode:t),Ns(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Tc(u);c.call(d)}}var u=um(t,0,!1,null,null,!1,!1,"",j0);return t._reactRootContainer=u,t[$n]=u.current,na(t.nodeType===8?t.parentNode:t),Ns(function(){lu(e,u,n,r)}),u}function du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=Tc(a);c.call(u)}}lu(e,a,t,s)}else a=z2(n,e,t,s,r);return Tc(a)}ev=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=No(e.pendingLanes);n!==0&&(Af(e,n|1),Nt(e,ke()),!(ae&6)&&(bi=ke()+500,Qr()))}break;case 13:Ns(function(){var r=Bn(t,1);if(r!==null){var s=pt();Zt(r,t,1,s)}}),dm(t,1)}};Pf=function(t){if(t.tag===13){var e=Bn(t,134217728);if(e!==null){var n=pt();Zt(e,t,134217728,n)}dm(t,134217728)}};tv=function(t){if(t.tag===13){var e=Cr(t),n=Bn(t,e);if(n!==null){var r=pt();Zt(n,t,e,r)}dm(t,e)}};nv=function(){return ue};rv=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};lh=function(t,e,n){switch(e){case"input":if(th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tu(r);if(!s)throw Error(U(90));Dx(r),th(r,s)}}}break;case"textarea":Mx(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};Bx=om;Hx=Ns;var $2={usingClientEntryPoint:!1,Events:[ja,Js,tu,zx,$x,om]},xo={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B2={bundleType:xo.bundleType,version:xo.version,rendererPackageName:xo.rendererPackageName,rendererConfig:xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gx(t),t===null?null:t.stateNode},findFiberByHostInstance:xo.findFiberByHostInstance||U2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Jc=_l.inject(B2),pn=_l}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$2;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(U(200));return F2(t,e,null,n)};At.createRoot=function(t,e){if(!fm(t))throw Error(U(299));var n=!1,r="",s=T1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=um(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,na(t.nodeType===8?t.parentNode:t),new hm(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Gx(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Ns(t)};At.hydrate=function(t,e,n){if(!uu(e))throw Error(U(200));return du(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=T1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=N1(e,null,t,1,n??null,s,!1,i,a),t[$n]=e.current,na(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cu(e)};At.render=function(t,e,n){if(!uu(e))throw Error(U(200));return du(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!uu(t))throw Error(U(40));return t._reactRootContainer?(Ns(function(){du(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};At.unstable_batchedUpdates=om;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return du(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function I1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I1)}catch(t){console.error(t)}}I1(),Ix.exports=At;var H2=Ix.exports,j1,S0=H2;j1=S0.createRoot,S0.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C0="popstate";function q2(t={}){function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return zh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:da(s)}return G2(e,n,null,t)}function _e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ht(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W2(){return Math.random().toString(36).substring(2,10)}function k0(t,e){return{usr:t.state,key:t.key,idx:e}}function zh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Li(e):e,state:n,key:e&&e.key||r||W2()}}function da({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function G2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function m(){c="POP";let A=h(),b=A==null?null:A-d;d=A,u&&u({action:c,location:k.location,delta:b})}function p(A,b){c="PUSH";let _=zh(k.location,A,b);d=h()+1;let w=k0(_,d),D=k.createHref(_);try{a.pushState(w,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&u&&u({action:c,location:k.location,delta:1})}function x(A,b){c="REPLACE";let _=zh(k.location,A,b);d=h();let w=k0(_,d),D=k.createHref(_);a.replaceState(w,"",D),i&&u&&u({action:c,location:k.location,delta:0})}function N(A){return K2(A)}let k={get action(){return c},get location(){return t(s,a)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(C0,m),u=A,()=>{s.removeEventListener(C0,m),u=null}},createHref(A){return e(s,A)},createURL:N,encodeLocation(A){let b=N(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:x,go(A){return a.go(A)}};return k}function K2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_e(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:da(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function S1(t,e,n="/"){return Q2(t,e,n,!1)}function Q2(t,e,n,r){let s=typeof e=="string"?Li(e):e,i=qn(s.pathname||"/",n);if(i==null)return null;let a=C1(t);Y2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=aT(i);c=iT(a[u],d,r)}return c}function C1(t,e=[],n=[],r="",s=!1){let i=(a,c,u=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;_e(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=Mn([r,h.relativePath]),p=n.concat(h);a.children&&a.children.length>0&&(_e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),C1(a.children,e,p,m,u)),!(a.path==null&&!a.index)&&e.push({path:m,score:rT(m,a.index),routesMeta:p})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let d of k1(a.path))i(a,c,!0,d)}),e}function k1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=k1(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Y2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var J2=/^:[\w-]+$/,X2=3,Z2=2,eT=1,tT=10,nT=-2,R0=t=>t==="*";function rT(t,e){let n=t.split("/"),r=n.length;return n.some(R0)&&(r+=nT),e&&(r+=Z2),n.filter(s=>!R0(s)).reduce((s,i)=>s+(J2.test(i)?X2:i===""?eT:tT),r)}function sT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iT(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Ic({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Ic({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Mn([i,m.pathname]),pathnameBase:dT(Mn([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=Mn([i,m.pathnameBase]))}return a}function Ic(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let N=c[p]||"";a=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const x=c[p];return m&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function oT(t,e=!1,n=!0){Ht(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ht(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var R1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lT=t=>R1.test(t);function cT(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Li(t):t,i;if(n)if(lT(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Ht(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?i=A0(n.substring(1),"/"):i=A0(n,e)}else i=e;return{pathname:i,search:hT(r),hash:fT(s)}}function A0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Dd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mm(t){let e=uT(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function pm(t,e,n,r=!1){let s;typeof t=="string"?s=Li(t):(s={...t},_e(!s.pathname||!s.pathname.includes("?"),Dd("?","pathname","search",s)),_e(!s.pathname||!s.pathname.includes("#"),Dd("#","pathname","hash",s)),_e(!s.search||!s.search.includes("#"),Dd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=cT(s,c),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Mn=t=>t.join("/").replace(/\/\/+/g,"/"),dT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,mT=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function pT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function gT(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var A1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function P1(t,e){let n=t;if(typeof n!="string"||!R1.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(A1)try{let i=new URL(window.location.href),a=n.startsWith("//")?new URL(i.protocol+n):new URL(n),c=qn(a.pathname,e);a.origin===i.origin&&c!=null?n=c+a.search+a.hash:s=!0}catch{Ht(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var D1=["POST","PUT","PATCH","DELETE"];new Set(D1);var yT=["GET",...D1];new Set(yT);var Mi=I.createContext(null);Mi.displayName="DataRouter";var hu=I.createContext(null);hu.displayName="DataRouterState";var xT=I.createContext(!1),L1=I.createContext({isTransitioning:!1});L1.displayName="ViewTransition";var vT=I.createContext(new Map);vT.displayName="Fetchers";var _T=I.createContext(null);_T.displayName="Await";var Dt=I.createContext(null);Dt.displayName="Navigation";var Ca=I.createContext(null);Ca.displayName="Location";var an=I.createContext({outlet:null,matches:[],isDataRoute:!1});an.displayName="Route";var gm=I.createContext(null);gm.displayName="RouteError";var M1="REACT_ROUTER_ERROR",wT="REDIRECT",bT="ROUTE_ERROR_RESPONSE";function ET(t){if(t.startsWith(`${M1}:${wT}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function NT(t){if(t.startsWith(`${M1}:${bT}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new mT(e.status,e.statusText,e.data)}catch{}}function TT(t,{relative:e}={}){_e(Vi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Dt),{hash:s,pathname:i,search:a}=ka(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Mn([n,i])),r.createHref({pathname:c,search:a,hash:s})}function Vi(){return I.useContext(Ca)!=null}function Xn(){return _e(Vi(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Ca).location}var V1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function O1(t){I.useContext(Dt).static||I.useLayoutEffect(t)}function En(){let{isDataRoute:t}=I.useContext(an);return t?FT():IT()}function IT(){_e(Vi(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(Mi),{basename:e,navigator:n}=I.useContext(Dt),{matches:r}=I.useContext(an),{pathname:s}=Xn(),i=JSON.stringify(mm(r)),a=I.useRef(!1);return O1(()=>{a.current=!0}),I.useCallback((u,d={})=>{if(Ht(a.current,V1),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=pm(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Mn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}I.createContext(null);function jT(){let{matches:t}=I.useContext(an),e=t[t.length-1];return e?e.params:{}}function ka(t,{relative:e}={}){let{matches:n}=I.useContext(an),{pathname:r}=Xn(),s=JSON.stringify(mm(n));return I.useMemo(()=>pm(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function ST(t,e){return F1(t,e)}function F1(t,e,n,r,s){var _;_e(Vi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=I.useContext(Dt),{matches:a}=I.useContext(an),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let w=m&&m.path||"";z1(d,!m||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Xn(),x;if(e){let w=typeof e=="string"?Li(e):e;_e(h==="/"||((_=w.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let N=x.pathname||"/",k=N;if(h!=="/"){let w=h.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice(w.length).join("/")}let A=S1(t,{pathname:k});Ht(m||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ht(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=PT(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Mn([h,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Mn([h,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),a,n,r,s);return e&&b?I.createElement(Ca.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function CT(){let t=OT(),e=pT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:i},"ErrorBoundary")," or"," ",I.createElement("code",{style:i},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,a)}var kT=I.createElement(CT,null),U1=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=NT(t.digest);n&&(t=n)}let e=t!==void 0?I.createElement(an.Provider,{value:this.props.routeContext},I.createElement(gm.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?I.createElement(RT,{error:t},e):e}};U1.contextType=xT;var Ld=new WeakMap;function RT({children:t,error:e}){let{basename:n}=I.useContext(Dt);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=ET(e.digest);if(r){let s=Ld.get(e);if(s)throw s;let i=P1(r.location,n);if(A1&&!Ld.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw Ld.set(e,a),a}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function AT({routeContext:t,match:e,children:n}){let r=I.useContext(Mi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(an.Provider,{value:t},n)}function PT(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let h=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);_e(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:p,errors:x}=n,N=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||N){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(h,m)=>{var p,x;r(h,{location:n.location,params:((x=(p=n.matches)==null?void 0:p[0])==null?void 0:x.params)??{},unstable_pattern:gT(n.matches),errorInfo:m})}:void 0;return i.reduceRight((h,m,p)=>{let x,N=!1,k=null,A=null;n&&(x=a&&m.route.id?a[m.route.id]:void 0,k=m.route.errorElement||kT,c&&(u<0&&p===0?(z1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,A=null):u===p&&(N=!0,A=m.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,p+1)),_=()=>{let w;return x?w=k:N?w=A:m.route.Component?w=I.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=h,I.createElement(AT,{match:m,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?I.createElement(U1,{location:n.location,revalidation:n.revalidation,component:k,error:x,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:d}):_()},null)}function ym(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DT(t){let e=I.useContext(Mi);return _e(e,ym(t)),e}function LT(t){let e=I.useContext(hu);return _e(e,ym(t)),e}function MT(t){let e=I.useContext(an);return _e(e,ym(t)),e}function xm(t){let e=MT(t),n=e.matches[e.matches.length-1];return _e(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function VT(){return xm("useRouteId")}function OT(){var r;let t=I.useContext(gm),e=LT("useRouteError"),n=xm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function FT(){let{router:t}=DT("useNavigate"),e=xm("useNavigate"),n=I.useRef(!1);return O1(()=>{n.current=!0}),I.useCallback(async(s,i={})=>{Ht(n.current,V1),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var P0={};function z1(t,e,n){!e&&!P0[t]&&(P0[t]=!0,Ht(!1,n))}I.memo(UT);function UT({routes:t,future:e,state:n,onError:r}){return F1(t,void 0,n,r,e)}function zT({to:t,replace:e,state:n,relative:r}){_e(Vi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(Dt);Ht(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=I.useContext(an),{pathname:a}=Xn(),c=En(),u=pm(t,mm(i),a,r==="path"),d=JSON.stringify(u);return I.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function Qe(t){_e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $T({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:a}){_e(!Vi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:a,future:{}}),[c,s,i,a]);typeof n=="string"&&(n=Li(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:x="default"}=n,N=I.useMemo(()=>{let k=qn(d,c);return k==null?null:{location:{pathname:k,search:h,hash:m,state:p,key:x},navigationType:r}},[c,d,h,m,p,x,r]);return Ht(N!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:I.createElement(Dt.Provider,{value:u},I.createElement(Ca.Provider,{children:e,value:N}))}function $1({children:t,location:e}){return ST($h(t),e)}function $h(t,e=[]){let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,$h(r.props.children,i));return}_e(r.type===Qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=$h(r.props.children,i)),n.push(a)}),n}var Bl="get",Hl="application/x-www-form-urlencoded";function fu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function BT(t){return fu(t)&&t.tagName.toLowerCase()==="button"}function HT(t){return fu(t)&&t.tagName.toLowerCase()==="form"}function qT(t){return fu(t)&&t.tagName.toLowerCase()==="input"}function WT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GT(t,e){return t.button===0&&(!e||e==="_self")&&!WT(t)}var wl=null;function KT(){if(wl===null)try{new FormData(document.createElement("form"),0),wl=!1}catch{wl=!0}return wl}var QT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Md(t){return t!=null&&!QT.has(t)?(Ht(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hl}"`),null):t}function YT(t,e){let n,r,s,i,a;if(HT(t)){let c=t.getAttribute("action");r=c?qn(c,e):null,n=t.getAttribute("method")||Bl,s=Md(t.getAttribute("enctype"))||Hl,i=new FormData(t)}else if(BT(t)||qT(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?qn(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Bl,s=Md(t.getAttribute("formenctype"))||Md(c.getAttribute("enctype"))||Hl,i=new FormData(c,t),!KT()){let{name:d,type:h,value:m}=t;if(h==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,m)}}else{if(fu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bl,r=null,s=Hl,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function JT(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&qn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function XT(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eI(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await XT(i,n);return a.links?a.links():[]}return[]}));return sI(r.flat(1).filter(ZT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function D0(t,e,n,r,s,i){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function tI(t,e,{includeHydrateFallback:n}={}){return nI(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function nI(t){return[...new Set(t)]}function rI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function sI(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(rI(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function B1(){let t=I.useContext(Mi);return vm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function iI(){let t=I.useContext(hu);return vm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _m=I.createContext(void 0);_m.displayName="FrameworkContext";function H1(){let t=I.useContext(_m);return vm(t,"You must render this element inside a <HydratedRouter> element"),t}function oI(t,e){let n=I.useContext(_m),[r,s]=I.useState(!1),[i,a]=I.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=I.useRef(null);I.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let k=b=>{b.forEach(_=>{a(_.isIntersecting)})},A=new IntersectionObserver(k,{threshold:.5});return p.current&&A.observe(p.current),()=>{A.disconnect()}}},[t]),I.useEffect(()=>{if(r){let k=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(k)}}},[r]);let x=()=>{s(!0)},N=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:vo(c,x),onBlur:vo(u,N),onMouseEnter:vo(d,x),onMouseLeave:vo(h,N),onTouchStart:vo(m,x)}]:[!1,p,{}]}function vo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function aI({page:t,...e}){let{router:n}=B1(),r=I.useMemo(()=>S1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?I.createElement(cI,{page:t,matches:r,...e}):null}function lI(t){let{manifest:e,routeModules:n}=H1(),[r,s]=I.useState([]);return I.useEffect(()=>{let i=!1;return eI(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function cI({page:t,matches:e,...n}){let r=Xn(),{future:s,manifest:i,routeModules:a}=H1(),{basename:c}=B1(),{loaderData:u,matches:d}=iI(),h=I.useMemo(()=>D0(t,e,d,i,r,"data"),[t,e,d,i,r]),m=I.useMemo(()=>D0(t,e,d,i,r,"assets"),[t,e,d,i,r]),p=I.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let k=new Set,A=!1;if(e.forEach(_=>{var D;let w=i.routes[_.route.id];!w||!w.hasLoader||(!h.some(L=>L.route.id===_.route.id)&&_.route.id in u&&((D=a[_.route.id])!=null&&D.shouldRevalidate)||w.hasClientLoader?A=!0:k.add(_.route.id))}),k.size===0)return[];let b=JT(t,c,s.unstable_trailingSlashAwareDataRequests,"data");return A&&k.size>0&&b.searchParams.set("_routes",e.filter(_=>k.has(_.route.id)).map(_=>_.route.id).join(",")),[b.pathname+b.search]},[c,s.unstable_trailingSlashAwareDataRequests,u,r,i,h,e,t,a]),x=I.useMemo(()=>tI(m,i),[m,i]),N=lI(m);return I.createElement(I.Fragment,null,p.map(k=>I.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...n})),x.map(k=>I.createElement("link",{key:k,rel:"modulepreload",href:k,...n})),N.map(({key:k,link:A})=>I.createElement("link",{key:k,nonce:n.nonce,...A})))}function uI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dI&&(window.__reactRouterVersion="7.12.0")}catch{}function hI({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=I.useRef();s.current==null&&(s.current=q2({window:r,v5Compat:!0}));let i=s.current,[a,c]=I.useState({action:i.action,location:i.location}),u=I.useCallback(d=>{n===!1?c(d):I.startTransition(()=>c(d))},[n]);return I.useLayoutEffect(()=>i.listen(u),[i,u]),I.createElement($T,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:n})}var q1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W1=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,...x},N){let{basename:k,unstable_useTransitions:A}=I.useContext(Dt),b=typeof d=="string"&&q1.test(d),_=P1(d,k);d=_.to;let w=TT(d,{relative:s}),[D,L,V]=oI(r,x),E=pI(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:p,unstable_useTransitions:A});function v(S){e&&e(S),S.defaultPrevented||E(S)}let T=I.createElement("a",{...x,...V,href:_.absoluteURL||w,onClick:_.isExternal||i?e:v,ref:uI(N,L),target:u,"data-discover":!b&&n==="render"?"true":void 0});return D&&!b?I.createElement(I.Fragment,null,T,I.createElement(aI,{page:w})):T});W1.displayName="Link";var G1=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:c,children:u,...d},h){let m=ka(a,{relative:d.relative}),p=Xn(),x=I.useContext(hu),{navigator:N,basename:k}=I.useContext(Dt),A=x!=null&&_I(m)&&c===!0,b=N.encodeLocation?N.encodeLocation(m).pathname:m.pathname,_=p.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&k&&(w=qn(w,k)||w);const D=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let L=_===b||!s&&_.startsWith(b)&&_.charAt(D)==="/",V=w!=null&&(w===b||!s&&w.startsWith(b)&&w.charAt(b.length)==="/"),E={isActive:L,isPending:V,isTransitioning:A},v=L?e:void 0,T;typeof r=="function"?T=r(E):T=[r,L?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let S=typeof i=="function"?i(E):i;return I.createElement(W1,{...d,"aria-current":v,className:T,ref:h,style:S,to:a,viewTransition:c},typeof u=="function"?u(E):u)});G1.displayName="NavLink";var fI=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Bl,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,...x},N)=>{let{unstable_useTransitions:k}=I.useContext(Dt),A=xI(),b=vI(c,{relative:d}),_=a.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&q1.test(c),D=L=>{if(u&&u(L),L.defaultPrevented)return;L.preventDefault();let V=L.nativeEvent.submitter,E=(V==null?void 0:V.getAttribute("formmethod"))||a,v=()=>A(V||L.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p});k&&n!==!1?I.startTransition(()=>v()):v()};return I.createElement("form",{ref:N,method:_,action:b,onSubmit:r?u:D,...x,"data-discover":!w&&t==="render"?"true":void 0})});fI.displayName="Form";function mI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K1(t){let e=I.useContext(Mi);return _e(e,mI(t)),e}function pI(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let d=En(),h=Xn(),m=ka(t,{relative:i});return I.useCallback(p=>{if(GT(p,e)){p.preventDefault();let x=n!==void 0?n:da(h)===da(m),N=()=>d(t,{replace:x,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:c});u?I.startTransition(()=>N()):N()}},[h,d,m,n,r,e,t,s,i,a,c,u])}var gI=0,yI=()=>`__${String(++gI)}__`;function xI(){let{router:t}=K1("useSubmit"),{basename:e}=I.useContext(Dt),n=VT(),r=t.fetch,s=t.navigate;return I.useCallback(async(i,a={})=>{let{action:c,method:u,encType:d,formData:h,body:m}=YT(i,e);if(a.navigate===!1){let p=a.fetcherKey||yI();await r(p,n,a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await s(a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,s,e,n])}function vI(t,{relative:e}={}){let{basename:n}=I.useContext(Dt),r=I.useContext(an);_e(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...ka(t||".",{relative:e})},a=Xn();if(t==null){i.search=a.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let h=c.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Mn([n,i.pathname])),da(i)}function _I(t,{relative:e}={}){let n=I.useContext(L1);_e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K1("useViewTransitionState"),s=ka(t,{relative:e});if(!n.isTransitioning)return!1;let i=qn(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=qn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ic(s.pathname,a)!=null||Ic(s.pathname,i)!=null}const wI=()=>{};var L0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Y1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,m=(i&3)<<4|c>>4;let p=(c&15)<<2|d>>6,x=d&63;u||(x=64,a||(p=64)),r.push(n[h],n[m],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new EI;const p=i<<2|c>>4;if(r.push(p),d!==64){const x=c<<4&240|d>>2;if(r.push(x),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(t){const e=Q1(t);return Y1.encodeByteArray(e,!0)},jc=function(t){return NI(t).replace(/\./g,"")},J1=function(t){try{return Y1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=()=>TI().__FIREBASE_DEFAULTS__,jI=()=>{if(typeof process>"u"||typeof L0>"u")return;const t=L0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J1(t[1]);return e&&JSON.parse(e)},mu=()=>{try{return wI()||II()||jI()||SI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X1=t=>{var e,n;return(n=(e=mu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},CI=t=>{const e=X1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Z1=()=>{var t;return(t=mu())==null?void 0:t.config},e_=t=>{var e;return(e=mu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function t_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jc(JSON.stringify(n)),jc(JSON.stringify(a)),""].join(".")}const zo={};function AI(){const t={prod:[],emulator:[]};for(const e of Object.keys(zo))zo[e]?t.emulator.push(e):t.prod.push(e);return t}function PI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let M0=!1;function n_(t,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||zo[t]===e||zo[t]||M0)return;zo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=AI().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function c(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,x){p.setAttribute("width","24"),p.setAttribute("id",x),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{M0=!0,a()},p}function h(p,x){p.setAttribute("id",x),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=PI(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),k=n("learnmore"),A=document.getElementById(k)||document.createElement("a"),b=n("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;c(w),h(A,k);const D=d();u(_,b),w.append(_,N,A,D),document.body.appendChild(w)}i?(N.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function LI(){var e;const t=(e=mu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FI(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UI(){return!LI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zI(){try{return typeof indexedDB=="object"}catch{return!1}}function $I(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BI,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ra.prototype.create)}}class Ra{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?HI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Zn(s,c,r)}}function HI(t,e){return t.replace(qI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const qI=/\{\$([^}]+)}/g;function WI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ts(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(V0(i)&&V0(a)){if(!Ts(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function V0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Io(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GI(t,e){const n=new KI(t,e);return n.subscribe.bind(n)}class KI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vd),s.error===void 0&&(s.error=Vd),s.complete===void 0&&(s.complete=Vd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XI(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JI(t){return t===us?void 0:t}function XI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const ej={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},tj=re.INFO,nj={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},rj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=tj,this._logHandler=rj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ej[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const sj=(t,e)=>e.some(n=>t instanceof n);let O0,F0;function ij(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oj(){return F0||(F0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r_=new WeakMap,Bh=new WeakMap,s_=new WeakMap,Od=new WeakMap,bm=new WeakMap;function aj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Rr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&r_.set(n,t)}).catch(()=>{}),bm.set(e,t),e}function lj(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Bh.set(t,e)}let Hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||s_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cj(t){Hh=t(Hh)}function uj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fd(this),e,...n);return s_.set(r,e.sort?e.sort():[e]),Rr(r)}:oj().includes(t)?function(...e){return t.apply(Fd(this),e),Rr(r_.get(this))}:function(...e){return Rr(t.apply(Fd(this),e))}}function dj(t){return typeof t=="function"?uj(t):(t instanceof IDBTransaction&&lj(t),sj(t,ij())?new Proxy(t,Hh):t)}function Rr(t){if(t instanceof IDBRequest)return aj(t);if(Od.has(t))return Od.get(t);const e=dj(t);return e!==t&&(Od.set(t,e),bm.set(e,t)),e}const Fd=t=>bm.get(t);function hj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Rr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Rr(a.result),u.oldVersion,u.newVersion,Rr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const fj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],Ud=new Map;function U0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=mj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fj.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Ud.set(e,i),i}cj(t=>({...t,get:(e,n,r)=>U0(e,n)||t.get(e,n,r),has:(e,n)=>!!U0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",z0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new wm("@firebase/app"),yj="@firebase/app-compat",xj="@firebase/analytics-compat",vj="@firebase/analytics",_j="@firebase/app-check-compat",wj="@firebase/app-check",bj="@firebase/auth",Ej="@firebase/auth-compat",Nj="@firebase/database",Tj="@firebase/data-connect",Ij="@firebase/database-compat",jj="@firebase/functions",Sj="@firebase/functions-compat",Cj="@firebase/installations",kj="@firebase/installations-compat",Rj="@firebase/messaging",Aj="@firebase/messaging-compat",Pj="@firebase/performance",Dj="@firebase/performance-compat",Lj="@firebase/remote-config",Mj="@firebase/remote-config-compat",Vj="@firebase/storage",Oj="@firebase/storage-compat",Fj="@firebase/firestore",Uj="@firebase/ai",zj="@firebase/firestore-compat",$j="firebase",Bj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="[DEFAULT]",Hj={[qh]:"fire-core",[yj]:"fire-core-compat",[vj]:"fire-analytics",[xj]:"fire-analytics-compat",[wj]:"fire-app-check",[_j]:"fire-app-check-compat",[bj]:"fire-auth",[Ej]:"fire-auth-compat",[Nj]:"fire-rtdb",[Tj]:"fire-data-connect",[Ij]:"fire-rtdb-compat",[jj]:"fire-fn",[Sj]:"fire-fn-compat",[Cj]:"fire-iid",[kj]:"fire-iid-compat",[Rj]:"fire-fcm",[Aj]:"fire-fcm-compat",[Pj]:"fire-perf",[Dj]:"fire-perf-compat",[Lj]:"fire-rc",[Mj]:"fire-rc-compat",[Vj]:"fire-gcs",[Oj]:"fire-gcs-compat",[Fj]:"fire-fst",[zj]:"fire-fst-compat",[Uj]:"fire-vertex","fire-js":"fire-js",[$j]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,qj=new Map,Gh=new Map;function $0(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ei(t){const e=t.name;if(Gh.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Gh.set(e,t);for(const n of Sc.values())$0(n,t);for(const n of qj.values())$0(n,t);return!0}function Em(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ot(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Ra("app","Firebase",Wj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=Bj;function i_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=Z1()),!n)throw Ar.create("no-options");const i=Sc.get(s);if(i){if(Ts(n,i.options)&&Ts(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const a=new ZI(s);for(const u of Gh.values())a.addComponent(u);const c=new Gj(n,r,a);return Sc.set(s,c),c}function o_(t=Wh){const e=Sc.get(t);if(!e&&t===Wh&&Z1())return i_();if(!e)throw Ar.create("no-app",{appName:t});return e}function Pr(t,e,n){let r=Hj[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Ei(new Is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="firebase-heartbeat-database",Qj=1,ha="firebase-heartbeat-store";let zd=null;function a_(){return zd||(zd=hj(Kj,Qj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),zd}async function Yj(t){try{const n=(await a_()).transaction(ha),r=await n.objectStore(ha).get(l_(t));return await n.done,r}catch(e){if(e instanceof Zn)Wn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wn.warn(n.message)}}}async function B0(t,e){try{const r=(await a_()).transaction(ha,"readwrite");await r.objectStore(ha).put(e,l_(t)),await r.done}catch(n){if(n instanceof Zn)Wn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(r.message)}}}function l_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=1024,Xj=30;class Zj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=H0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Xj){const a=nS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=H0(),{heartbeatsToSend:r,unsentEntries:s}=eS(this._heartbeatsCache.heartbeats),i=jc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wn.warn(n),""}}}function H0(){return new Date().toISOString().substring(0,10)}function eS(t,e=Jj){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),q0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),q0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zI()?$I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Yj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function q0(t){return jc(JSON.stringify({version:2,heartbeats:t})).length}function nS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){Ei(new Is("platform-logger",e=>new pj(e),"PRIVATE")),Ei(new Is("heartbeat",e=>new Zj(e),"PRIVATE")),Pr(qh,z0,t),Pr(qh,z0,"esm2020"),Pr("fire-js","")}rS("");function c_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sS=c_,u_=new Ra("auth","Firebase",c_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new wm("@firebase/auth");function iS(t,...e){Cc.logLevel<=re.WARN&&Cc.warn(`Auth (${Fi}): ${t}`,...e)}function ql(t,...e){Cc.logLevel<=re.ERROR&&Cc.error(`Auth (${Fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw Nm(t,...e)}function yn(t,...e){return Nm(t,...e)}function d_(t,e,n){const r={...sS(),[e]:n};return new Ra("auth","Firebase",r).create(e,{appName:t.name})}function Vn(t){return d_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u_.create(t,...e)}function K(t,e,...n){if(!t)throw Nm(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ql(e),new Error(e)}function Gn(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oS(){return W0()==="http:"||W0()==="https:"}function W0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oS()||VI()||"connection"in navigator)?navigator.onLine:!0}function lS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=DI()||OI()}get(){return aS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dS=new Pa(3e4,6e4);function Yr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jr(t,e,n,r,s={}){return f_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Aa({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return MI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(d.credentials="include"),h_.fetch()(await m_(t,t.config.apiHost,n,c),d)})}async function f_(t,e,n){t._canInitEmulator=!1;const r={...cS,...e};try{const s=new fS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw bl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw bl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw bl(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw d_(t,h,d);sn(t,h)}}catch(s){if(s instanceof Zn)throw s;sn(t,"network-request-failed",{message:String(s)})}}async function Da(t,e,n,r,s={}){const i=await Jr(t,e,n,r,s);return"mfaPendingCredential"in i&&sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function m_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Tm(t.config,s):`${t.config.apiScheme}://${s}`;return uS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function hS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),dS.get())})}}function bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function G0(t){return t!==void 0&&t.enterprise!==void 0}class mS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pS(t,e){return Jr(t,"GET","/v2/recaptchaConfig",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e){return Jr(t,"POST","/v1/accounts:delete",e)}async function kc(t,e){return Jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yS(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=Im(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$o($d(s.auth_time)),issuedAtTime:$o($d(s.iat)),expirationTime:$o($d(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ql("JWT malformed, contained fewer than 3 sections"),null;try{const s=J1(n);return s?JSON.parse(s):(ql("Failed to decode base64 JWT payload"),null)}catch(s){return ql("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function K0(t){const e=Im(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&xS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await fa(t,kc(e,{idToken:n}));K(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?p_(s.providerUserInfo):[],a=wS(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function _S(t){const e=$e(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function p_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(t,e){const n=await f_(t,{},async()=>{const r=Aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await m_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(u.credentials="include"),h_.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ES(t,e){return Jr(t,"POST","/v2/accounts:revokeToken",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=K0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new di;return r&&(K(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new vS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await fa(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yS(this,e)}reload(){return _S(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ot(this.auth.app))return Promise.reject(Vn(this.auth));const e=await this.getIdToken();return await fa(this,gS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:x,providerData:N,stsTokenManager:k}=n;K(m&&k,e,"internal-error");const A=di.fromJSON(this.name,k);K(typeof m=="string",e,"internal-error"),cr(r,e.name),cr(s,e.name),K(typeof p=="boolean",e,"internal-error"),K(typeof x=="boolean",e,"internal-error"),cr(i,e.name),cr(a,e.name),cr(c,e.name),cr(u,e.name),cr(d,e.name),cr(h,e.name);const b=new Jt({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:A,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(b.providerData=N.map(_=>({..._}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new di;s.updateFromServerResponse(n);const i=new Jt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?p_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new di;c.updateFromIdToken(r);const u=new Jt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;function Dn(t){Gn(t instanceof Function,"Expected a class definition");let e=Q0.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Q0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}g_.type="NONE";const Y0=g_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t,e,n){return`firebase:${t}:${e}:${n}`}class hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Wl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kc(this.auth,{idToken:e}).catch(()=>{});return n?Jt._fromGetAccountInfoResponse(this.auth,n,e):null}return Jt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hi(Dn(Y0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Dn(Y0);const a=Wl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(a);if(h){let m;if(typeof h=="string"){const p=await kc(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Jt._fromGetAccountInfoResponse(e,p,h)}else m=Jt._fromJSON(e,h);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new hi(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new hi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(__(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b_(e))return"Blackberry";if(E_(e))return"Webos";if(x_(e))return"Safari";if((e.includes("chrome/")||v_(e))&&!e.includes("edge/"))return"Chrome";if(w_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function y_(t=dt()){return/firefox\//i.test(t)}function x_(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function v_(t=dt()){return/crios\//i.test(t)}function __(t=dt()){return/iemobile/i.test(t)}function w_(t=dt()){return/android/i.test(t)}function b_(t=dt()){return/blackberry/i.test(t)}function E_(t=dt()){return/webos/i.test(t)}function jm(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NS(t=dt()){var e;return jm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function TS(){return FI()&&document.documentMode===10}function N_(t=dt()){return jm(t)||w_(t)||E_(t)||b_(t)||/windows phone/i.test(t)||__(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e=[]){let n;switch(t){case"Browser":n=J0(dt());break;case"Worker":n=`${J0(dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e={}){return Jr(t,"GET","/v2/passwordPolicy",Yr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=6;class CS{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X0(this),this.idTokenSubscription=new X0(this),this.beforeStateQueue=new IS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await hi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kc(this,{idToken:e}),r=await Jt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ot(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ot(this.app))return Promise.reject(Vn(this));const n=e?$e(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ot(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ot(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jS(this),n=new CS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ra("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ES(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ot(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&iS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ds(t){return $e(t)}class X0{constructor(e){this.auth=e,this.observer=null,this.addObserver=GI(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RS(t){pu=t}function I_(t){return pu.loadJS(t)}function AS(){return pu.recaptchaEnterpriseScript}function PS(){return pu.gapiScript}function DS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class LS{constructor(){this.enterprise=new MS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VS="recaptcha-enterprise",j_="NO_RECAPTCHA";class OS{constructor(e){this.type=VS,this.auth=Ds(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{pS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new mS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;G0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(j_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LS().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&G0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=AS();u.length!==0&&(u+=c),I_(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Z0(t,e,n,r=!1,s=!1){const i=new OS(t);let a;if(s)a=j_;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Yh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Z0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Z0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t,e){const n=Em(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ts(i,e??{}))return s;sn(s,"already-initialized")}return n.initialize({options:e})}function US(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zS(t,e,n){const r=Ds(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=S_(e),{host:a,port:c}=$S(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Ts(d,r.config.emulator)&&Ts(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Oi(a)?(t_(`${i}//${a}${u}`),n_("Auth",!0)):BS()}function S_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $S(t){const e=S_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ey(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:ey(a)}}}function ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}async function HS(t,e){return Jr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e){return Da(t,"POST","/v1/accounts:signInWithPassword",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}async function GS(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Sm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ma(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ma(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",qS);case"emailLink":return WS(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,r,"signUpPassword",HS);case"emailLink":return GS(e,{idToken:n,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e){return Da(t,"POST","/v1/accounts:signInWithIdp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="http://localhost";class js extends Sm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new js(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fi(e,n)}buildRequest(){const e={requestUri:KS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Aa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YS(t){const e=Io(jo(t)).link,n=e?Io(jo(e)).deep_link_id:null,r=Io(jo(t)).deep_link_id;return(r?Io(jo(r)).link:null)||r||n||e||t}class Cm{constructor(e){const n=Io(jo(e)),r=n.apiKey??null,s=n.oobCode??null,i=QS(n.mode??null);K(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=YS(e);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,n){return ma._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cm.parseLink(n);return K(r,"argument-error"),ma._fromEmailAndCode(e,r.code,r.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends C_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends La{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return js._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends La{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends La{constructor(){super("twitter.com")}static credential(e,n){return js._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e){return Da(t,"POST","/v1/accounts:signUp",Yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jt._fromIdTokenResponse(e,r,s),a=ty(r);return new Ss({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ty(r);return new Ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ty(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Zn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ac(e,n,r,s)}}function k_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ac._fromErrorAndOperation(t,i,e,r):i})}async function XS(t,e,n=!1){const r=await fa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e,n=!1){const{auth:r}=t;if(Ot(r.app))return Promise.reject(Vn(r));const s="reauthenticate";try{const i=await fa(t,k_(r,s,e,t),n);K(i.idToken,r,"internal-error");const a=Im(i.idToken);K(a,r,"internal-error");const{sub:c}=a;return K(t.uid===c,r,"user-mismatch"),Ss._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(t,e,n=!1){if(Ot(t.app))return Promise.reject(Vn(t));const r="signIn",s=await k_(t,r,e),i=await Ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function eC(t,e){return R_(Ds(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(t){const e=Ds(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tC(t,e,n){if(Ot(t.app))return Promise.reject(Vn(t));const r=Ds(t),a=await Yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&A_(t),u}),c=await Ss._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function nC(t,e,n){return Ot(t.app)?Promise.reject(Vn(t)):eC($e(t),Ui.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&A_(t),r})}function rC(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function sC(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function iC(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function ny(t){return $e(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=1e3,aC=10;class D_ extends P_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);TS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D_.type="LOCAL";const lC=D_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends P_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L_.type="SESSION";const M_=L_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await cC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=km("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function dC(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function mC(){return V_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="firebaseLocalStorageDb",pC=1,Dc="firebaseLocalStorage",F_="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yu(t,e){return t.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function gC(){const t=indexedDB.deleteDatabase(O_);return new Ma(t).toPromise()}function Jh(){const t=indexedDB.open(O_,pC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dc,{keyPath:F_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dc)?e(r):(r.close(),await gC(),e(await Jh()))})})}async function ry(t,e,n){const r=yu(t,!0).put({[F_]:e,value:n});return new Ma(r).toPromise()}async function yC(t,e){const n=yu(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function sy(t,e){const n=yu(t,!0).delete(e);return new Ma(n).toPromise()}const xC=800,vC=3;class U_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return V_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gu._getInstance(mC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new uC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jh();return await ry(e,Pc,"1"),await sy(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yu(s,!1).getAll();return new Ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U_.type="LOCAL";const _C=U_;new Pa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e){return e?Dn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm extends Sm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bC(t){return R_(t.auth,new Rm(t),t.bypassAuthState)}function EC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),ZS(n,new Rm(t),t.bypassAuthState)}async function NC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),XS(n,new Rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bC;case"linkViaPopup":case"linkViaRedirect":return NC;case"reauthViaPopup":case"reauthViaRedirect":return EC;default:sn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Pa(2e3,1e4);class si extends z_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TC.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="pendingRedirect",Gl=new Map;class jC extends z_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gl.get(this.auth._key());if(!e){try{const r=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gl.set(this.auth._key(),e)}return this.bypassAuthState||Gl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const n=RC(e),r=kC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function CC(t,e){Gl.set(t._key(),e)}function kC(t){return Dn(t._redirectPersistence)}function RC(t){return Wl(IC,t.config.apiKey,t.name)}async function AC(t,e,n=!1){if(Ot(t.app))return Promise.reject(Vn(t));const r=Ds(t),s=wC(r,e),a=await new jC(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=10*60*1e3;class DC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PC&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e={}){return Jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function FC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MC(t);for(const n of e)try{if(UC(n))return}catch{}sn(t,"unauthorized-domain")}function UC(t){const e=Kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!OC.test(n))return!1;if(VC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new Pa(3e4,6e4);function oy(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $C(t){return new Promise((e,n)=>{var s,i,a;function r(){oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(yn(t,"network-request-failed"))},timeout:zC.get()})}if((i=(s=xn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=xn().gapi)!=null&&a.load)r();else{const c=DS("iframefcb");return xn()[c]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},I_(`${PS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Kl=null,e})}let Kl=null;function BC(t){return Kl=Kl||$C(t),Kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new Pa(5e3,15e3),qC="__/auth/iframe",WC="emulator/auth/iframe",GC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tm(e,WC):`https://${t.config.authDomain}/${qC}`,r={apiKey:e.apiKey,appName:t.name,v:Fi},s=KC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Aa(r).slice(1)}`}async function YC(t){const e=await BC(t),n=xn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:QC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=yn(t,"network-request-failed"),c=xn().setTimeout(()=>{i(a)},HC.get());function u(){xn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,ZC=600,ek="_blank",tk="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nk(t,e,n,r=XC,s=ZC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...JC,width:r.toString(),height:s.toString(),top:i,left:a},d=dt().toLowerCase();n&&(c=v_(d)?ek:n),y_(d)&&(e=e||tk,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[x,N])=>`${p}${x}=${N},`,"");if(NS(d)&&c!=="_self")return rk(e||"",c),new ay(null);const m=window.open(e||"",c,h);K(m,t,"popup-blocked");try{m.focus()}catch{}return new ay(m)}function rk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="__/auth/handler",ik="emulator/auth/handler",ok=encodeURIComponent("fac");async function ly(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fi,eventId:s};if(e instanceof C_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",WI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof La){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${ok}=${encodeURIComponent(u)}`:"";return`${ak(t)}?${Aa(c).slice(1)}${d}`}function ak({config:t}){return t.emulator?Tm(t,ik):`https://${t.authDomain}/${sk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class lk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M_,this._completeRedirectFn=AC,this._overrideRedirectResult=CC}async _openPopup(e,n,r,s){var a;Gn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await ly(e,n,r,Kh(),s);return nk(e,i,km())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ly(e,n,r,Kh(),s);return dC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YC(e),r=new DC(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bd,{type:Bd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Bd];i!==void 0&&n(!!i),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return N_()||x_()||jm()}}const ck=lk;var cy="@firebase/auth",uy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hk(t){Ei(new Is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;K(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T_(t)},d=new kS(r,s,i,u);return US(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ei(new Is("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(r=>new uk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(cy,uy,dk(t)),Pr(cy,uy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=5*60,mk=e_("authIdTokenMaxAge")||fk;let dy=null;const pk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mk)return;const s=n==null?void 0:n.token;dy!==s&&(dy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gk(t=o_()){const e=Em(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FS(t,{popupRedirectResolver:ck,persistence:[_C,lC,M_]}),r=e_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=pk(i.toString());sC(n,a,()=>a(n.currentUser)),rC(n,c=>a(c))}}const s=X1("auth");return s&&zS(n,`http://${s}`),n}function yk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hk("Browser");var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,B_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function T(){}T.prototype=v.prototype,E.F=v.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(S,R,C){for(var j=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)j[Ge-2]=arguments[Ge];return v.prototype[R].apply(S,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,T){T||(T=0);const S=Array(16);if(typeof v=="string")for(var R=0;R<16;++R)S[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;R<16;++R)S[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=E.g[0],T=E.g[1],R=E.g[2];let C=E.g[3],j;j=v+(C^T&(R^C))+S[0]+3614090360&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[1]+3905402710&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[2]+606105819&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[3]+3250441966&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[4]+4118548399&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[5]+1200080426&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[6]+2821735955&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[7]+4249261313&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[8]+1770035416&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[9]+2336552879&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[10]+4294925233&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[11]+2304563134&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[12]+1804603682&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[13]+4254626195&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[14]+2792965006&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[15]+1236535329&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(R^C&(T^R))+S[1]+4129170786&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[6]+3225465664&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[11]+643717713&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[0]+3921069994&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[5]+3593408605&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[10]+38016083&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[15]+3634488961&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[4]+3889429448&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[9]+568446438&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[14]+3275163606&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[3]+4107603335&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[8]+1163531501&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[13]+2850285829&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[2]+4243563512&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[7]+1735328473&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[12]+2368359562&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(T^R^C)+S[5]+4294588738&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[8]+2272392833&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[11]+1839030562&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[14]+4259657740&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[1]+2763975236&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[4]+1272893353&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[7]+4139469664&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[10]+3200236656&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[13]+681279174&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[0]+3936430074&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[3]+3572445317&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[6]+76029189&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[9]+3654602809&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[12]+3873151461&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[15]+530742520&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[2]+3299628645&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(R^(T|~C))+S[0]+4096336452&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[7]+1126891415&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[14]+2878612391&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[5]+4237533241&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[12]+1700485571&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[3]+2399980690&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[10]+4293915773&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[1]+2240044497&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[8]+1873313359&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[15]+4264355552&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[6]+2734768916&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[13]+1309151649&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[4]+4149444226&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[11]+3174756917&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[2]+718787259&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+C&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const T=v-this.blockSize,S=this.C;let R=this.h,C=0;for(;C<v;){if(R==0)for(;C<=T;)s(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<v;)if(S[R++]=E.charCodeAt(C++),R==this.blockSize){s(this,S),R=0;break}}else for(;C<v;)if(S[R++]=E[C++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,T=0;T<4;++T)for(let S=0;S<32;S+=8)E[v++]=this.g[T]>>>S&255;return E};function i(E,v){var T=c;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=v(E)}function a(E,v){this.h=v;const T=[];let S=!0;for(let R=E.length-1;R>=0;R--){const C=E[R]|0;S&&C==v||(T[R]=C,S=!1)}this.g=T}var c={};function u(E){return-128<=E&&E<128?i(E,function(v){return new a([v|0],v<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return A(d(-E));const v=[];let T=1;for(let S=0;E>=T;S++)v[S]=E/T|0,T*=4294967296;return new a(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return A(h(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(v,8));let S=m;for(let C=0;C<E.length;C+=8){var R=Math.min(8,E.length-C);const j=parseInt(E.substring(C,C+R),v);R<8?(R=d(Math.pow(v,R)),S=S.j(R).add(d(j))):(S=S.j(T),S=S.add(d(j)))}return S}var m=u(0),p=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-A(this).m();let E=0,v=1;for(let T=0;T<this.g.length;T++){const S=this.i(T);E+=(S>=0?S:4294967296+S)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(k(this))return"-"+A(this).toString(E);const v=d(Math.pow(E,6));var T=this;let S="";for(;;){const R=D(T,v).g;T=b(T,R.j(v));let C=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=R,N(T))return C+S;for(;C.length<6;)C="0"+C;S=C+S}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function k(E){return E.h==-1}t.l=function(E){return E=b(this,E),k(E)?-1:N(E)?0:1};function A(E){const v=E.g.length,T=[];for(let S=0;S<v;S++)T[S]=~E.g[S];return new a(T,~E.h).add(p)}t.abs=function(){return k(this)?A(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),T=[];let S=0;for(let R=0;R<=v;R++){let C=S+(this.i(R)&65535)+(E.i(R)&65535),j=(C>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);S=j>>>16,C&=65535,j&=65535,T[R]=j<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(E,v){return E.add(A(v))}t.j=function(E){if(N(this)||N(E))return m;if(k(this))return k(E)?A(this).j(A(E)):A(A(this).j(E));if(k(E))return A(this.j(A(E)));if(this.l(x)<0&&E.l(x)<0)return d(this.m()*E.m());const v=this.g.length+E.g.length,T=[];for(var S=0;S<2*v;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<E.g.length;R++){const C=this.i(S)>>>16,j=this.i(S)&65535,Ge=E.i(R)>>>16,Tn=E.i(R)&65535;T[2*S+2*R]+=j*Tn,_(T,2*S+2*R),T[2*S+2*R+1]+=C*Tn,_(T,2*S+2*R+1),T[2*S+2*R+1]+=j*Ge,_(T,2*S+2*R+1),T[2*S+2*R+2]+=C*Ge,_(T,2*S+2*R+2)}for(E=0;E<v;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=v;E<2*v;E++)T[E]=0;return new a(T,0)};function _(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function w(E,v){this.g=E,this.h=v}function D(E,v){if(N(v))throw Error("division by zero");if(N(E))return new w(m,m);if(k(E))return v=D(A(E),v),new w(A(v.g),A(v.h));if(k(v))return v=D(E,A(v)),new w(A(v.g),v.h);if(E.g.length>30){if(k(E)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var T=p,S=v;S.l(E)<=0;)T=L(T),S=L(S);var R=V(T,1),C=V(S,1);for(S=V(S,2),T=V(T,2);!N(S);){var j=C.add(S);j.l(E)<=0&&(R=R.add(T),C=j),S=V(S,1),T=V(T,1)}return v=b(E,R.j(v)),new w(R,v)}for(R=m;E.l(v)>=0;){for(T=Math.max(1,Math.floor(E.m()/v.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),C=d(T),j=C.j(v);k(j)||j.l(E)>0;)T-=S,C=d(T),j=C.j(v);N(C)&&(C=p),R=R.add(C),E=b(E,j)}return new w(R,E)}t.B=function(E){return D(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function L(E){const v=E.g.length+1,T=[];for(let S=0;S<v;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function V(E,v){const T=v>>5;v%=32;const S=E.g.length-T,R=[];for(let C=0;C<S;C++)R[C]=v>0?E.i(C+T)>>>v|E.i(C+T+1)<<32-v:E.i(C+T);return new a(R,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,B_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Dr=a}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H_,So,q_,Ql,Xh,W_,G_,K_;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof El=="object"&&El];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var g=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in g))break e;g=g[P]}l=l[l.length-1],y=g[l],f=f(y),f!=y&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(f){var g=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&g.push([y,f[y]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){return d=u,d.apply(null,arguments)}function h(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function m(l,f){function g(){}g.prototype=f.prototype,l.Z=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(y,P,M){for(var z=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)z[ee-2]=arguments[ee];return f.prototype[P].apply(y,z)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function x(l){const f=l.length;if(f>0){const g=Array(f);for(let y=0;y<f;y++)g[y]=l[y];return g}return[]}function N(l,f){for(let y=1;y<arguments.length;y++){const P=arguments[y];var g=typeof P;if(g=g!="object"?g:P?Array.isArray(P)?"array":g:"null",g=="array"||g=="object"&&typeof P.length=="number"){g=l.length||0;const M=P.length||0;l.length=g+M;for(let z=0;z<M;z++)l[g+z]=P[z]}else l.push(P)}}class k{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(l){a.setTimeout(()=>{throw l},0)}function b(){var l=E;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class _{constructor(){this.h=this.g=null}add(f,g){const y=w.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var w=new k(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,E=new _,v=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(T)}};function T(){for(var l;l=b();){try{l.h.call(l.g)}catch(g){A(g)}var f=w;f.j(l),f.h<100&&(f.h++,l.next=f.g,f.g=l)}V=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function j(l){return/^[\s\xa0]*$/.test(l)}function Ge(l,f){R.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,f)}m(Ge,R),Ge.prototype.init=function(l,f){const g=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget,f||(g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Tn="closure_listenable_"+(Math.random()*1e6|0),Wi=0;function Gi(l,f,g,y,P){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=P,this.key=++Wi,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Y(l,f,g){for(const y in l)f.call(g,l[y],y,l)}function Z(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function xe(l){const f={};for(const g in l)f[g]=l[g];return f}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ts(l,f){let g,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(g in y)l[g]=y[g];for(let M=0;M<Se.length;M++)g=Se[M],Object.prototype.hasOwnProperty.call(y,g)&&(l[g]=y[g])}}function Lt(l){this.src=l,this.g={},this.h=0}Lt.prototype.add=function(l,f,g,y,P){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const z=Wt(l,f,y,P);return z>-1?(f=l[z],g||(f.fa=!1)):(f=new Gi(f,this.src,M,!!y,P),f.fa=g,l.push(f)),f};function ns(l,f){const g=f.type;if(g in l.g){var y=l.g[g],P=Array.prototype.indexOf.call(y,f,void 0),M;(M=P>=0)&&Array.prototype.splice.call(y,P,1),M&&(B(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Wt(l,f,g,y){for(let P=0;P<l.length;++P){const M=l[P];if(!M.da&&M.listener==f&&M.capture==!!g&&M.ha==y)return P}return-1}var tr="closure_lm_"+(Math.random()*1e6|0),zu={};function bp(l,f,g,y,P){if(Array.isArray(f)){for(let M=0;M<f.length;M++)bp(l,f[M],g,y,P);return null}return g=Tp(g),l&&l[Tn]?l.J(f,g,c(y)?!!y.capture:!!y,P):$b(l,f,g,!1,y,P)}function $b(l,f,g,y,P,M){if(!f)throw Error("Invalid event type");const z=c(P)?!!P.capture:!!P;let ee=Bu(l);if(ee||(l[tr]=ee=new Lt(l)),g=ee.add(f,g,y,z,M),g.proxy)return g;if(y=Bb(),g.proxy=y,y.src=l,y.listener=g,l.addEventListener)C||(P=z),P===void 0&&(P=!1),l.addEventListener(f.toString(),y,P);else if(l.attachEvent)l.attachEvent(Np(f.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Bb(){function l(g){return f.call(l.src,l.listener,g)}const f=Hb;return l}function Ep(l,f,g,y,P){if(Array.isArray(f))for(var M=0;M<f.length;M++)Ep(l,f[M],g,y,P);else y=c(y)?!!y.capture:!!y,g=Tp(g),l&&l[Tn]?(l=l.i,M=String(f).toString(),M in l.g&&(f=l.g[M],g=Wt(f,g,y,P),g>-1&&(B(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete l.g[M],l.h--)))):l&&(l=Bu(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Wt(f,g,y,P)),(g=l>-1?f[l]:null)&&$u(g))}function $u(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Tn])ns(f.i,l);else{var g=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(g,y,l.capture):f.detachEvent?f.detachEvent(Np(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=Bu(f))?(ns(g,l),g.h==0&&(g.src=null,f[tr]=null)):B(l)}}}function Np(l){return l in zu?zu[l]:zu[l]="on"+l}function Hb(l,f){if(l.da)l=!0;else{f=new Ge(f,this);const g=l.listener,y=l.ha||l.src;l.fa&&$u(l),l=g.call(y,f)}return l}function Bu(l){return l=l[tr],l instanceof Lt?l:null}var Hu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tp(l){return typeof l=="function"?l:(l[Hu]||(l[Hu]=function(f){return l.handleEvent(f)}),l[Hu])}function rt(){S.call(this),this.i=new Lt(this),this.M=this,this.G=null}m(rt,S),rt.prototype[Tn]=!0,rt.prototype.removeEventListener=function(l,f,g,y){Ep(this,l,f,g,y)};function ht(l,f){var g,y=l.G;if(y)for(g=[];y;y=y.G)g.push(y);if(l=l.M,y=f.type||f,typeof f=="string")f=new R(f,l);else if(f instanceof R)f.target=f.target||l;else{var P=f;f=new R(y,l),ts(f,P)}P=!0;let M,z;if(g)for(z=g.length-1;z>=0;z--)M=f.g=g[z],P=Wa(M,y,!0,f)&&P;if(M=f.g=l,P=Wa(M,y,!0,f)&&P,P=Wa(M,y,!1,f)&&P,g)for(z=0;z<g.length;z++)M=f.g=g[z],P=Wa(M,y,!1,f)&&P}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var l=this.i;for(const f in l.g){const g=l.g[f];for(let y=0;y<g.length;y++)B(g[y]);delete l.g[f],l.h--}}this.G=null},rt.prototype.J=function(l,f,g,y){return this.i.add(String(l),f,!1,g,y)},rt.prototype.K=function(l,f,g,y){return this.i.add(String(l),f,!0,g,y)};function Wa(l,f,g,y){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();let P=!0;for(let M=0;M<f.length;++M){const z=f[M];if(z&&!z.da&&z.capture==g){const ee=z.listener,Le=z.ha||z.src;z.fa&&ns(l.i,z),P=ee.call(Le,y)!==!1&&P}}return P&&!y.defaultPrevented}function qb(l,f){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:a.setTimeout(l,f||0)}function Ip(l){l.g=qb(()=>{l.g=null,l.i&&(l.i=!1,Ip(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Wb extends S{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ip(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(l){S.call(this),this.h=l,this.g={}}m(Ki,S);var jp=[];function Sp(l){Y(l.g,function(f,g){this.g.hasOwnProperty(g)&&$u(f)},l),l.g={}}Ki.prototype.N=function(){Ki.Z.N.call(this),Sp(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qu=a.JSON.stringify,Gb=a.JSON.parse,Kb=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Cp(){}function kp(){}var Qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wu(){R.call(this,"d")}m(Wu,R);function Gu(){R.call(this,"c")}m(Gu,R);var rs={},Rp=null;function Ga(){return Rp=Rp||new rt}rs.Ia="serverreachability";function Ap(l){R.call(this,rs.Ia,l)}m(Ap,R);function Yi(l){const f=Ga();ht(f,new Ap(f))}rs.STAT_EVENT="statevent";function Pp(l,f){R.call(this,rs.STAT_EVENT,l),this.stat=f}m(Pp,R);function ft(l){const f=Ga();ht(f,new Pp(f,l))}rs.Ja="timingevent";function Dp(l,f){R.call(this,rs.Ja,l),this.size=f}m(Dp,R);function Ji(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Xi(){this.g=!0}Xi.prototype.ua=function(){this.g=!1};function Qb(l,f,g,y,P,M){l.info(function(){if(l.g)if(M){var z="",ee=M.split("&");for(let de=0;de<ee.length;de++){var Le=ee[de].split("=");if(Le.length>1){const Be=Le[0];Le=Le[1];const cn=Be.split("_");z=cn.length>=2&&cn[1]=="type"?z+(Be+"="+Le+"&"):z+(Be+"=redacted&")}}}else z=null;else z=M;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+f+`
`+g+`
`+z})}function Yb(l,f,g,y,P,M,z){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+f+`
`+g+`
`+M+" "+z})}function Vs(l,f,g,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Xb(l,g)+(y?" "+y:"")})}function Jb(l,f){l.info(function(){return"TIMEOUT: "+f})}Xi.prototype.info=function(){};function Xb(l,f){if(!l.g)return f;if(!f)return null;try{const M=JSON.parse(f);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var g=M[l];if(!(g.length<2)){var y=g[1];if(Array.isArray(y)&&!(y.length<1)){var P=y[0];if(P!="noop"&&P!="stop"&&P!="close")for(let z=1;z<y.length;z++)y[z]=""}}}}return qu(M)}catch{return f}}var Ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mp;function Ku(){}m(Ku,Cp),Ku.prototype.g=function(){return new XMLHttpRequest},Mp=new Ku;function Zi(l){return encodeURIComponent(String(l))}function Zb(l){var f=1;l=l.split(":");const g=[];for(;f>0&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function nr(l,f,g,y){this.j=l,this.i=f,this.l=g,this.S=y||1,this.V=new Ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vp}function Vp(){this.i=null,this.g="",this.h=!1}var Op={},Qu={};function Yu(l,f,g){l.M=1,l.A=Ya(ln(f)),l.u=g,l.R=!0,Fp(l,null)}function Fp(l,f){l.F=Date.now(),Qa(l),l.B=ln(l.A);var g=l.B,y=l.S;Array.isArray(y)||(y=[String(y)]),Xp(g.i,"t",y),l.C=0,g=l.j.L,l.h=new Vp,l.g=gg(l.j,g?f:null,!l.u),l.P>0&&(l.O=new Wb(d(l.Y,l,l.g),l.P)),f=l.V,g=l.g,y=l.ba;var P="readystatechange";Array.isArray(P)||(P&&(jp[0]=P.toString()),P=jp);for(let M=0;M<P.length;M++){const z=bp(g,P[M],y||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.J?xe(l.J):{},l.u?(l.v||(l.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,f)):(l.v="GET",l.g.ea(l.B,l.v,null,f)),Yi(),Qb(l.i,l.v,l.B,l.l,l.S,l.u)}nr.prototype.ba=function(l){l=l.target;const f=this.O;f&&ir(l)==3?f.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const ee=ir(this.g),Le=this.g.ya(),de=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||ig(this.g)))){this.K||ee!=4||Le==7||(Le==8||de<=0?Yi(3):Yi(2)),Ju(this);var f=this.g.ca();this.X=f;var g=eE(this);if(this.o=f==200,Yb(this.i,this.v,this.B,this.l,this.S,ee,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,P=this.g;if((y=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(y)){var M=y;break t}}M=null}if(l=M)Vs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xu(this,l);else{this.o=!1,this.m=3,ft(12),ss(this),eo(this);break e}}if(this.R){l=!0;let Be;for(;!this.K&&this.C<g.length;)if(Be=tE(this,g),Be==Qu){ee==4&&(this.m=4,ft(14),l=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Be==Op){this.m=4,ft(15),Vs(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Vs(this.i,this.l,Be,null),Xu(this,Be);if(Up(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||g.length!=0||this.h.h||(this.m=1,ft(16),l=!1),this.o=this.o&&l,!l)Vs(this.i,this.l,g,"[Invalid Chunked Response]"),ss(this),eo(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),od(z),z.P=!0,ft(11))}}else Vs(this.i,this.l,g,null),Xu(this,g);ee==4&&ss(this),this.o&&!this.K&&(ee==4?hg(this.j,this):(this.o=!1,Qa(this)))}else pE(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),ss(this),eo(this)}}}catch{}finally{}};function eE(l){if(!Up(l))return l.g.la();const f=ig(l.g);if(f==="")return"";let g="";const y=f.length,P=ir(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ss(l),eo(l),"";l.h.i=new a.TextDecoder}for(let M=0;M<y;M++)l.h.h=!0,g+=l.h.i.decode(f[M],{stream:!(P&&M==y-1)});return f.length=0,l.h.g+=g,l.C=0,l.h.g}function Up(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function tE(l,f){var g=l.C,y=f.indexOf(`
`,g);return y==-1?Qu:(g=Number(f.substring(g,y)),isNaN(g)?Op:(y+=1,y+g>f.length?Qu:(f=f.slice(y,y+g),l.C=y+g,f)))}nr.prototype.cancel=function(){this.K=!0,ss(this)};function Qa(l){l.T=Date.now()+l.H,zp(l,l.H)}function zp(l,f){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ji(d(l.aa,l),f)}function Ju(l){l.D&&(a.clearTimeout(l.D),l.D=null)}nr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(Jb(this.i,this.B),this.M!=2&&(Yi(),ft(17)),ss(this),this.m=2,eo(this)):zp(this,this.T-l)};function eo(l){l.j.I==0||l.K||hg(l.j,l)}function ss(l){Ju(l);var f=l.O;f&&typeof f.dispose=="function"&&f.dispose(),l.O=null,Sp(l.V),l.g&&(f=l.g,l.g=null,f.abort(),f.dispose())}function Xu(l,f){try{var g=l.j;if(g.I!=0&&(g.g==l||Zu(g.h,l))){if(!l.L&&Zu(g.h,l)&&g.I==3){try{var y=g.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)tl(g),Za(g);else break e;id(g),ft(18)}}else g.xa=P[1],0<g.xa-g.K&&P[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Ji(d(g.Va,g),6e3));Hp(g.h)<=1&&g.ta&&(g.ta=void 0)}else os(g,11)}else if((l.L||g.g==l)&&tl(g),!j(f))for(P=g.Ba.g.parse(f),f=0;f<P.length;f++){let de=P[f];const Be=de[0];if(!(Be<=g.K))if(g.K=Be,de=de[1],g.I==2)if(de[0]=="c"){g.M=de[1],g.ba=de[2];const cn=de[3];cn!=null&&(g.ka=cn,g.j.info("VER="+g.ka));const as=de[4];as!=null&&(g.za=as,g.j.info("SVER="+g.za));const or=de[5];or!=null&&typeof or=="number"&&or>0&&(y=1.5*or,g.O=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const ar=l.g;if(ar){const rl=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var M=y.h;M.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(ed(M,M.h),M.h=null))}if(y.G){const ad=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;ad&&(y.wa=ad,me(y.J,y.G,ad))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),y=g;var z=l;if(y.na=pg(y,y.L?y.ba:null,y.W),z.L){qp(y.h,z);var ee=z,Le=y.O;Le&&(ee.H=Le),ee.D&&(Ju(ee),Qa(ee)),y.g=z}else ug(y);g.i.length>0&&el(g)}else de[0]!="stop"&&de[0]!="close"||os(g,7);else g.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?os(g,7):sd(g):de[0]!="noop"&&g.l&&g.l.qa(de),g.A=0)}}Yi(4)}catch{}}var nE=class{constructor(l,f){this.g=l,this.map=f}};function $p(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Hp(l){return l.h?1:l.g?l.g.size:0}function Zu(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function ed(l,f){l.g?l.g.add(f):l.h=f}function qp(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}$p.prototype.cancel=function(){if(this.i=Wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Wp(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.G);return f}return x(l.i)}var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rE(l,f){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const y=l[g].indexOf("=");let P,M=null;y>=0?(P=l[g].substring(0,y),M=l[g].substring(y+1)):P=l[g],f(P,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function rr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;l instanceof rr?(this.l=l.l,to(this,l.j),this.o=l.o,this.g=l.g,no(this,l.u),this.h=l.h,td(this,Zp(l.i)),this.m=l.m):l&&(f=String(l).match(Gp))?(this.l=!1,to(this,f[1]||"",!0),this.o=ro(f[2]||""),this.g=ro(f[3]||"",!0),no(this,f[4]),this.h=ro(f[5]||"",!0),td(this,f[6]||"",!0),this.m=ro(f[7]||"")):(this.l=!1,this.i=new io(null,this.l))}rr.prototype.toString=function(){const l=[];var f=this.j;f&&l.push(so(f,Kp,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(so(f,Kp,!0),"@"),l.push(Zi(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(so(g,g.charAt(0)=="/"?oE:iE,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",so(g,lE)),l.join("")},rr.prototype.resolve=function(l){const f=ln(this);let g=!!l.j;g?to(f,l.j):g=!!l.o,g?f.o=l.o:g=!!l.g,g?f.g=l.g:g=l.u!=null;var y=l.h;if(g)no(f,l.u);else if(g=!!l.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var P=f.h.lastIndexOf("/");P!=-1&&(y=f.h.slice(0,P+1)+y)}if(P=y,P==".."||P==".")y="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){y=P.lastIndexOf("/",0)==0,P=P.split("/");const M=[];for(let z=0;z<P.length;){const ee=P[z++];ee=="."?y&&z==P.length&&M.push(""):ee==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),y&&z==P.length&&M.push("")):(M.push(ee),y=!0)}y=M.join("/")}else y=P}return g?f.h=y:g=l.i.toString()!=="",g?td(f,Zp(l.i)):g=!!l.m,g&&(f.m=l.m),f};function ln(l){return new rr(l)}function to(l,f,g){l.j=g?ro(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function no(l,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);l.u=f}else l.u=null}function td(l,f,g){f instanceof io?(l.i=f,cE(l.i,l.l)):(g||(f=so(f,aE)),l.i=new io(f,l.l))}function me(l,f,g){l.i.set(f,g)}function Ya(l){return me(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function ro(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function so(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,sE),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Kp=/[#\/\?@]/g,iE=/[#\?:]/g,oE=/[#\?]/g,aE=/[#\?@]/g,lE=/#/g;function io(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function is(l){l.g||(l.g=new Map,l.h=0,l.i&&rE(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=io.prototype,t.add=function(l,f){is(this),this.i=null,l=Os(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Qp(l,f){is(l),f=Os(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Yp(l,f){return is(l),f=Os(l,f),l.g.has(f)}t.forEach=function(l,f){is(this),this.g.forEach(function(g,y){g.forEach(function(P){l.call(f,P,y,this)},this)},this)};function Jp(l,f){is(l);let g=[];if(typeof f=="string")Yp(l,f)&&(g=g.concat(l.g.get(Os(l,f))));else for(l=Array.from(l.g.values()),f=0;f<l.length;f++)g=g.concat(l[f]);return g}t.set=function(l,f){return is(this),this.i=null,l=Os(this,l),Yp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=Jp(this,l),l.length>0?String(l[0]):f):f};function Xp(l,f,g){Qp(l,f),g.length>0&&(l.i=null,l.g.set(Os(l,f),x(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var g=f[y];const P=Zi(g);g=Jp(this,g);for(let M=0;M<g.length;M++){let z=P;g[M]!==""&&(z+="="+Zi(g[M])),l.push(z)}}return this.i=l.join("&")};function Zp(l){const f=new io;return f.i=l.i,l.g&&(f.g=new Map(l.g),f.h=l.h),f}function Os(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function cE(l,f){f&&!l.j&&(is(l),l.i=null,l.g.forEach(function(g,y){const P=y.toLowerCase();y!=P&&(Qp(this,y),Xp(this,P,g))},l)),l.j=f}function uE(l,f){const g=new Xi;if(a.Image){const y=new Image;y.onload=h(sr,g,"TestLoadImage: loaded",!0,f,y),y.onerror=h(sr,g,"TestLoadImage: error",!1,f,y),y.onabort=h(sr,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(sr,g,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}function dE(l,f){const g=new Xi,y=new AbortController,P=setTimeout(()=>{y.abort(),sr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:y.signal}).then(M=>{clearTimeout(P),M.ok?sr(g,"TestPingServer: ok",!0,f):sr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),sr(g,"TestPingServer: error",!1,f)})}function sr(l,f,g,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(g)}catch{}}function hE(){this.g=new Kb}function nd(l){this.i=l.Sb||null,this.h=l.ab||!1}m(nd,Cp),nd.prototype.g=function(){return new Ja(this.i,this.h)};function Ja(l,f){rt.call(this),this.H=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Ja,rt),t=Ja.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=f,this.readyState=1,ao(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(f.body=l),(this.H||a).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function eg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?oo(this):ao(this),this.readyState==3&&eg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,oo(this))},t.Na=function(l){this.g&&(this.response=l,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ao(l)}t.setRequestHeader=function(l,f){this.A.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function ao(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function tg(l){let f="";return Y(l,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function rd(l,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=tg(g),typeof l=="string"?g!=null&&Zi(g):me(l,f,g))}function Te(l){rt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Te,rt);var fE=/^https?$/i,mE=["POST","PUT"];t=Te.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mp.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(M){ng(this,M);return}if(l=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)g.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())g.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(Array.prototype.indexOf.call(mE,f,void 0)>=0)||y||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of g)this.g.setRequestHeader(M,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){ng(this,M)}};function ng(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.o=5,rg(l),Xa(l)}function rg(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ht(this,"complete"),ht(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),Te.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sg(this):this.Xa())},t.Xa=function(){sg(this)};function sg(l){if(l.h&&typeof i<"u"){if(l.v&&ir(l)==4)setTimeout(l.Ca.bind(l),0);else if(ht(l,"readystatechange"),ir(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=M===0){let z=String(l.D).match(Gp)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),y=!fE.test(z?z.toLowerCase():"")}g=y}if(g)ht(l,"complete"),ht(l,"success");else{l.o=6;try{var P=ir(l)>2?l.g.statusText:""}catch{P=""}l.l=P+" ["+l.ca()+"]",rg(l)}}finally{Xa(l)}}}}function Xa(l,f){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,f||ht(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ir(l){return l.g?l.g.readyState:0}t.ca=function(){try{return ir(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Gb(f)}};function ig(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pE(l){const f={};l=(l.g&&ir(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(j(l[y]))continue;var g=Zb(l[y]);const P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=f[P]||[];f[P]=M,M.push(g)}Z(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function og(l){this.za=0,this.i=[],this.j=new Xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=lo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=lo("baseRetryDelayMs",5e3,l),this.Za=lo("retryDelaySeedMs",1e4,l),this.Ta=lo("forwardChannelMaxRetries",2,l),this.va=lo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new $p(l&&l.concurrentRequestLimit),this.Ba=new hE,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=og.prototype,t.ka=8,t.I=1,t.connect=function(l,f,g,y){ft(0),this.W=l,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.J=pg(this,null,this.W),el(this)};function sd(l){if(ag(l),l.I==3){var f=l.V++,g=ln(l.J);if(me(g,"SID",l.M),me(g,"RID",f),me(g,"TYPE","terminate"),co(l,g),f=new nr(l,l.j,f),f.M=2,f.A=Ya(ln(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.A,g=!0),g||(f.g=gg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Qa(f)}mg(l)}function Za(l){l.g&&(od(l),l.g.cancel(),l.g=null)}function ag(l){Za(l),l.v&&(a.clearTimeout(l.v),l.v=null),tl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&a.clearTimeout(l.m),l.m=null)}function el(l){if(!Bp(l.h)&&!l.m){l.m=!0;var f=l.Ea;L||v(),V||(L(),V=!0),E.add(f,l),l.D=0}}function gE(l,f){return Hp(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=f.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ji(d(l.Ea,l,f),fg(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const P=new nr(this,this.j,l);let M=this.o;if(this.U&&(M?(M=xe(M),ts(M,this.U)):M=this.U),this.u!==null||this.R||(P.J=M,M=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=cg(this,P,f),g=ln(this.J),me(g,"RID",l),me(g,"CVER",22),this.G&&me(g,"X-HTTP-Session-Id",this.G),co(this,g),M&&(this.R?f="headers="+Zi(tg(M))+"&"+f:this.u&&rd(g,this.u,M)),ed(this.h,P),this.Ra&&me(g,"TYPE","init"),this.S?(me(g,"$req",f),me(g,"SID","null"),P.U=!0,Yu(P,g,null)):Yu(P,g,f),this.I=2}}else this.I==3&&(l?lg(this,l):this.i.length==0||Bp(this.h)||lg(this))};function lg(l,f){var g;f?g=f.l:g=l.V++;const y=ln(l.J);me(y,"SID",l.M),me(y,"RID",g),me(y,"AID",l.K),co(l,y),l.u&&l.o&&rd(y,l.u,l.o),g=new nr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),f&&(l.i=f.G.concat(l.i)),f=cg(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),ed(l.h,g),Yu(g,y,f)}function co(l,f){l.H&&Y(l.H,function(g,y){me(f,y,g)}),l.l&&Y({},function(g,y){me(f,y,g)})}function cg(l,f,g){g=Math.min(l.i.length,g);const y=l.l?d(l.l.Ka,l.l,l):null;e:{var P=l.i;let ee=-1;for(;;){const Le=["count="+g];ee==-1?g>0?(ee=P[0].g,Le.push("ofs="+ee)):ee=0:Le.push("ofs="+ee);let de=!0;for(let Be=0;Be<g;Be++){var M=P[Be].g;const cn=P[Be].map;if(M-=ee,M<0)ee=Math.max(0,P[Be].g-100),de=!1;else try{M="req"+M+"_"||"";try{var z=cn instanceof Map?cn:Object.entries(cn);for(const[as,or]of z){let ar=or;c(or)&&(ar=qu(or)),Le.push(M+as+"="+encodeURIComponent(ar))}}catch(as){throw Le.push(M+"type="+encodeURIComponent("_badmap")),as}}catch{y&&y(cn)}}if(de){z=Le.join("&");break e}}z=void 0}return l=l.i.splice(0,g),f.G=l,z}function ug(l){if(!l.g&&!l.v){l.Y=1;var f=l.Da;L||v(),V||(L(),V=!0),E.add(f,l),l.A=0}}function id(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ji(d(l.Da,l),fg(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,dg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ji(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),Za(this),dg(this))};function od(l){l.B!=null&&(a.clearTimeout(l.B),l.B=null)}function dg(l){l.g=new nr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var f=ln(l.na);me(f,"RID","rpc"),me(f,"SID",l.M),me(f,"AID",l.K),me(f,"CI",l.F?"0":"1"),!l.F&&l.ia&&me(f,"TO",l.ia),me(f,"TYPE","xmlhttp"),co(l,f),l.u&&l.o&&rd(f,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Ya(ln(f)),g.u=null,g.R=!0,Fp(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Za(this),id(this),ft(19))};function tl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function hg(l,f){var g=null;if(l.g==f){tl(l),od(l),l.g=null;var y=2}else if(Zu(l.h,f))g=f.G,qp(l.h,f),y=1;else return;if(l.I!=0){if(f.o)if(y==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var P=l.D;y=Ga(),ht(y,new Dp(y,g)),el(l)}else ug(l);else if(P=f.m,P==3||P==0&&f.X>0||!(y==1&&gE(l,f)||y==2&&id(l)))switch(g&&g.length>0&&(f=l.h,f.i=f.i.concat(g)),P){case 1:os(l,5);break;case 4:os(l,10);break;case 3:os(l,6);break;default:os(l,2)}}}function fg(l,f){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*f}function os(l,f){if(l.j.info("Error code "+f),f==2){var g=d(l.bb,l),y=l.Ua;const P=!y;y=new rr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||to(y,"https"),Ya(y),P?uE(y.toString(),g):dE(y.toString(),g)}else ft(2);l.I=0,l.l&&l.l.pa(f),mg(l),ag(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function mg(l){if(l.I=0,l.ja=[],l.l){const f=Wp(l.h);(f.length!=0||l.i.length!=0)&&(N(l.ja,f),N(l.ja,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.oa()}}function pg(l,f,g){var y=g instanceof rr?ln(g):new rr(g);if(y.g!="")f&&(y.g=f+"."+y.g),no(y,y.u);else{var P=a.location;y=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;const M=new rr(null);y&&to(M,y),f&&(M.g=f),P&&no(M,P),g&&(M.h=g),y=M}return g=l.G,f=l.wa,g&&f&&me(y,g,f),me(y,"VER",l.ka),co(l,y),y}function gg(l,f,g){if(f&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Aa&&!l.ma?new Te(new nd({ab:g})):new Te(l.ma),f.Fa(l.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yg(){}t=yg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function nl(){}nl.prototype.g=function(l,f){return new Tt(l,f)};function Tt(l,f){rt.call(this),this.g=new og(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(l?l["X-WebChannel-Client-Profile"]=f.sa:l={"X-WebChannel-Client-Profile":f.sa}),this.g.U=l,(l=f&&f.Qb)&&!j(l)&&(this.g.u=l),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!j(f)&&(this.g.G=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Fs(this)}m(Tt,rt),Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){sd(this.g)},Tt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=qu(l),l=g);f.i.push(new nE(f.Ya++,l)),f.I==3&&el(f)},Tt.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,Tt.Z.N.call(this)};function xg(l){Wu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}m(xg,Wu);function vg(){Gu.call(this),this.status=1}m(vg,Gu);function Fs(l){this.g=l}m(Fs,yg),Fs.prototype.ra=function(){ht(this.g,"a")},Fs.prototype.qa=function(l){ht(this.g,new xg(l))},Fs.prototype.pa=function(l){ht(this.g,new vg)},Fs.prototype.oa=function(){ht(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,K_=function(){return new nl},G_=function(){return Ga()},W_=rs,Xh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,Ql=Ka,Lp.COMPLETE="complete",q_=Lp,kp.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",rt.prototype.listen=rt.prototype.J,So=kp,Te.prototype.listenOnce=Te.prototype.K,Te.prototype.getLastError=Te.prototype.Ha,Te.prototype.getLastErrorCode=Te.prototype.ya,Te.prototype.getStatus=Te.prototype.ca,Te.prototype.getResponseJson=Te.prototype.La,Te.prototype.getResponseText=Te.prototype.la,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Fa,H_=Te}).apply(typeof El<"u"?El:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="12.8.0";function xk(t){zi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new wm("@firebase/firestore");function $s(){return Cs.logLevel}function H(t,...e){if(Cs.logLevel<=re.DEBUG){const n=e.map(Am);Cs.debug(`Firestore (${zi}): ${t}`,...n)}}function Kn(t,...e){if(Cs.logLevel<=re.ERROR){const n=e.map(Am);Cs.error(`Firestore (${zi}): ${t}`,...n)}}function Ni(t,...e){if(Cs.logLevel<=re.WARN){const n=e.map(Am);Cs.warn(`Firestore (${zi}): ${t}`,...n)}}function Am(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q_(t,r,n)}function Q_(t,e,n){let r=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Kn(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Q_(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class _k{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wk{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new On;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new On,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new On)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new Y_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class bk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ek{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ot(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Tk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Zh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Hd(s)===Hd(i)?se(s,i):Hd(s)?1:-1}return se(t.length,e.length)}const Ik=55296,jk=57343;function Hd(t){const e=t.charCodeAt(0);return e>=Ik&&e<=jk}function Ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=hn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return se(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),s=hn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?hn.extractNumericId(e).compare(hn.extractNumericId(n)):Zh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class he extends hn{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new he(n)}static emptyPath(){return new he([])}}const Sk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends hn{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return Sk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===my}static keyField(){return new Xe([my])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new $(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new $(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(he.fromString(e))}static fromName(e){return new W(he.fromString(e).popFirst(5))}static empty(){return new W(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e,n){if(!n)throw new $(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ck(t,e,n,r){if(e===!0&&r===!0)throw new $(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function py(t){if(!W.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gy(t){if(W.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function X_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xu(t);throw new $(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kk(t,e){if(e<=0)throw new $(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e){const n={typeString:t};return e&&(n.value=e),n}function Va(t,e){if(!X_(t))throw new $(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-62135596800,xy=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(e){return le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xy);return new le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yy)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xy}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Va(e,le._jsonSchema))return new le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:De("string",le._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new le(0,0))}static max(){return new J(new le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=-1;function Rk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new Ur(s,W.empty(),e)}function Ak(t){return new Ur(t.readTime,t.key,pa)}class Ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ur(J.min(),W.empty(),pa)}static max(){return new Ur(J.max(),W.empty(),pa)}}function Pk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==Dk)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{a[d]=h,++c,c===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Mk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function _u(t){return t==null}function Lc(t){return t===0&&1/t==-1/0}function Vk(t){return typeof t=="number"&&Number.isInteger(t)&&!Lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="";function Ok(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vy(e)),e=Fk(t.get(n),e);return vy(e)}function Fk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Z_:n+="";break;default:n+=i}}return n}function vy(t){return t+Z_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ew(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wy(this.data.getIterator())}getIteratorFrom(e){return new wy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class wy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new St([])}unionWith(e){let n=new ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tw("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const Uk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=Uk.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",sw="__previous_value__",iw="__local_write_time__";function Lm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rw])==null?void 0:r.stringValue)===nw}function wu(t){const e=t.mapValue.fields[sw];return Lm(e)?wu(e):e}function ga(t){const e=zr(t.mapValue.fields[iw].timestampValue);return new le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,s,i,a,c,u,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}}const Mc="(default)";class ya{constructor(e,n){this.projectId=e,this.database=n||Mc}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}function $k(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__type__",aw="__max__",Tl={mapValue:{fields:{__type__:{stringValue:aw}}}},lw="__vector__",Vc="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:Hk(t)?9007199254740991:Bk(t)?10:11:Q(28295,{value:t})}function Nn(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ga(t).isEqual(ga(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=zr(s.timestampValue),c=zr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return $r(s.bytesValue).isEqual($r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ce(s.doubleValue),c=Ce(i.doubleValue);return a===c?Lc(a)===Lc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(_y(a)!==_y(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Nn(a[u],c[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function xa(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=Br(t),r=Br(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Ce(i.integerValue||i.doubleValue),u=Ce(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return by(t.timestampValue,e.timestampValue);case 4:return by(ga(t),ga(e));case 5:return Zh(t.stringValue,e.stringValue);case 6:return function(i,a){const c=$r(i),u=$r(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=se(c[d],u[d]);if(h!==0)return h}return se(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=se(Ce(i.latitude),Ce(a.latitude));return c!==0?c:se(Ce(i.longitude),Ce(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ey(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,x,N,k;const c=i.fields||{},u=a.fields||{},d=(p=c[Vc])==null?void 0:p.arrayValue,h=(x=u[Vc])==null?void 0:x.arrayValue,m=se(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((k=h==null?void 0:h.values)==null?void 0:k.length)||0);return m!==0?m:Ey(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Tl.mapValue&&a===Tl.mapValue)return 0;if(i===Tl.mapValue)return 1;if(a===Tl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Zh(u[m],h[m]);if(p!==0)return p;const x=Ii(c[u[m]],d[h[m]]);if(x!==0)return x}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function by(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=zr(t),r=zr(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function Ey(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ii(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function ji(t){return ef(t)}function ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ef(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ef(n.fields[a])}`;return s+"}"}(t.mapValue):Q(61005,{value:t})}function Yl(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wu(t);return e?16+Yl(e):16;case 5:return 2*t.stringValue.length;case 6:return $r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Yl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Xr(r.fields,(i,a)=>{s+=i.length+Yl(a)}),s}(t.mapValue);default:throw Q(13486,{value:t})}}function Ny(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tf(t){return!!t&&"integerValue"in t}function Mm(t){return!!t&&"arrayValue"in t}function Ty(t){return!!t&&"nullValue"in t}function Iy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jl(t){return!!t&&"mapValue"in t}function Bk(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ow])==null?void 0:r.stringValue)===lw}function Bo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Xr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return{...t}}function Hk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Bo(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Jl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _t(Bo(this.value))}}function cw(t){const e=[];return Xr(t.fields,(n,r)=>{const s=new Xe([n]);if(Jl(r)){const i=cw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new ct(e,0,J.min(),J.min(),J.min(),_t.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,J.min(),J.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,J.min(),J.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.position=e,this.inclusive=n}}function jy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=Ii(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n="asc"){this.field=e,this.dir=n}}function qk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uw=class{};class Pe extends uw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gk(e,n,r):n==="array-contains"?new Yk(e,r):n==="in"?new Jk(e,r):n==="not-in"?new Xk(e,r):n==="array-contains-any"?new Zk(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Kk(e,r):new Qk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ii(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends uw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new on(e,n)}matches(e){return dw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dw(t){return t.op==="and"}function hw(t){return Wk(t)&&dw(t)}function Wk(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function nf(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+ji(t.value);if(hw(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function fw(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&Nn(r.value,s.value)}(t,e):t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&fw(a,s.filters[c]),!0):!1}(t,e):void Q(19439)}function mw(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${ji(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(mw).join(" ,")+"}"}(t):"Filter"}class Gk extends Pe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Kk extends Pe{constructor(e,n){super(e,"in",n),this.keys=pw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Qk extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=pw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class Yk extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mm(n)&&xa(n.arrayValue,this.value)}}class Jk extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xa(this.value.arrayValue,n)}}class Xk extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xa(this.value.arrayValue,n)}}class Zk extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function Cy(t,e=null,n=[],r=[],s=null,i=null,a=null){return new eR(t,e,n,r,s,i,a)}function Vm(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ji(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ji(r)).join(",")),e.Te=n}return e.Te}function Om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sy(t.startAt,e.startAt)&&Sy(t.endAt,e.endAt)}function rf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tR(t,e,n,r,s,i,a,c){return new Hi(t,e,n,r,s,i,a,c)}function bu(t){return new Hi(t)}function ky(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nR(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gw(t){return t.collectionGroup!==null}function Ho(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ze(Xe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new va(i,r))}),n.has(Xe.keyField().canonicalString())||e.Ie.push(new va(Xe.keyField(),r))}return e.Ie}function vn(t){const e=X(t);return e.Ee||(e.Ee=rR(e,Ho(t))),e.Ee}function rR(t,e){if(t.limitType==="F")return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new va(s.field,i)});const n=t.endAt?new Oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oc(t.startAt.position,t.startAt.inclusive):null;return Cy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sR(t,e){const n=t.explicitOrderBy.concat([e]);return new Hi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Fc(t,e,n){return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eu(t,e){return Om(vn(t),vn(e))&&t.limitType===e.limitType}function yw(t){return`${Vm(vn(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mw(s)).join(", ")}]`),_u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ji(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ji(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Nu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ho(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=jy(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Ho(r),s)||r.endAt&&!function(a,c,u){const d=jy(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Ho(r),s))}(t,e)}function iR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xw(t){return(e,n)=>{let r=!1;for(const s of Ho(t)){const i=oR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function oR(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ii(u,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Ne(W.comparator);function Qn(){return aR}const vw=new Ne(W.comparator);function Co(...t){let e=vw;for(const n of t)e=e.insert(n.key,n);return e}function _w(t){let e=vw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return qo()}function ww(){return qo()}function qo(){return new Ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const lR=new Ne(W.comparator),cR=new ze(W.comparator);function ie(...t){let e=cR;for(const n of t)e=e.add(n);return e}const uR=new ze(se);function dR(){return uR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function bw(t){return{integerValue:""+t}}function hR(t,e){return Vk(e)?bw(e):Fm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this._=void 0}}function fR(t,e,n){return t instanceof _a?function(s,i){const a={fields:{[rw]:{stringValue:nw},[iw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lm(i)&&(i=wu(i)),i&&(a.fields[sw]=i),{mapValue:a}}(n,e):t instanceof wa?Nw(t,e):t instanceof ba?Tw(t,e):function(s,i){const a=Ew(s,i),c=Ry(a)+Ry(s.Ae);return tf(a)&&tf(s.Ae)?bw(c):Fm(s.serializer,c)}(t,e)}function mR(t,e,n){return t instanceof wa?Nw(t,e):t instanceof ba?Tw(t,e):n}function Ew(t,e){return t instanceof Uc?function(r){return tf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class _a extends Tu{}class wa extends Tu{constructor(e){super(),this.elements=e}}function Nw(t,e){const n=Iw(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ba extends Tu{constructor(e){super(),this.elements=e}}function Tw(t,e){let n=Iw(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class Uc extends Tu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ry(t){return Ce(t.integerValue||t.doubleValue)}function Iw(t){return Mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.field=e,this.transform=n}}function gR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wa&&s instanceof wa||r instanceof ba&&s instanceof ba?Ti(r.elements,s.elements,Nn):r instanceof Uc&&s instanceof Uc?Nn(r.Ae,s.Ae):r instanceof _a&&s instanceof _a}(t.transform,e.transform)}class yR{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iu{}function jw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cw(t.key,en.none()):new Oa(t.key,t.data,en.none());{const n=t.data,r=_t.empty();let s=new ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Zr(t.key,r,new St(s.toArray()),en.none())}}function xR(t,e,n){t instanceof Oa?function(s,i,a){const c=s.value.clone(),u=Py(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(s,i,a){if(!Xl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Py(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Sw(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Oa?function(i,a,c,u){if(!Xl(i.precondition,a))return c;const d=i.value.clone(),h=Dy(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(i,a,c,u){if(!Xl(i.precondition,a))return c;const d=Dy(i.fieldTransforms,u,a),h=a.data;return h.setAll(Sw(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Xl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function vR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ew(r.transform,s||null);i!=null&&(n===null&&(n=_t.empty()),n.set(r.field,i))}return n||null}function Ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ti(r,s,(i,a)=>gR(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oa extends Iu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zr extends Iu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Py(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,mR(a,c,n[s]))}return r}function Dy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,fR(i,a,e))}return r}class Cw extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _R extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&xR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ww();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=jw(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>Ay(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>Ay(n,r))}}class Um{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lR}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Um(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,oe;function NR(t){switch(t){case O.OK:return Q(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function kw(t){if(t===void 0)return Kn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Re.OK:return O.OK;case Re.CANCELLED:return O.CANCELLED;case Re.UNKNOWN:return O.UNKNOWN;case Re.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Re.INTERNAL:return O.INTERNAL;case Re.UNAVAILABLE:return O.UNAVAILABLE;case Re.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Re.NOT_FOUND:return O.NOT_FOUND;case Re.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Re.ABORTED:return O.ABORTED;case Re.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Re.DATA_LOSS:return O.DATA_LOSS;default:return Q(39323,{code:t})}}(oe=Re||(Re={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Dr([4294967295,4294967295],0);function Ly(t){const e=TR().encode(t),n=new B_;return n.update(e),new Uint8Array(n.digest())}function My(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([s,i],0)]}class zm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(r<0)throw new ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Dr.fromNumber(r)));return s.compare(IR)===1&&(s=new Dr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ly(e),[r,s]=My(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new zm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Ly(e),[r,s]=My(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ju(J.min(),s,new Ne(se),Qn(),ie())}}class Fa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Rw{constructor(e,n){this.targetId=e,this.Ce=n}}class Aw{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vy{constructor(){this.ve=0,this.Fe=Oy(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q(38017,{changeType:i})}}),new Fa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Oy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qn(),this.He=Il(),this.Je=Il(),this.Ze=new Ne(se)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(rf(i))if(r===0){const a=new W(i.path);this.et(n,a,ct.newNoDocument(a,J.min()))}else ce(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=$r(r).toUint8Array()}catch(u){if(u instanceof tw)return Ni("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new zm(a,s,i)}catch(u){return Ni(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&rf(c.target)){const u=new W(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ct.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}});let r=ie();this.Je.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new ju(e,n,this.Ze,this.je,r);return this.je=Qn(),this.He=Il(),this.Je=Il(),this.Ze=new Ne(se),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Vy,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ze(se),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ze(se),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Il(){return new Ne(W.comparator)}function Oy(){return new Ne(W.comparator)}const SR={asc:"ASCENDING",desc:"DESCENDING"},CR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kR={and:"AND",or:"OR"};class RR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AR(t,e){return zc(t,e.toTimestamp())}function _n(t){return ce(!!t,49232),J.fromTimestamp(function(n){const r=zr(n);return new le(r.seconds,r.nanos)}(t))}function $m(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(s){return new he(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dw(t){const e=he.fromString(t);return ce(Fw(e),10190,{key:e.toString()}),e}function lf(t,e){return $m(t.databaseId,e.path)}function qd(t,e){const n=Dw(e);if(n.get(1)!==t.databaseId.projectId)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Mw(n))}function Lw(t,e){return $m(t.databaseId,e)}function PR(t){const e=Dw(t);return e.length===4?he.emptyPath():Mw(e)}function cf(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mw(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fy(t,e,n){return{name:lf(t,e),fields:n.value.mapValue.fields}}function DR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ce(h===void 0||typeof h=="string",58123),nt.fromBase64String(h||"")):(ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const h=d.code===void 0?O.UNKNOWN:kw(d.code);return new $(h,d.message||"")}(a);n=new Aw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qd(t,r.document.name),i=_n(r.document.updateTime),a=r.document.createTime?_n(r.document.createTime):J.min(),c=new _t({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,i,a,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Zl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qd(t,r.document),i=r.readTime?_n(r.readTime):J.min(),a=ct.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Zl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qd(t,r.document),i=r.removedTargetIds||[];n=new Zl([],i,s,null)}else{if(!("filter"in e))return Q(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new ER(s,i),c=r.targetId;n=new Rw(c,a)}}return n}function LR(t,e){let n;if(e instanceof Oa)n={update:Fy(t,e.key,e.value)};else if(e instanceof Cw)n={delete:lf(t,e.key)};else if(e instanceof Zr)n={update:Fy(t,e.key,e.data),updateMask:HR(e.fieldMask)};else{if(!(e instanceof _R))return Q(16599,{dt:e.type});n={verify:lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof _a)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof wa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ba)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Q(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:AR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q(27497)}(t,e.precondition)),n}function MR(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?_n(s.updateTime):_n(i);return a.isEqual(J.min())&&(a=_n(i)),new yR(a,s.transformResults||[])}(n,e))):[]}function VR(t,e){return{documents:[Lw(t,e.path)]}}function OR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lw(t,s);const i=function(d){if(d.length!==0)return Ow(on.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Hs(p.field),direction:zR(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=of(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function FR(t){let e=PR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=Vw(m);return p instanceof on&&hw(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(N){return new va(qs(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,_u(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,x=m.values||[];return new Oc(x,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,x=m.values||[];return new Oc(x,p)}(n.endAt)),tR(e,s,a,i,c,"F",u,d)}function UR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qs(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qs(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qs(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qs(n.unaryFilter.field);return Pe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>Vw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function zR(t){return SR[t]}function $R(t){return CR[t]}function BR(t){return kR[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function qs(t){return Xe.fromServerFormat(t.fieldPath)}function Ow(t){return t instanceof Pe?function(n){if(n.op==="=="){if(Iy(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(Ty(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iy(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(Ty(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:$R(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(s=>Ow(s));return r.length===1?r[0]:{compositeFilter:{op:BR(n.op),filters:r}}}(t):Q(54877,{filter:t})}function HR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Uw(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=J.min(),a=J.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.yt=e}}function WR(t){const e=FR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.Sn=new KR}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ur.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class KR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(he.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zw=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(zw,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Si(0)}static ar(){return new Si(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LruGarbageCollector",QR=1048576;function $y([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class YR{constructor(e){this.Pr=e,this.buffer=new ze($y),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$y(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(zy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bi(n)?H(zy,"Ignoring IndexedDB error during garbage collection: ",n):await $i(n)}await this.Ar(3e5)})}}class XR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(vu.ce);const r=new YR(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Uy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),$s()<=re.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function ZR(t,e){return new XR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,St.empty(),le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Co();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Qn();const a=qo(),c=function(){return qo()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Zr)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Wo(h.mutation,d,h.mutation.getFieldMask(),le.now())):a.set(d.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>c.set(d,new tA(h,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=qo();let s=new Ne((a,c)=>a-c),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||St.empty();h=c.applyToLocalView(d,h),r.set(u,h);const m=(s.get(c.batchId)||ie()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=ww();h.forEach(p=>{if(!i.has(p)){const x=jw(n.get(p),r.get(p));x!==null&&m.set(p,x),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return nR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ms());let c=pa,u=i;return a.next(d=>F.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(h=>({batchId:c,changes:_w(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Co();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,p){return new Hi(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,ct.newInvalidDocument(h)))});let c=Co();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Wo(h.mutation,d,St.empty(),le.now()),Nu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:WR(s.bundledQuery),readTime:_n(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.overlays=new Ne(W.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,a=new W(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ms(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=ms(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=s)););return F.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new bR(n,r));let i=this.Lr.get(n);i===void 0&&(i=ie(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.kr=new ze(He.Kr),this.qr=new ze(He.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new He(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new He(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new W(new he([])),r=new He(n,e),s=new He(n,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new W(new he([])),r=new He(n,e),s=new He(n,e+1);let i=ie();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new He(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return W.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ze(He.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new wR(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Jr=this.Jr.add(new He(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Dm:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),s=new He(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const c=this.Zr(a.Hr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(se);return n.forEach(s=>{const i=new He(s,0),a=new He(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],c=>{r=r.add(c.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new He(new W(i),0);let c=new ze(se);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},a),F.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new He(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new He(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.ti=e,this.docs=function(){return new Ne(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const a=n.path,c=new W(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Pk(Ak(h),r)<=0||(s.has(h.key)||Nu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lA(this)}getSize(e){return F.resolve(this.size)}}class lA extends eA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.persistence=e,this.ri=new Ls(n=>Vm(n),Om),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ii=0,this.si=new Bm,this.targetCount=0,this.oi=Si._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Si(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this._i={},this.overlays={},this.ai=new vu(0),this.ui=!1,this.ui=!0,this.ci=new iA,this.referenceDelegate=e(this),this.li=new cA(this),this.indexManager=new GR,this.remoteDocumentCache=function(s){return new aA(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new qR(n),this.Pi=new rA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new oA(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new uA(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class uA extends Lk{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Ri=new Bm,this.Ai=null}static Vi(e){return new Hm(e)}get di(){if(this.Ai)return this.Ai;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=W.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class $c{constructor(e,n){this.persistence=e,this.fi=new Ls(r=>Ok(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ZR(this,n)}static Vi(e,n){return new $c(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,n).next(c=>{c||(r++,i.removeEntry(a,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return UI()?8:Mk(dt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new dA;return this.ys(e,n,a).next(c=>{if(i.result=c,this.As)return this.ws(e,n,a,c.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?($s()<=re.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):($s()<=re.DEBUG&&H("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?($s()<=re.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):F.resolve())}gs(e,n){if(ky(n))return F.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fc(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ie(...i);return this.fs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ss(n,d,a,u.readTime)?this.gs(e,Fc(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return ky(n)||s.isEqual(J.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?F.resolve(null):($s()<=re.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bs(n)),this.Ds(e,a,n,Rk(s,pa)).next(c=>c))})}bs(e,n){let r=new ze(xw(e));return n.forEach((s,i)=>{Nu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return $s()<=re.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.fs.getDocumentsMatchingQuery(e,n,Ur.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",fA=3e8;class mA{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ne(se),this.Fs=new Ls(i=>Vm(i),Om),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function pA(t,e,n,r){return new mA(t,e,n,r)}async function Bw(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ie();for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:c}))})})}function gA(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,p=m.keys();let x=F.resolve();return p.forEach(N=>{x=x.next(()=>h.getEntry(u,N)).next(k=>{const A=d.docVersions.get(N);ce(A!==null,48541),k.version.compareTo(A)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),h.addEntry(k)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hw(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function yA(t,e){const n=X(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;c.push(n.li.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,m)));let x=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(nt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(m,x),function(k,A,b){return k.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=fA?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,x,h)&&c.push(n.li.updateTargetData(i,x))});let u=Qn(),d=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),c.push(xA(i,a,e.documentUpdates).next(h=>{u=h.Bs,d=h.Ls})),!r.isEqual(J.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(h)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function xA(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Qn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):H(Wm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function vA(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _A(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(a=>(s=new br(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function uf(t,e,n){const r=X(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Bi(a))throw a;H(Wm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function By(t,e,n){const r=X(t);let s=J.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const m=X(u),p=m.Fs.get(h);return p!==void 0?F.resolve(m.vs.get(p)):m.li.getTargetData(d,h)}(r,a,vn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?i:ie())).next(c=>(wA(r,iR(e),c),{documents:c,ks:i})))}function wA(t,e,n){let r=t.Ms.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Hy{constructor(){this.activeTargetIds=dR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bA{constructor(){this.vo=new Hy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Hy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="ConnectivityMonitor";class Wy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(qy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(qy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=null;function df(){return jl===null?jl=function(){return 268435456+Math.round(2147483648*Math.random())}():jl++,"0x"+jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="RestConnection",NA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class TA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Mc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=df(),c=this.Qo(e,n.toUriEncodedString());H(Wd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(c),h=Oi(d);return this.zo(e,c,u,r,h).then(m=>(H(Wd,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ni(Wd,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=NA[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection",_o=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class mi extends TA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!mi.c_){const e=G_();_o(e,W_.STAT_EVENT,n=>{n.stat===Xh.PROXY?H(ot,"STAT_EVENT: detected buffering proxy"):n.stat===Xh.NOPROXY&&H(ot,"STAT_EVENT: detected no buffering proxy")}),mi.c_=!0}}zo(e,n,r,s,i){const a=df();return new Promise((c,u)=>{const d=new H_;d.setWithCredentials(!0),d.listenOnce(q_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ql.NO_ERROR:const m=d.getResponseJson();H(ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case Ql.TIMEOUT:H(ot,`RPC '${e}' ${a} timed out`),u(new $(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ql.HTTP_ERROR:const p=d.getStatus();if(H(ot,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const k=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(_)>=0?_:O.UNKNOWN}(N.status);u(new $(k,N.message))}else u(new $(O.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(O.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(ot,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);H(ot,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=df(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(ot,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=a.createWebChannel(d,c);this.I_(h);let m=!1,p=!1;const x=new IA({Ho:N=>{p?H(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||(H(ot,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),H(ot,`RPC '${e}' stream ${s} sending:`,N),h.send(N))},Jo:()=>h.close()});return _o(h,So.EventType.OPEN,()=>{p||(H(ot,`RPC '${e}' stream ${s} transport opened.`),x.i_())}),_o(h,So.EventType.CLOSE,()=>{p||(p=!0,H(ot,`RPC '${e}' stream ${s} transport closed`),x.o_(),this.E_(h))}),_o(h,So.EventType.ERROR,N=>{p||(p=!0,Ni(ot,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),x.o_(new $(O.UNAVAILABLE,"The operation could not be completed")))}),_o(h,So.EventType.MESSAGE,N=>{var k;if(!p){const A=N.data[0];ce(!!A,16349);const b=A,_=(b==null?void 0:b.error)||((k=b[0])==null?void 0:k.error);if(_){H(ot,`RPC '${e}' stream ${s} received error:`,_);const w=_.status;let D=function(E){const v=Re[E];if(v!==void 0)return kw(v)}(w),L=_.message;D===void 0&&(D=O.INTERNAL,L="Unknown error status: "+w+" with message "+_.message),p=!0,x.o_(new $(D,L)),h.close()}else H(ot,`RPC '${e}' stream ${s} received:`,A),x.__(A)}}),mi.u_(),setTimeout(()=>{x.s_()},0),x}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return K_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){return new mi(t)}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new RR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.c_=!1;class qw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="PersistentStream";class Ww{constructor(e,n,r,s,i,a,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Gy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(Gy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SA extends Ww{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=DR(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?_n(a.readTime):J.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=cf(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=rf(u)?{documents:VR(i,u)}:{query:OR(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Pw(i,a.resumeToken);const d=of(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(J.min())>0){c.readTime=zc(i,a.snapshotVersion.toTimestamp());const d=of(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=UR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=cf(this.serializer),n.removeTarget=e,this.K_(n)}}class CA extends Ww{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=MR(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LR(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class RA extends kA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,af(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(O.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.jo(e,af(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(O.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function AA(t,e,n,r){return new RA(t,e,n,r)}class PA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class DA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Ms(this)&&(H(ks,"Restarting streams for network reachability change."),await async function(u){const d=X(u);d.Ea.add(4),await Ua(d),d.Va.set("Unknown"),d.Ea.delete(4),await Cu(d)}(this))})}),this.Va=new PA(r,s)}}async function Cu(t){if(Ms(t))for(const e of t.Ra)await e(!0)}async function Ua(t){for(const e of t.Ra)await e(!1)}function Gw(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ym(n)?Qm(n):qi(n).O_()&&Km(n,e))}function Gm(t,e){const n=X(t),r=qi(n);n.Ia.delete(e),r.O_()&&Kw(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ms(n)&&n.Va.set("Unknown"))}function Km(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qi(t).Z_(e)}function Kw(t,e){t.da.$e(e),qi(t).X_(e)}function Qm(t){t.da=new jR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qi(t).start(),t.Va.ua()}function Ym(t){return Ms(t)&&!qi(t).x_()&&t.Ia.size>0}function Ms(t){return X(t).Ea.size===0}function Qw(t){t.da=void 0}async function LA(t){t.Va.set("Online")}async function MA(t){t.Ia.forEach((e,n)=>{Km(t,e)})}async function VA(t,e){Qw(t),Ym(t)?(t.Va.ha(e),Qm(t)):t.Va.set("Unknown")}async function OA(t,e,n){if(t.Va.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.da.removeTarget(c))}(t,e)}catch(r){H(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bc(t,r)}else if(e instanceof Zl?t.da.Xe(e):e instanceof Rw?t.da.st(e):t.da.tt(e),!n.isEqual(J.min()))try{const r=await Hw(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.da.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),Kw(i,u);const m=new br(h.target,u,d,h.sequenceNumber);Km(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H(ks,"Failed to raise snapshot:",r),await Bc(t,r)}}async function Bc(t,e,n){if(!Bi(e))throw e;t.Ea.add(1),await Ua(t),t.Va.set("Offline"),n||(n=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(ks,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Cu(t)})}function Yw(t,e){return e().catch(n=>Bc(t,n,e))}async function ku(t){const e=X(t),n=Hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dm;for(;FA(e);)try{const s=await vA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,UA(e,s)}catch(s){await Bc(e,s)}Jw(e)&&Xw(e)}function FA(t){return Ms(t)&&t.Ta.length<10}function UA(t,e){t.Ta.push(e);const n=Hr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Jw(t){return Ms(t)&&!Hr(t).x_()&&t.Ta.length>0}function Xw(t){Hr(t).start()}async function zA(t){Hr(t).ra()}async function $A(t){const e=Hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function BA(t,e,n){const r=t.Ta.shift(),s=Um.from(r,e,n);await Yw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ku(t)}async function HA(t,e){e&&Hr(t).Y_&&await async function(r,s){if(function(a){return NR(a)&&a!==O.ABORTED}(s.code)){const i=r.Ta.shift();Hr(r).B_(),await Yw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ku(r)}}(t,e),Jw(t)&&Xw(t)}async function Ky(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H(ks,"RemoteStore received new credentials");const r=Ms(n);n.Ea.add(3),await Ua(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Cu(n)}async function qA(t,e){const n=X(t);e?(n.Ea.delete(2),await Cu(n)):e||(n.Ea.add(2),await Ua(n),n.Va.set("Unknown"))}function qi(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new SA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:LA.bind(null,t),Yo:MA.bind(null,t),t_:VA.bind(null,t),J_:OA.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Ym(t)?Qm(t):t.Va.set("Unknown")):(await t.ma.stop(),Qw(t))})),t.ma}function Hr(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new CA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:zA.bind(null,t),t_:HA.bind(null,t),ta:$A.bind(null,t),na:BA.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await ku(t)):(await t.fa.stop(),t.Ta.length>0&&(H(ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new On,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Jm(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),Bi(t))return new $(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{static emptySet(e){return new pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.ga=new Ne(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ci{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ci(e,n,pi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class GA{constructor(){this.queries=Yy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Yy(),i.forEach((a,c)=>{for(const u of c.ba)u.onError(r)})})(this,new $(O.ABORTED,"Firestore shutting down"))}}function Yy(){return new Ls(t=>yw(t),Eu)}async function Zm(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new WA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Xm(a,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&tp(n)}async function ep(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KA(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.ba)c.Fa(s)&&(r=!0);a.wa=s}}r&&tp(n)}function QA(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function tp(t){t.Ca.forEach(e=>{e.next()})}var hf,Jy;(Jy=hf||(hf={})).Ma="default",Jy.Cache="cache";class np{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.key=e}}class eb{constructor(e){this.key=e}}class YA{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ie(),this.mutatedKeys=ie(),this.eu=xw(e),this.tu=new pi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Qy,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),x=Nu(this.query,m)?m:null,N=!!p&&this.mutatedKeys.has(p.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;p&&x?p.data.isEqual(x.data)?N!==k&&(r.track({type:3,doc:x}),A=!0):this.su(p,x)||(r.track({type:2,doc:x}),A=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!p&&x?(r.track({type:0,doc:x}),A=!0):p&&!x&&(r.track({type:1,doc:p}),A=!0,(u||d)&&(c=!0)),A&&(x?(a=a.add(x),i=k?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(x,N){const k=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Vt:A})}};return k(x)-k(N)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new Ci(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new eb(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Zw(r))}),n}cu(e){this.Za=e.ks,this.Ya=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ci.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const rp="SyncEngine";class JA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XA{constructor(e){this.key=e,this.hu=!1}}class ZA{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ls(c=>yw(c),Eu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ne(W.comparator),this.Au=new Map,this.Vu=new Bm,this.du={},this.mu=new Map,this.fu=Si.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eP(t,e,n=!0){const r=ob(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await tb(r,e,n,!0),s}async function tP(t,e){const n=ob(t);await tb(n,e,!0,!1)}async function tb(t,e,n,r){const s=await _A(t.localStore,vn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await nP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Gw(t.remoteStore,s),c}async function nP(t,e,n,r,s){t.pu=(m,p,x)=>async function(k,A,b,_){let w=A.view.ru(b);w.Ss&&(w=await By(k.localStore,A.query,!1).then(({documents:E})=>A.view.ru(E,w)));const D=_&&_.targetChanges.get(A.targetId),L=_&&_.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(w,k.isPrimaryClient,D,L);return Zy(k,A.targetId,V.au),V.snapshot}(t,m,p,x);const i=await By(t.localStore,e,!0),a=new YA(e,i.ks),c=a.ru(i.documents),u=Fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Zy(t,n,d.au);const h=new JA(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function rP(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Eu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gm(r.remoteStore,s.targetId),ff(r,s.targetId)}).catch($i)):(ff(r,s.targetId),await uf(r.localStore,s.targetId,!0))}async function sP(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gm(n.remoteStore,r.targetId))}async function iP(t,e,n){const r=hP(t);try{const s=await function(a,c){const u=X(a),d=le.now(),h=c.reduce((x,N)=>x.add(N.key),ie());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=Qn(),k=ie();return u.xs.getEntries(x,h).next(A=>{N=A,N.forEach((b,_)=>{_.isValidDocument()||(k=k.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,N)).next(A=>{m=A;const b=[];for(const _ of c){const w=vR(_,m.get(_.key).overlayedDocument);w!=null&&b.push(new Zr(_.key,w,cw(w.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,b,c)}).next(A=>{p=A;const b=A.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(x,A.batchId,b)})}).then(()=>({batchId:p.batchId,changes:_w(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.du[a.currentUser.toKey()];d||(d=new Ne(se)),d=d.insert(c,u),a.du[a.currentUser.toKey()]=d}(r,s.batchId,n),await za(r,s.changes),await ku(r.remoteStore)}catch(s){const i=Xm(s,"Failed to persist write");n.reject(i)}}async function nb(t,e){const n=X(t);try{const r=await yA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ce(a.hu,14607):s.removedDocuments.size>0&&(ce(a.hu,42227),a.hu=!1))}),await za(n,r,e)}catch(r){await $i(r)}}function Xy(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=X(a);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.ba)p.va(c)&&(d=!0)}),d&&tp(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oP(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ne(W.comparator);a=a.insert(i,ct.newNoDocument(i,J.min()));const c=ie().add(i),u=new ju(J.min(),new Map,new Ne(se),a,c);await nb(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),sp(r)}else await uf(r.localStore,e,!1).then(()=>ff(r,e,n)).catch($i)}async function aP(t,e){const n=X(t),r=e.batch.batchId;try{const s=await gA(n.localStore,e);sb(n,r,null),rb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,s)}catch(s){await $i(s)}}async function lP(t,e,n){const r=X(t);try{const s=await function(a,c){const u=X(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ce(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);sb(r,e,n),rb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await za(r,s)}catch(s){await $i(s)}}function rb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sb(t,e,n){const r=X(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||ib(t,r)})}function ib(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Gm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),sp(t))}function Zy(t,e,n){for(const r of n)r instanceof Zw?(t.Vu.addReference(r.key,e),cP(t,r)):r instanceof eb?(H(rp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||ib(t,r.key)):Q(19791,{wu:r})}function cP(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(rp,"New document in limbo: "+n),t.Eu.add(r),sp(t))}function sp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(he.fromString(e)),r=t.fu.next();t.Au.set(r,new XA(n)),t.Ru=t.Ru.insert(n,r),Gw(t.remoteStore,new br(vn(bu(n.path)),r,"TargetPurposeLimboResolution",vu.ce))}}async function za(t,e,n){const r=X(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=qm.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(u,d){const h=X(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,p=>F.forEach(p.Ts,x=>h.persistence.referenceDelegate.addReference(m,p.targetId,x)).next(()=>F.forEach(p.Is,x=>h.persistence.referenceDelegate.removeReference(m,p.targetId,x)))))}catch(m){if(!Bi(m))throw m;H(Wm,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const x=h.vs.get(p),N=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(N);h.vs=h.vs.insert(p,k)}}}(r.localStore,i))}async function uP(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H(rp,"User change. New user:",e.toKey());const r=await Bw(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new $(O.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await za(n,r.Ns)}}function dP(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let s=ie();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function ob(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Pu.J_=KA.bind(null,e.eventManager),e.Pu.yu=QA.bind(null,e.eventManager),e}function hP(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lP.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pA(this.persistence,new hA,e.initialUser,this.serializer)}Cu(e){return new $w(Hm.Vi,this.serializer)}Du(e){return new bA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class fP extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof $c,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new $w(r=>$c.Vi(r,n),this.serializer)}}class mf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uP.bind(null,this.syncEngine),await qA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GA}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=jA(e.databaseInfo);return AA(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new DA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Xy(this.syncEngine,n,0),function(){return Wy.v()?new Wy:new EA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,h){const m=new ZA(s,i,a,c,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H(ks,"RemoteStore shutting down."),i.Ea.add(5),await Ua(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mf.provider={build:()=>new mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class mP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=Pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(qr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(qr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new On;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),H(qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ex(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pP(t);H(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ky(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ky(e.remoteStore,s)),t._onlineComponents=e}async function pP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(qr,"Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new Hc)}}else H(qr,"Using default OfflineComponentProvider"),await Kd(t,new fP(void 0));return t._offlineComponents}async function ab(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(qr,"Using user provided OnlineComponentProvider"),await ex(t,t._uninitializedComponentsProvider._online)):(H(qr,"Using default OnlineComponentProvider"),await ex(t,new mf))),t._onlineComponents}function gP(t){return ab(t).then(e=>e.syncEngine)}async function qc(t){const e=await ab(t),n=e.eventManager;return n.onListen=eP.bind(null,e.syncEngine),n.onUnlisten=rP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),n}function yP(t,e,n,r){const s=new ip(r),i=new np(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Zm(await qc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>ep(await qc(t),i))}}function xP(t,e,n={}){const r=new On;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new ip({next:p=>{h.Nu(),a.enqueueAndForget(()=>ep(i,m));const x=p.docs.has(c);!x&&p.fromCache?d.reject(new $(O.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&u&&u.source==="server"?d.reject(new $(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new np(bu(c.path),h,{includeMetadataChanges:!0,Ka:!0});return Zm(i,m)}(await qc(t),t.asyncQueue,e,n,r)),r.promise}function vP(t,e,n={}){const r=new On;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new ip({next:p=>{h.Nu(),a.enqueueAndForget(()=>ep(i,m)),p.fromCache&&u.source==="server"?d.reject(new $(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new np(c,h,{includeMetadataChanges:!0,Ka:!0});return Zm(i,m)}(await qc(t),t.asyncQueue,e,n,r)),r.promise}function _P(t,e){const n=new On;return t.asyncQueue.enqueueAndForget(async()=>iP(await gP(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="ComponentProvider",tx=new Map;function bP(t,e,n,r,s){return new zk(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,lb(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="firestore.googleapis.com",nx=!0;class rx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cb,this.ssl=nx}else this.host=e.host,this.ssl=e.ssl??nx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QR)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ck("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ru{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vk;switch(r.type){case"firstParty":return new Ek(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tx.get(n);r&&(H(wP,"Removing Datastore"),tx.delete(n),r.terminate())}(this),Promise.resolve()}}function EP(t,e,n,r={}){var d;t=kt(t,Ru);const s=Oi(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(t_(`https://${c}`),n_("Firestore",!0)),i.host!==cb&&i.host!==c&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Ts(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=at.MOCK_USER;else{h=RI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new at(p)}t._authCredentials=new _k(new Y_(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new er(this.firestore,e,this._query)}}class je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new je(this.firestore,e,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Va(n,je._jsonSchema))return new je(e,r||null,new W(he.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:De("string",je._jsonSchemaVersion),referencePath:De("string")};class Lr extends er{constructor(e,n,r){super(e,n,bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new W(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function Ve(t,e,...n){if(t=$e(t),J_("collection","path",e),t instanceof Ru){const r=he.fromString(e,...n);return gy(r),new Lr(t,null,r)}{if(!(t instanceof je||t instanceof Lr))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return gy(r),new Lr(t.firestore,null,r)}}function ys(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Pm.newId()),J_("doc","path",e),t instanceof Ru){const r=he.fromString(e,...n);return py(r),new je(t,null,new W(r))}{if(!(t instanceof je||t instanceof Lr))throw new $(O.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return py(r),new je(t.firestore,t instanceof Lr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="AsyncQueue";class ix{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qw(this,"async_queue_retry"),this._c=()=>{const r=Gd();r&&H(sx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new On;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bi(e))throw e;H(sx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Kn("INTERNAL UNHANDLED ERROR: ",ox(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Q(47125,{Pc:ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ox(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Wr extends Ru{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ix,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ix(e),this._firestoreClient=void 0,await e}}}function NP(t,e){const n=typeof t=="object"?t:o_(),r=typeof t=="string"?t:Mc,s=Em(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=CI("firestore");i&&EP(s,...i)}return s}function Au(t){if(t._terminated)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TP(t),t._firestoreClient}function TP(t){var r,s,i,a;const e=t._freezeSettings(),n=bP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new mP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ft(nt.fromBase64String(e))}catch(n){throw new $(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ft(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ft._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Va(e,Ft._jsonSchema))return Ft.fromBase64String(e.bytes)}}Ft._jsonSchemaVersion="firestore/bytes/1.0",Ft._jsonSchema={type:De("string",Ft._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(Va(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:De("string",wn._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Va(e,tn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new tn(e.vectorValues);throw new $(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tn._jsonSchemaVersion="firestore/vectorValue/1.0",tn._jsonSchema={type:De("string",tn._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=/^__.*__$/;class jP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oa(e,this.data,n,this.fieldTransforms)}}class ub{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function db(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{dataSource:t})}}class ap{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(db(this.dataSource)&&IP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class SP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}createContext(e,n,r,s=!1){return new ap({dataSource:e,methodName:n,targetDoc:r,path:Xe.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new SP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hb(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);cp("Data must be an object, but it was:",a,r);const c=fb(r,a);let u,d;if(i.merge)u=new St(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=Rs(e,m,n);if(!a.contains(p))throw new $(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);gb(h,p)||h.push(p)}u=new St(h),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new jP(new _t(c),u,d)}class Lu extends Pu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lu}}class lp extends Pu{_toFieldTransform(e){return new pR(e.path,new _a)}isEqual(e){return e instanceof lp}}function CP(t,e,n,r){const s=t.createContext(1,e,n);cp("Data must be an object, but it was:",s,r);const i=[],a=_t.empty();Xr(r,(u,d)=>{const h=pb(e,u,n);d=$e(d);const m=s.childContextForFieldPath(h);if(d instanceof Lu)i.push(h);else{const p=$a(d,m);p!=null&&(i.push(h),a.set(h,p))}});const c=new St(i);return new ub(a,c,s.fieldTransforms)}function kP(t,e,n,r,s,i){const a=t.createContext(1,e,n),c=[Rs(e,r,n)],u=[s];if(i.length%2!=0)throw new $(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)c.push(Rs(e,i[p])),u.push(i[p+1]);const d=[],h=_t.empty();for(let p=c.length-1;p>=0;--p)if(!gb(d,c[p])){const x=c[p];let N=u[p];N=$e(N);const k=a.childContextForFieldPath(x);if(N instanceof Lu)d.push(x);else{const A=$a(N,k);A!=null&&(d.push(x),h.set(x,A))}}const m=new St(d);return new ub(h,m,a.fieldTransforms)}function RP(t,e,n,r=!1){return $a(n,t.createContext(r?4:3,e))}function $a(t,e){if(mb(t=$e(t)))return cp("Unsupported field value:",e,t),fb(t,e);if(t instanceof Pu)return function(r,s){if(!db(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=$a(c,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=le.fromDate(r);return{timestampValue:zc(s.serializer,i)}}if(r instanceof le){const i=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zc(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ft)return{bytesValue:Pw(s.serializer,r._byteString)};if(r instanceof je){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$m(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof tn)return function(a,c){const u=a instanceof tn?a.toArray():a;return{mapValue:{fields:{[ow]:{stringValue:lw},[Vc]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return Fm(c.serializer,h)})}}}}}}(r,s);if(Uw(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${xu(r)}`)}(t,e)}function fb(t,e){const n={};return ew(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(t,(r,s)=>{const i=$a(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof le||t instanceof wn||t instanceof Ft||t instanceof je||t instanceof Pu||t instanceof tn||Uw(t))}function cp(t,e,n){if(!mb(n)||!X_(n)){const r=xu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Rs(t,e,n){if((e=$e(e))instanceof op)return e._internalPath;if(typeof e=="string")return pb(t,e);throw Wc("Field path arguments must be of type string or ",t,!1,void 0,n)}const AP=new RegExp("[~\\*/\\[\\]]");function pb(t,e,n){if(e.search(AP)>=0)throw Wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new op(...e.split("."))._internalPath}catch{throw Wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new $(O.INVALID_ARGUMENT,c+t+u)}function gb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Vc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Ce(a.doubleValue));return new tn(n)}convertGeoPoint(e){return new wn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ga(e));default:return null}}convertTimestamp(e){const n=zr(e);return new le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=he.fromString(e);ce(Fw(r),9688,{name:e});const s=new ya(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Kn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends PP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ft(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}function In(){return new lp("serverTimestamp")}const ax="@firebase/firestore",lx="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Rs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DP extends yb{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class hp extends dp{}function bn(t,e,...n){let r=[];e instanceof dp&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof fp).length,c=i.filter(u=>u instanceof Mu).length;if(a>1||a>0&&c>0)throw new $(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends hp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return vb(e._query,n),new er(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=Du(e.firestore);return function(i,a,c,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dx(m,h);const N=[];for(const k of m)N.push(ux(u,i,k));p={arrayValue:{values:N}}}else p=ux(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dx(m,h),p=RP(c,a,m,h==="in"||h==="not-in");return Pe.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ki(t,e,n){const r=e,s=Rs("where",t);return Mu._create(s,r,n)}class fp extends dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)vb(a,u),a=sf(a,u)}(e._query,n),new er(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mp extends hp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new va(i,a)}(e._query,this._field,this._direction);return new er(e.firestore,e.converter,sR(e._query,n))}}function nn(t,e="asc"){const n=e,r=Rs("orderBy",t);return mp._create(r,n)}class pp extends hp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pp(e,n,r)}_apply(e){return new er(e.firestore,e.converter,Fc(e._query,this._limit,this._limitType))}}function Go(t){return kk("limit",t),pp._create("limit",t,"F")}function ux(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new $(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&n.indexOf("/")!==-1)throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(he.fromString(n));if(!W.isDocumentKey(r))throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ny(t,new W(r))}if(n instanceof je)return Ny(t,n._key);throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xu(n)}.`)}function dx(t,e){if(!Array.isArray(t)||t.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vb(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function _b(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xs extends yb{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",xs._jsonSchema={type:De("string",xs._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class ec extends xs{data(e={}){return super.data(e)}}class vs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ec(this._firestore,this._userDataWriter,r.key,r,new Ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ro(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new ec(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ro(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:LP(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs._jsonSchemaVersion="firestore/querySnapshot/1.0",vs._jsonSchema={type:De("string",vs._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){t=kt(t,je);const e=kt(t.firestore,Wr),n=Au(e);return xP(n,t._key).then(r=>wb(e,t,r))}function xr(t){t=kt(t,er);const e=kt(t.firestore,Wr),n=Au(e),r=new up(e);return xb(t._query),vP(n,t._query).then(s=>new vs(e,r,t,s))}function VP(t,e,n){t=kt(t,je);const r=kt(t.firestore,Wr),s=_b(t.converter,e),i=Du(r);return gp(r,[hb(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function pf(t,e,n,...r){t=kt(t,je);const s=kt(t.firestore,Wr),i=Du(s);let a;return a=typeof(e=$e(e))=="string"||e instanceof op?kP(i,"updateDoc",t._key,e,n,r):CP(i,"updateDoc",t._key,e),gp(s,[a.toMutation(t._key,en.exists(!0))])}function Sl(t,e){const n=kt(t.firestore,Wr),r=ys(t),s=_b(t.converter,e),i=Du(t.firestore);return gp(n,[hb(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function Mr(t,...e){var d,h,m;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||cx(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(cx(e[r])){const p=e[r];e[r]=(d=p.next)==null?void 0:d.bind(p),e[r+1]=(h=p.error)==null?void 0:h.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,a,c;if(t instanceof je)a=kt(t.firestore,Wr),c=bu(t._key.path),i={next:p=>{e[r]&&e[r](wb(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=kt(t,er);a=kt(p.firestore,Wr),c=p._query;const x=new up(a);i={next:N=>{e[r]&&e[r](new vs(a,x,p,N))},error:e[r+1],complete:e[r+2]},xb(t._query)}const u=Au(a);return yP(u,c,s,i)}function gp(t,e){const n=Au(t);return _P(n,e)}function wb(t,e,n){const r=n.docs.get(e._key),s=new up(t);return new xs(t,s,e._key,r,new Ro(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){xk(Fi),Ei(new Is("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Wr(new wk(r.getProvider("auth-internal")),new Nk(a,r.getProvider("app-check-internal")),$k(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Pr(ax,lx,e),Pr(ax,lx,"esm2020")})();var OP="firebase",FP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(OP,FP,"app");const UP={apiKey:"AIzaSyCeciuTykJTnWZvTHVqdSMdNg8n7u0jHQY",authDomain:"fahis-doctor-portal.firebaseapp.com",projectId:"fahis-doctor-portal",storageBucket:"fahis-doctor-portal.firebasestorage.app",messagingSenderId:"604602847104",appId:"1:604602847104:web:1ffb35858c2d7bcb393b65",measurementId:"G-57BK5SKSN6"},bb=i_(UP),wo=gk(bb),ge=NP(bb),Eb=()=>{const[t,e]=I.useState(!1),[n,r]=I.useState(null),[s,i]=I.useState(null);return I.useEffect(()=>{let d=null;const h=iC(wo,m=>{if(d&&(d(),d=null),!m){r(null),e(!1);return}const p=ys(ge,"doctors",m.uid);d=Mr(p,x=>{if(!x.exists()){r(null),e(!1);return}const N={id:x.id,...x.data()};N.status==="Active"?(r(N),e(!0)):(console.warn("Doctor profile not active"),r(null),e(!1))},x=>{console.error("Doctor snapshot error:",x),r(null),e(!1)})});return()=>{h(),d&&d()}},[]),{isAuthenticated:t,currentDoctor:n,authError:s,login:async(d,h)=>{i(null);try{const p=(await nC(wo,d,h)).user,x=ys(ge,"doctors",p.uid),N=await MP(x);if(!N.exists())return i("Doctor profile not found"),!1;const k=N.data();return k.status!=="Active"?(i("No active profile found. Please contact admin."),await ny(wo),!1):(r(k),e(!0),!0)}catch(m){return console.error("Login error:",m),i(m instanceof Error?m.message:"Login failed. Please try again."),!1}},register:async(d,h)=>{i(null);try{const p=(await tC(wo,d.email,h)).user,x={...d,id:p.uid,joinedDate:new Date().toISOString(),status:"Active"};return await VP(ys(ge,"doctors",p.uid),x),r(x),e(!0),console.log("Registration successful:",x),!0}catch(m){return console.error("Registration error:",m),i(m instanceof Error?m.message:"Registration failed. Please try again."),!1}},logout:async()=>{await ny(wo),r(null),e(!1),i(null)}}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=I.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},h)=>I.createElement("svg",{ref:h,...zP,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$P(t)}`,c].join(" "),...d},[...e.map(([m,p])=>I.createElement(m,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=G("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=G("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=G("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=G("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=G("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=G("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=G("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=G("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=G("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=G("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=G("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=G("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=G("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=G("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),g4=({type:t,onClose:e})=>{const n=()=>{switch(t){case"privacy":return{title:"Privacy Policy for Medical Professionals",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Ye,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Last Updated: January 2025 | Version 2.1"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"Data Protection & Medical Privacy"}),o.jsx("p",{className:"mb-4",children:"FAHM BioTech is committed to protecting the privacy and confidentiality of all medical professionals using the Fahis thermography platform. This policy outlines our comprehensive approach to data protection in compliance with Saudi Personal Data Protection Law (PDPL)."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Information We Collect:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Professional Credentials:"})," Medical license numbers, certifications, institutional affiliations"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Contact Information:"})," Email, phone, professional address for platform communication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Platform Usage:"})," Login times, feature usage, performance analytics (anonymized)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Medical Data:"})," Thermography analysis, reports, consultation records"]})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Data Protection Measures:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"AES-256 encryption for all data in transit and at rest"}),o.jsx("li",{children:"Multi-factor authentication and role-based access controls"}),o.jsx("li",{children:"Regular security audits and penetration testing"}),o.jsx("li",{children:"PDPL compliant data handling and storage procedures"}),o.jsx("li",{children:"Secure data centers with 24/7 monitoring"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Your Rights:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Access and review your personal data"}),o.jsx("li",{children:"Request corrections to inaccurate information"}),o.jsx("li",{children:"Data portability and export capabilities"}),o.jsx("li",{children:"Account deletion and data removal (subject to medical record requirements)"})]}),o.jsx("div",{className:"bg-purple-50 p-4 rounded-lg mt-6",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Contact our Privacy Officer:"}),o.jsx("br",{}),"Email: privacy@fahmbiotech.com",o.jsx("br",{}),"Phone: +966 55 710 1103",o.jsx("br",{}),"Address: FAHM BioTech, Riyadh, Saudi Arabia"]})})]})]})};case"terms":return{title:"Terms of Service - Medical Platform",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(et,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Effective Date: January 2025 | Governing Law: Kingdom of Saudi Arabia"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"Professional Usage Agreement"}),o.jsx("p",{className:"mb-4",children:"By accessing the Fahis thermography platform, you agree to these terms of service and commit to professional, ethical usage in compliance with medical standards and Saudi healthcare regulations."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Medical Professional Requirements:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Valid medical license in Saudi Arabia or internationally recognized jurisdiction"}),o.jsx("li",{children:"Current professional liability insurance coverage"}),o.jsx("li",{children:"Specialized training in medical imaging interpretation (recommended)"}),o.jsx("li",{children:"Compliance with local medical ethics and regulations"}),o.jsx("li",{children:"Commitment to patient confidentiality and HIPAA-equivalent standards"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Platform Usage Guidelines:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Use exclusively for legitimate medical diagnostic purposes"}),o.jsx("li",{children:"No sharing of login credentials with unauthorized personnel"}),o.jsx("li",{children:"Immediate reporting of security incidents or breaches"}),o.jsx("li",{children:"Compliance with data protection and privacy requirements"}),o.jsx("li",{children:"Professional conduct in all platform interactions"})]}),o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Important Medical Disclaimer:"}),o.jsx("p",{className:"text-red-800 text-sm",children:"Thermography is an adjunctive screening tool and should not replace standard mammography or clinical examination. Platform recommendations are advisory only. Medical professionals retain full responsibility for all clinical decisions and patient care."})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Liability and Limitations:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"FAHM BioTech provides technology platform only, not medical advice"}),o.jsx("li",{children:"Healthcare providers responsible for clinical interpretation"}),o.jsx("li",{children:"Professional indemnity insurance required for platform users"}),o.jsx("li",{children:"Disputes resolved through Saudi Arabian arbitration"})]})]})]})};case"pdpl":return{title:"Saudi PDPL Compliance Information",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Ye,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Saudi Personal Data Protection Law Compliance | Updated January 2025"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"PDPL Compliance Framework"}),o.jsx("p",{className:"mb-4",children:"The Fahis thermography platform is fully compliant with the Saudi Personal Data Protection Law (PDPL), ensuring the highest standards of data protection for medical professionals and patient information."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Compliance Measures:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Data Minimization:"})," We collect only necessary data for medical purposes"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Consent Management:"})," Clear consent mechanisms for all data processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Data Subject Rights:"})," Full support for access, correction, and deletion rights"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Security Measures:"})," Advanced encryption and security protocols"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Data Localization:"})," Medical data stored within Saudi Arabia when required"]})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Your Rights Under PDPL:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Right to be informed about data processing"}),o.jsx("li",{children:"Right to access your personal data"}),o.jsx("li",{children:"Right to rectification of inaccurate data"}),o.jsx("li",{children:"Right to erasure (right to be forgotten)"}),o.jsx("li",{children:"Right to restrict processing"}),o.jsx("li",{children:"Right to data portability"}),o.jsx("li",{children:"Right to object to processing"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Data Processing Legal Basis:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Legitimate Interest:"})," Platform security and medical service provision"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Contractual Necessity:"})," Service delivery and platform functionality"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Legal Compliance:"})," Meeting regulatory and medical record requirements"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vital Interests:"})," Emergency medical situations and patient safety"]})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Contact Data Protection Officer:"}),o.jsxs("p",{className:"text-purple-800 text-sm",children:["For PDPL-related inquiries or to exercise your rights:",o.jsx("br",{}),"Email: dpo@fahmbiotech.com",o.jsx("br",{}),"Phone: +966 55 710 1103",o.jsx("br",{}),"Address: FAHM BioTech, Riyadh, Saudi Arabia"]})]}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"External Resources:"}),o.jsxs("p",{className:"text-blue-800 text-sm",children:["Learn more about Saudi PDPL: ",o.jsx("br",{}),o.jsx("a",{href:"https://sdaia.gov.sa/en/PDPL/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"Official PDPL Information (SDAIA)"})]})]})]})]})};default:return{title:"",content:null}}},{title:r,content:s}=n();return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-purple-900",children:r}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none transition-colors cursor-pointer active:scale-95","aria-label":"Close modal",children:o.jsx(vp,{size:24})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 180px)"},children:s}),o.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0",children:[o.jsx("div",{className:"text-sm text-gray-500 text-center sm:text-left",children:" 2025 FAHM BioTech LLC | Licensed Medical Technology"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("a",{href:"https://fahmbiotech.com/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-purple-600 hover:text-purple-700 underline transition-colors cursor-pointer",children:"Visit FAHM BioTech Website"}),o.jsx("button",{onClick:e,className:"bg-purple-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:"Close"})]})]})})]})})},kb=({variant:t})=>{const[e,n]=I.useState(null),r=a=>{n(a)},s=()=>{window.open("/medical-guidelines","_blank")},i=()=>{window.location.href="/contact-support"};return o.jsxs(o.Fragment,{children:[o.jsxs("footer",{className:"bg-purple-50 border-t border-purple-200 mt-auto relative z-50",children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(Vu,{size:20,className:"mr-2"}),"Resources"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:s,className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base cursor-pointer hover:underline active:scale-95",title:"Thermography Standards (Saudi MOH)",children:[o.jsx(et,{size:16,className:"mr-2"}),"Medical Guidelines"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>window.open("/training-materials","_blank"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95",title:"Interactive Case Library",children:[o.jsx(Nb,{size:16,className:"mr-2"}),"Interactive Case Library"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>window.open("/scan-interpretation-help","_blank"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95",title:"Quick Reference + Recent Research",children:[o.jsx(Un,{size:16,className:"mr-2"}),"Scan Interpretation Help"]})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(XP,{size:20,className:"mr-2"}),"Support"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:i,className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Fn,{size:16,className:"mr-2"}),"Contact Support"]})}),o.jsxs("li",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[o.jsxs("div",{className:"flex items-center text-red-800",children:[o.jsx(Oe,{size:16,className:"mr-2 text-red-600"}),o.jsx("span",{className:"font-semibold text-base",children:"Emergency Protocol:"})]}),o.jsxs("p",{className:"text-red-700 text-sm mt-1 ml-6",children:["In case of emergency, call ",o.jsx("strong",{children:"997"})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(Ye,{size:20,className:"mr-2"}),"Legal"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("privacy"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(et,{size:16,className:"mr-2"}),"Privacy Policy for Medical Professionals"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("terms"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(et,{size:16,className:"mr-2"}),"Terms of Service"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("pdpl"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Ye,{size:16,className:"mr-2"}),"Saudi PDPL Compliance Info"]})})]})]})]})}),o.jsx("div",{className:"bg-purple-900 text-white",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-base font-medium",children:" 2025 Fahis Thermography Platform  Compliant with Saudi MOH & PDPL"})})})})]}),e&&o.jsx(g4,{type:e,onClose:()=>n(null)})]})},y4=({onLogin:t,onSwitchToRegister:e,authError:n})=>{const[r,s]=I.useState(""),[i,a]=I.useState(""),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[m,p]=I.useState(""),x=async N=>{N.preventDefault(),h(!0),p("");try{await t(r,i)||p(n||"Invalid email, password, or inactive profile")}catch(k){p(k instanceof Error?k.message:"Login failed. Please try again.")}finally{h(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white flex flex-col relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:o.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("defs",{children:o.jsxs("pattern",{id:"thermography-pattern",x:"0",y:"0",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:[o.jsx("circle",{cx:"30",cy:"30",r:"2",fill:"#7c3aed"}),o.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"#5b21b6"}),o.jsx("circle",{cx:"45",cy:"45",r:"1",fill:"#a855f7"})]})}),o.jsx("rect",{width:"100%",height:"100%",fill:"url(#thermography-pattern)"})]})}),o.jsx("header",{className:"bg-white/80 backdrop-blur-sm shadow-sm border-b border-gray-100 relative z-10",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"flex items-center py-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl flex items-center justify-center shadow-sm",children:o.jsx(Un,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Thermography Platform"})]})]})})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative z-10",children:o.jsxs("div",{className:"max-w-7xl w-full flex items-center justify-center gap-16",children:[o.jsx("div",{className:"hidden lg:block max-w-md",children:o.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-8 border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:o.jsx(Un,{size:24,className:"text-purple-600"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Medical Services"}),o.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Comprehensive healthcare solutions"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Thermography Review"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Advanced thermal imaging analysis for early detection"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Patient Management"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Comprehensive patient records and history tracking"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Risk Assessment"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Professional risk evaluation and classification"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Medical Reports"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Detailed diagnostic reports and documentation"})]})]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Trusted by healthcare professionals"})})]})}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-8 border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:o.jsx(Un,{size:32,className:"text-purple-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doctor Portal"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your medical account"})]}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",required:!0,value:r,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-lg",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:c?"text":"password",required:!0,value:i,onChange:N=>a(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-lg",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3  top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?o.jsx(gf,{size:20}):o.jsx(qt,{size:20})})]})]}),(m||n)&&o.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3",children:o.jsx("p",{className:"text-red-600 text-sm",children:m||n})}),o.jsx("button",{type:"submit",disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-medium focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl",children:d?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",o.jsx("button",{onClick:e,className:"font-medium text-purple-600 hover:text-purple-700 transition-colors duration-200",children:"Register"})]})})]})]})}),o.jsx("div",{className:"relative z-10",children:o.jsx(kb,{variant:"login"})})]})},x4={id:"other",name:"Other"},Rb=()=>{const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,i]=I.useState(null);return I.useEffect(()=>{(async()=>{try{const c=Ve(ge,"hospitals"),u=bn(c,nn("name")),m=[...(await xr(u)).docs.map(p=>({id:p.id,name:p.data().name})).filter(p=>p.name.toLowerCase()!=="other"),x4];e(m)}catch(c){console.error("Error fetching hospitals:",c),i("Failed to load hospitals")}finally{r(!1)}})()},[]),{hospitals:t,loading:n,error:s}},Ab=()=>{const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,i]=I.useState(null);return I.useEffect(()=>{(async()=>{try{const c=Ve(ge,"medicalSpecialities"),u=bn(c,nn("name")),h=(await xr(u)).docs.map(m=>({id:m.id,name:m.data().name}));e(h)}catch(c){console.error("Error fetching medical specialities:",c),i("Failed to load medical specialities")}finally{r(!1)}})()},[]),{medicalSpecialty:t,loading:n,error:s}};let v4={data:""},_4=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||v4},w4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,b4=/\/\*[^]*?\*\/|  +/g,hx=/\n+/g,vr=(t,e)=>{let n="",r="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?vr(a,i):i+"{"+vr(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=vr(a,e?e.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=vr.p?vr.p(i,a):i+":"+a+";")}return n+(e&&s?e+"{"+s+"}":s)+r},jn={},Pb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Pb(t[n]);return e}return t},E4=(t,e,n,r,s)=>{let i=Pb(t),a=jn[i]||(jn[i]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(i));if(!jn[a]){let u=i!==t?t:(d=>{let h,m,p=[{}];for(;h=w4.exec(d.replace(b4,""));)h[4]?p.shift():h[3]?(m=h[3].replace(hx," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][h[1]]=h[2].replace(hx," ").trim();return p[0]})(t);jn[a]=vr(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let c=n&&jn.g?jn.g:null;return n&&(jn.g=jn[a]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(jn[a],e,r,c),a},N4=(t,e,n)=>t.reduce((r,s,i)=>{let a=e[i];if(a&&a.call){let c=a(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;a=u?"."+u:c&&typeof c=="object"?c.props?"":vr(c,""):c===!1?"":c}return r+s+(a??"")},"");function Fu(t){let e=this||{},n=t.call?t(e.p):t;return E4(n.unshift?n.raw?N4(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,_4(e.target),e.g,e.o,e.k)}let Db,xf,vf;Fu.bind({g:1});let Yn=Fu.bind({k:1});function T4(t,e,n,r){vr.p=e,Db=t,xf=n,vf=r}function es(t,e){let n=this||{};return function(){let r=arguments;function s(i,a){let c=Object.assign({},i),u=c.className||s.className;n.p=Object.assign({theme:xf&&xf()},c),n.o=/ *go\d+/.test(u),c.className=Fu.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),vf&&d[0]&&vf(c),Db(d,c)}return s}}var I4=t=>typeof t=="function",Qc=(t,e)=>I4(t)?t(e):t,j4=(()=>{let t=0;return()=>(++t).toString()})(),Lb=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),S4=20,_p="default",Mb=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return Mb(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},tc=[],Vb={toasts:[],pausedAt:void 0,settings:{toastLimit:S4}},mn={},Ob=(t,e=_p)=>{mn[e]=Mb(mn[e]||Vb,t),tc.forEach(([n,r])=>{n===e&&r(mn[e])})},Fb=t=>Object.keys(mn).forEach(e=>Ob(t,e)),C4=t=>Object.keys(mn).find(e=>mn[e].toasts.some(n=>n.id===t)),Uu=(t=_p)=>e=>{Ob(e,t)},k4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R4=(t={},e=_p)=>{let[n,r]=I.useState(mn[e]||Vb),s=I.useRef(mn[e]);I.useEffect(()=>(s.current!==mn[e]&&r(mn[e]),tc.push([e,r]),()=>{let a=tc.findIndex(([c])=>c===e);a>-1&&tc.splice(a,1)}),[e]);let i=n.toasts.map(a=>{var c,u,d;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((c=t[a.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((u=t[a.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||k4[a.type],style:{...t.style,...(d=t[a.type])==null?void 0:d.style,...a.style}}});return{...n,toasts:i}},A4=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||j4()}),qa=t=>(e,n)=>{let r=A4(e,t,n);return Uu(r.toasterId||C4(r.id))({type:2,toast:r}),r.id},Fe=(t,e)=>qa("blank")(t,e);Fe.error=qa("error");Fe.success=qa("success");Fe.loading=qa("loading");Fe.custom=qa("custom");Fe.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Uu(e)(n):Fb(n)};Fe.dismissAll=t=>Fe.dismiss(void 0,t);Fe.remove=(t,e)=>{let n={type:4,toastId:t};e?Uu(e)(n):Fb(n)};Fe.removeAll=t=>Fe.remove(void 0,t);Fe.promise=(t,e,n)=>{let r=Fe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Qc(e.success,s):void 0;return i?Fe.success(i,{id:r,...n,...n==null?void 0:n.success}):Fe.dismiss(r),s}).catch(s=>{let i=e.error?Qc(e.error,s):void 0;i?Fe.error(i,{id:r,...n,...n==null?void 0:n.error}):Fe.dismiss(r)}),t};var P4=1e3,D4=(t,e="default")=>{let{toasts:n,pausedAt:r}=R4(t,e),s=I.useRef(new Map).current,i=I.useCallback((m,p=P4)=>{if(s.has(m))return;let x=setTimeout(()=>{s.delete(m),a({type:4,toastId:m})},p);s.set(m,x)},[]);I.useEffect(()=>{if(r)return;let m=Date.now(),p=n.map(x=>{if(x.duration===1/0)return;let N=(x.duration||0)+x.pauseDuration-(m-x.createdAt);if(N<0){x.visible&&Fe.dismiss(x.id);return}return setTimeout(()=>Fe.dismiss(x.id,e),N)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[n,r,e]);let a=I.useCallback(Uu(e),[e]),c=I.useCallback(()=>{a({type:5,time:Date.now()})},[a]),u=I.useCallback((m,p)=>{a({type:1,toast:{id:m,height:p}})},[a]),d=I.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),h=I.useCallback((m,p)=>{let{reverseOrder:x=!1,gutter:N=8,defaultPosition:k}=p||{},A=n.filter(w=>(w.position||k)===(m.position||k)&&w.height),b=A.findIndex(w=>w.id===m.id),_=A.filter((w,D)=>D<b&&w.visible).length;return A.filter(w=>w.visible).slice(...x?[_+1]:[0,_]).reduce((w,D)=>w+(D.height||0)+N,0)},[n]);return I.useEffect(()=>{n.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let p=s.get(m.id);p&&(clearTimeout(p),s.delete(m.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:u,startPause:c,endPause:d,calculateOffset:h}}},L4=Yn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,M4=Yn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,V4=Yn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,O4=es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${L4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${M4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${V4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,F4=Yn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,U4=es("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${F4} 1s linear infinite;
`,z4=Yn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$4=Yn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,B4=es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$4} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,H4=es("div")`
  position: absolute;
`,q4=es("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,W4=Yn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,G4=es("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${W4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,K4=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?I.createElement(G4,null,e):e:n==="blank"?null:I.createElement(q4,null,I.createElement(U4,{...r}),n!=="loading"&&I.createElement(H4,null,n==="error"?I.createElement(O4,{...r}):I.createElement(B4,{...r})))},Q4=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Y4=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,J4="0%{opacity:0;} 100%{opacity:1;}",X4="0%{opacity:1;} 100%{opacity:0;}",Z4=es("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,e6=es("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,t6=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=Lb()?[J4,X4]:[Q4(n),Y4(n)];return{animation:e?`${Yn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Yn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},n6=I.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?t6(t.position||e||"top-center",t.visible):{opacity:0},i=I.createElement(K4,{toast:t}),a=I.createElement(e6,{...t.ariaProps},Qc(t.message,t));return I.createElement(Z4,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:a}):I.createElement(I.Fragment,null,i,a))});T4(I.createElement);var r6=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=I.useCallback(a=>{if(a){let c=()=>{let u=a.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return I.createElement("div",{ref:i,className:e,style:n},s)},s6=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Lb()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},i6=Fu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cl=16,o6=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:a,containerClassName:c})=>{let{toasts:u,handlers:d}=D4(n,i);return I.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Cl,left:Cl,right:Cl,bottom:Cl,pointerEvents:"none",...a},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let m=h.position||e,p=d.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),x=s6(m,p);return I.createElement(r6,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?i6:"",style:x},h.type==="custom"?Qc(h.message,h):s?s(h):I.createElement(n6,{toast:h,position:m}))}))},Vr=Fe;const a6=({onRegister:t,onSwitchToLogin:e})=>{const[n,r]=I.useState({fullName:"",email:"",password:"",confirmPassword:"",medicalLicenseNumber:"",medicalSpecialty:"",hospitalAffiliation:"",ibanNumber:"",phoneNumber:"",yearsOfExperience:"",status:"",role:""}),[s,i]=I.useState(!1),[a,c]=I.useState(!1),[u,d]=I.useState(!1),[h,m]=I.useState(""),{hospitals:p,loading:x,error:N}=Rb(),{medicalSpecialty:k,loading:A,error:b}=Ab(),_=/^\+[1-9]\d{6,14}$/,w=async L=>{if(L.preventDefault(),console.log("FORM SUBMITTED"),m(""),n.password!==n.confirmPassword){m("Passwords do not match");return}if(!n.yearsOfExperience||parseFloat(n.yearsOfExperience)<1){m("Years of experience must be at least 1");return}if(n.password.length<6){m("Password must be at least 6 characters"),d(!1);return}if(!_.test(n.phoneNumber)){m("Please enter a valid phone number (e.g. +966501234567)");return}d(!0);try{const V={fullName:n.fullName,email:n.email,medicalLicenseNumber:n.medicalLicenseNumber,medicalSpecialty:n.medicalSpecialty,hospitalAffiliation:n.hospitalAffiliation,ibanNumber:n.ibanNumber,phoneNumber:n.phoneNumber,yearsOfExperience:n.yearsOfExperience,status:"active",role:"doctor"};await t(V,n.password)?Vr.success("Registration Successfull."):(Vr.error("Registration failed. Please try again."),m("Registration failed. Please try again."))}catch(V){Vr.error("Registration failed. Please try again."),m(V instanceof Error?V.message:"Registration failed. Please try again.")}finally{d(!1)}},D=L=>{const{name:V,value:E}=L.target;r(v=>({...v,[V]:V==="yearsOfExperience"?parseInt(E)||0:E}))};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-2xl w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:o.jsx(Un,{size:32,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doctor Registration"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Join the Fahis medical network"})]}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ha,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"fullName",required:!0,value:n.fullName,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"Dr. John Smith"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",required:!0,value:n.email,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:s?"text":"password",name:"password",required:!0,value:n.password,onChange:D,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:s?o.jsx(gf,{size:20}):o.jsx(qt,{size:20})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",name:"confirmPassword",required:!0,value:n.confirmPassword,onChange:D,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:a?o.jsx(gf,{size:20}):o.jsx(qt,{size:20})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical License Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(et,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"medicalLicenseNumber",required:!0,value:n.medicalLicenseNumber,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"SAU-MD-YYYY-XXXX"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Specialty"}),b&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:b}),o.jsxs("select",{name:"medicalSpecialty",required:!0,value:n.medicalSpecialty,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",children:[o.jsx("option",{value:"",children:"Select your specialty"}),A&&o.jsx("option",{disabled:!0,children:"Loading Medical Specialities..."}),!A&&k.map(L=>o.jsx("option",{value:L.name,children:L.name},L.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hospital Affiliation"}),o.jsxs("div",{className:"relative",children:[o.jsx(WP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),N&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:N}),o.jsxs("select",{name:"hospitalAffiliation",required:!0,value:n.hospitalAffiliation,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",children:[o.jsx("option",{value:"",children:"Select hospital"}),x&&o.jsx("option",{disabled:!0,children:"Loading hospitals..."}),!x&&p.map(L=>o.jsx("option",{value:L.name,children:L.name},L.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(QP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"ibanNumber",required:!0,value:n.ibanNumber,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"SA44 2000 0001 2345 6789 1234"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ea,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phoneNumber",required:!0,value:n.phoneNumber,onChange:D,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 transition-colors
                      ${n.phoneNumber.length===0||_.test(n.phoneNumber)?"border-gray-300 focus:ring-violet-500":"border-red-300 focus:ring-red-500"}
                    `,placeholder:"+966 50 123 4567"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Experience"}),o.jsx("input",{type:"number",name:"yearsOfExperience",required:!0,min:"1",value:n.yearsOfExperience,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"5"})]})]}),h&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsx("p",{className:"text-red-600 text-sm",children:h})}),o.jsx("button",{type:"submit",disabled:u,className:"w-full bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",o.jsx("button",{onClick:e,className:"text-violet-600 hover:text-violet-700 font-medium",children:"Sign in here"})]})})]})})})},l6=({doctor:t,onLogout:e})=>o.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-50 shadow-lg relative",children:[o.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-purple-500 to-purple-600 text-white px-3 py-1 rounded-lg text-xs font-medium shadow-sm",children:"Fahis Doctor Portal  v1.2  Demo for Stakeholders"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Un,{className:"w-8 h-8 text-purple-600"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Fahis"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Medical Portal"})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-purple-600 transition-colors",children:[o.jsx(qP,{size:20}),o.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:o.jsx(Ha,{size:16,className:"text-purple-600"})}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"font-medium text-gray-800",children:t.fullName}),o.jsx("p",{className:"text-gray-600",children:t.medicalSpecialty})]})]}),o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",children:[o.jsx(t4,{size:16}),o.jsx("span",{className:"text-sm",children:"Logout"})]})]})]})]})]}),c6=[{name:"Dashboard",href:"/dashboard",icon:e4},{name:"Patients",href:"/patients",icon:kn},{name:"Profile",href:"/profile",icon:Ha},{name:"Payments",href:"/payments",icon:Tb},{name:"Risk Scale Reference",href:"/risk-scale",icon:et}],u6=()=>o.jsx("div",{className:"w-64 bg-white border-r border-gray-100 min-h-screen",children:o.jsx("nav",{className:"mt-8 px-4",children:o.jsx("ul",{className:"space-y-2",children:c6.map(t=>o.jsx("li",{children:o.jsxs(G1,{to:t.href,className:({isActive:e})=>`group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors ${e?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx(t.icon,{size:18,className:"mr-3 flex-shrink-0"}),t.name]})},t.name))})})}),d6=({doctor:t,onLogout:e,children:n})=>o.jsxs("div",{className:"min-h-screen bg-purple-50 flex flex-col",children:[o.jsx(l6,{doctor:t,onLogout:e}),o.jsxs("div",{className:"flex flex-1",children:[o.jsx(u6,{}),o.jsx("main",{className:"flex-1 p-6",children:n})]}),o.jsx(kb,{variant:"dashboard"})]}),h6={purple:"bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600"},kl=({title:t,value:e,icon:n,trend:r,color:s})=>o.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl hover:border-purple-200 hover:-translate-y-1 transition-all duration-200 group",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-medium text-gray-600 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t}),o.jsx("p",{className:"text-4xl font-bold text-gray-900 group-hover:text-purple-600 transition-colors duration-200",style:{fontFamily:"Inter, system-ui, sans-serif"},children:e}),r&&o.jsx("p",{className:"text-base text-purple-600 mt-2 font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r})]}),o.jsx("div",{className:`p-3 rounded-2xl transition-all duration-200 group-hover:scale-110 shadow-sm ${h6[s]}`,children:o.jsx(n,{size:24})})]})}),Ub={totalPatientsReviewed:127,totalReportsProcessed:284,pendingReviews:8,monthlyEarnings:14200,reportPaymentRate:50},f6=(t=5)=>{const[e,n]=I.useState([]),[r,s]=I.useState(!0),[i,a]=I.useState(null);return I.useEffect(()=>{const c=bn(Ve(ge,"patients"),ki("reviewed","==",!1),ki("thRiskLevel","!=",null),nn("lastVisit","desc"),Go(t)),u=Mr(c,d=>{const h=d.docs.map(m=>({id:m.id,...m.data()}));n(h),s(!1)},d=>{console.error(d),a("Failed to load recent cases"),s(!1)});return()=>u()},[t]),{recentCases:e,recentLoading:r,error:i}},m6=(t=5)=>{const[e,n]=I.useState([]),[r,s]=I.useState(!0),[i,a]=I.useState(null);return I.useEffect(()=>{const c=bn(Ve(ge,"patients"),ki("reviewed","==",!1),ki("thRiskLevel",">",3),nn("thRiskLevel","desc"),nn("lastVisit","desc"),Go(t)),u=Mr(c,d=>{const h=d.docs.map(m=>({id:m.id,...m.data()}));n(h),s(!1)},d=>{console.error(d),a("Failed to load urgent cases"),s(!1)});return()=>u()},[t]),{urgentCases:e,urgentLoading:r,error:i}},p6=()=>{const t=Ub,{recentCases:e,recentLoading:n}=f6(5),{urgentCases:r,urgentLoading:s}=m6(5),i=En(),a=d=>{if(!d)return"-";const h=d.toDate?d.toDate():new Date(d),m=h.getFullYear(),p=(h.getMonth()+1).toString().padStart(2,"0"),x=h.getDate().toString().padStart(2,"0");return`${m}-${p}-${x}`},c=d=>{switch(d){case 1:return["text-center p-3 bg-blue-100 rounded-lg","font-bold text-blue-800","Minimal thermal activity"];case 2:return["text-center p-3 bg-green-100 rounded-lg","font-bold text-green-800","Low thermal activity"];case 3:return["text-center p-3 bg-yellow-100 rounded-lg","font-bold text-yellow-800","Moderate patterns"];case 4:return["text-center p-3 bg-orange-100 rounded-lg","font-bold text-orange-800","Concerning patterns"];default:return["text-center p-3 bg-red-100 rounded-lg","font-bold text-red-800","High-risk patterns"]}},{currentDoctor:u}=Eb();return o.jsxs("div",{className:"space-y-8",children:[o.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:o.jsx("ol",{className:"flex items-center space-x-2",children:o.jsx("li",{children:o.jsx("span",{className:"text-gray-900 text-sm font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Dashboard"})})})}),o.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-white rounded-2xl p-6 border border-gray-100",children:o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-white rounded-2xl p-6 border border-purple-200",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Dashboard"}),o.jsxs("p",{className:"text-xl text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Welcome back, ",u==null?void 0:u.fullName]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(kl,{title:"Patients Reviewed",value:t.totalPatientsReviewed,icon:Sb,trend:"+12 this month",color:"purple"}),o.jsx(kl,{title:"Reports Processed",value:t.totalReportsProcessed,icon:BP,trend:"+28 this month",color:"purple"}),o.jsx(kl,{title:"Pending Reviews",value:t.pendingReviews,icon:Ou,color:"purple"}),o.jsx(kl,{title:"Monthly Earnings",value:`SAR ${t.monthlyEarnings.toLocaleString()}`,icon:Ye,trend:"+18% vs last month",color:"purple"})]}),r.length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-2xl shadow-sm border border-red-100 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Oe,{className:"text-red-600",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Urgent Flags"})]}),o.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-3 py-1 rounded-full",children:[r.length," urgent"]})]}),o.jsx("div",{className:"space-y-4",children:s?o.jsx("p",{className:"text-sm text-gray-500",children:"Loading urgent cases..."}):r.map(d=>o.jsxs("div",{onClick:()=>i(`/patients/${d.id}`),className:"cursor-pointer flex items-center justify-between p-4 bg-white rounded-xl border border-red-200 hover:shadow-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:d.fullName}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${c(d.thRiskLevel??5)[0]}`,children:o.jsxs("span",{className:`${c(d.thRiskLevel??5)[1]}`,children:["TH:",d.thRiskLevel]})}),"",o.jsxs("p",{className:"text-sm mt-0.5 text-gray-900 font-medium",children:["Last Visited :  ",o.jsx("span",{className:"text-sm mt-0.5 text-gray-900",children:a(d.lastVisit)})]})]})]}),o.jsxs("button",{onClick:h=>{h.stopPropagation(),i(`/patients/${d.id}`)},className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium",children:[o.jsx(qt,{size:14}),o.jsx("span",{children:"Review Scan"}),o.jsx(Gc,{size:14})]})]},d.id))})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Recent Cases"}),o.jsx(Cb,{className:"text-purple-500",size:20})]}),o.jsx("div",{className:"space-y-4",children:n?o.jsx("p",{className:"text-sm text-gray-500",children:"Loading recent cases..."}):e.map(d=>o.jsxs("div",{onClick:()=>i(`/patients/${d.id}`),className:"cursor-pointer flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl hover:from-purple-100 hover:to-purple-200 transition-all duration-200 cursor-pointer border hover:border-purple-300",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:d.fullName}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${c(d.thRiskLevel??5)[0]}`,children:o.jsxs("span",{className:`${c(d.thRiskLevel??5)[1]}`,children:["TH:",d.thRiskLevel]})}),!d.reviewedAt&&o.jsx("span",{className:"text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-800",children:"Review Pending"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:a(d.lastVisit)}),o.jsxs("div",{className:"flex",children:[o.jsx("span",{className:"text-gray-600 mt-0.5",style:{fontFamily:"Inter, system-ui, sans-serif"},children:c(d.thRiskLevel??5)[2]}),"",o.jsx(Gc,{size:16,className:"text-gray-400 mt-2 ml-auto"})]})]})]},d.id))})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Monthly Progress"}),o.jsx(Ba,{className:"text-purple-600",size:20})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Report Reviews"}),o.jsx("span",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"28/30 Target"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:o.jsx("div",{className:"h-3 rounded-full transition-all duration-500 ease-out bg-gradient-to-r from-purple-500 to-purple-600",style:{width:"93%"}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Payment Goal"}),o.jsx("span",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"SAR 14,200/15,000"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"95%"}})})]})]})]})]})]})},g6=({patient:t,onSelectPatient:e})=>{const n=i=>{if(!i)return"-";const a=i.toDate?i.toDate():new Date(i),c=a.getFullYear(),u=(a.getMonth()+1).toString().padStart(2,"0"),d=a.getDate().toString().padStart(2,"0");return`${c}-${u}-${d}`},r=i=>{let a="";switch(i>=1&&i<=2?a="Low":i==3?a="Medium":a="High",a){case"Low":return["text-green-700 bg-green-100",a];case"Medium":return["text-yellow-700 bg-yellow-100",a];case"High":return["text-red-700 bg-red-100",a];default:return["text-gray-700 bg-gray-100",a]}},s=i=>{if(!i)return 0;const a=new Date(i),c=new Date;let u=c.getFullYear()-a.getFullYear();const d=c.getMonth()-a.getMonth();return(d<0||d===0&&c.getDate()<a.getDate())&&u--,u};return o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl hover:border-purple-300 hover:-translate-y-1 transition-all duration-200 cursor-pointer group",onClick:()=>e(t.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-purple-600 transition-colors duration-200",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName}),o.jsxs("p",{className:"text-base text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["ID: ",t.patientId]})]}),o.jsxs("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${r(t.thRiskLevel)[0]}`,children:[r(t.thRiskLevel)[1]," Risk"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-base mb-4",children:[o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(Ba,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Age: ",s(t.dateOfBirth)]})]}),o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(et,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:[t.totalVisits," visits"]})]}),o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(yp,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Last: ",n(t.lastVisit)]})]}),o.jsx("div",{className:"flex items-center text-gray-600",children:o.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${t.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsxs("button",{className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-base font-medium transition-all duration-200 group-hover:shadow-lg group-hover:scale-105 shadow-md",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx(qt,{size:16}),o.jsx("span",{children:"View Patient"})]})})]})},y6=()=>{const[t,e]=I.useState([]),[n]=I.useState([]),[r,s]=I.useState(!0),[i,a]=I.useState(null),[c,u]=I.useState(""),[d,h]=I.useState("All");I.useEffect(()=>{const N=bn(Ve(ge,"patients"),ki("status","==","Active"),ki("lastVisit","!=",null),nn("lastVisit","desc"));s(!0);const k=Mr(N,A=>{const b=A.docs.map(_=>{const w=_.data();return{id:_.id,patientId:w.patientId||"",fullName:w.fullName||"",age:w.age||0,gender:w.gender==="Male"?"Male":"Female",dateOfBirth:w.dateOfBirth||"",contactNumber:w.contactNumber||"",lastVisit:w.lastVisit||"",totalVisits:w.totalVisits||0,thRiskLevel:w.thRiskLevel||0,status:w.status||"Active",role:"Patient"}});e(b),s(!1)},A=>{console.error(A),a("Failed to fetch patients"),s(!1)});return()=>k()},[]);const m=I.useMemo(()=>{const N={};for(const k of n)N[k.scanId]=k;return N},[n]),p=N=>N>=0&&N<2?"Low":N>=2&&N<4?"Medium":"High";return{patients:I.useMemo(()=>{const N=c.toLowerCase();return t.filter(k=>{const A=k.fullName.toLowerCase().includes(N)||k.patientId.toLowerCase().includes(N),b=d==="All"||p(k.thRiskLevel)===d;return A&&b})},[t,c,d]),allPatients:t,reports:n,loading:r,error:i,searchTerm:c,setSearchTerm:u,filterRisk:d,setFilterRisk:h,getReportById:N=>m[N]}},wp=({items:t})=>{const e=En(),n=r=>{r.onClick?r.onClick():r.href&&e(r.href,{replace:!0})};return o.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:o.jsx("ol",{className:"flex items-center space-x-2",children:t.map((r,s)=>o.jsxs(PE.Fragment,{children:[o.jsx("li",{children:r.isActive||!r.href&&!r.onClick?o.jsx("span",{className:"text-gray-900 text-lg font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r.label}):o.jsx("button",{onClick:()=>n(r),className:"text-gray-500 hover:text-purple-600 text-lg transition-colors",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r.label})}),s<t.length-1&&o.jsx(Gc,{size:16,className:"text-gray-400"})]},s))})})},x6=({onSelectPatient:t})=>{const{patients:e,searchTerm:n,setSearchTerm:r,filterRisk:s,setFilterRisk:i}=y6();return o.jsxs("div",{className:"space-y-8",children:[o.jsx(wp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",isActive:!0}]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Patients"}),o.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Manage your patient records and reviews"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(c4,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search patients...",value:n,onChange:a=>r(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-base",style:{fontFamily:"Inter, system-ui, sans-serif"}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(YP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsxs("select",{value:s,onChange:a=>i(a.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-base",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx("option",{value:"All",children:"All Risk Levels"}),o.jsx("option",{value:"Low",children:"Low Risk"}),o.jsx("option",{value:"Medium",children:"Medium Risk"}),o.jsx("option",{value:"High",children:"High Risk"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(a=>o.jsx(g6,{patient:a,onSelectPatient:t},a.id))}),e.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"No patients found matching your criteria."})})]})]})},v6=t=>{const[e,n]=I.useState([]),[r,s]=I.useState(!0);return I.useEffect(()=>{if(!t)return;const i=Ve(ge,"patients",t,"appointments"),a=Mr(i,async c=>{const u=[];for(const d of c.docs){const h=d.id,m=d.data(),p=Ve(ge,"patients",t,"appointments",h,"thermalScans"),x=Mr(p,async N=>{for(const k of N.docs){const A=k.data(),b=Ve(ge,"patients",t,"appointments",h,"thermalScans",k.id,"aiInferenceResults"),_=bn(b,nn("inferenceTimestamp","desc"));Mr(_,w=>{var L;const D=(L=w.docs[0])==null?void 0:L.data();u.push({patientId:t,appointmentId:h,scanId:k.id,appointmentDate:m.appointmentDate,scanTimestamp:A.scanTimestamp,scanStatus:A.scanStatus,scanImage1:A.scanImage1,scanImage2:A.scanImage2,scanImage3:A.scanImage3,thRiskLevel:(D==null?void 0:D.thRiskLevel)||0,decision:D==null?void 0:D.decision,detailedFindings:D==null?void 0:D.detailedFindings,reviewUpdatedAt:D==null?void 0:D.reviewUpdatedAt}),u.sort((V,E)=>new Date(E.scanTimestamp??0).getTime()-new Date(V.scanTimestamp??0).getTime()),n([...u]),s(!1)})}});return()=>x()}});return()=>a()},[t]),{reports:e,loading:r}},_6=({patient:t,onBack:e,onSelectReport:n})=>{const[r,s]=I.useState(null),{reports:i,loading:a}=v6(t.id),c=h=>{let m="";switch(h>=1&&h<=2?m="Low":h==3?m="Medium":m="High",m){case"Low":return["text-green-700 bg-green-100",m];case"Medium":return["text-yellow-700 bg-yellow-100",m];case"High":return["text-red-700 bg-red-100",m];default:return["text-gray-700 bg-gray-100",m]}},u=h=>{if(!h)return 0;const m=new Date(h),p=new Date;let x=p.getFullYear()-m.getFullYear();const N=p.getMonth()-m.getMonth();return(N<0||N===0&&p.getDate()<m.getDate())&&x--,x},d=h=>{if(!h)return"-";const m=h.toDate?h.toDate():new Date(h),p=m.getFullYear(),x=(m.getMonth()+1).toString().padStart(2,"0"),N=m.getDate().toString().padStart(2,"0");return`${p}-${x}-${N}`};return o.jsxs("div",{className:"space-y-8",children:[o.jsx(wp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",onClick:e},{label:t.fullName,isActive:!0}]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(Ri,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Patient Details"}),o.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center",children:o.jsx(Ha,{size:24,className:"text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName}),o.jsxs("p",{className:"text-sm text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["ID: ",t.patientId]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Age"}),o.jsxs("span",{className:"text-gray-900",children:[u(t.dateOfBirth)," years"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gender"}),o.jsx("span",{className:"text-gray-900",children:t.gender})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date of Birth"}),o.jsx("span",{className:"text-gray-900",children:t.dateOfBirth})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone"}),o.jsx("span",{className:"text-gray-900",children:t.contactNumber})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Last Visit"}),o.jsx("span",{className:"text-gray-900",children:d(t.lastVisit)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Visits"}),o.jsx("span",{className:"text-gray-900",children:t.totalVisits})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status"}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})]})]})]}),o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Visit History & Thermography Reports"}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[o.jsx(et,{size:16}),o.jsxs("span",{children:[i.length," reports"]})]})]}),!a&&i.length>0?o.jsx("div",{className:"space-y-4",children:i.sort((h,m)=>+new Date(m.scanTimestamp)-+new Date(h.scanTimestamp)).map((h,m)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer",onClick:()=>n(h.scanId,t.id,h.appointmentId),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ba,{className:"text-gray-400",size:16}),o.jsxs("span",{className:"font-medium text-gray-900",children:["Visit #",i.length-m,":"," ",d(h.scanTimestamp)]}),o.jsxs("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${c(h.thRiskLevel??0)[0]}`,children:["TH:",h.thRiskLevel??"-"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${h.scanStatus==="Completed"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:h.scanStatus}),o.jsx(qt,{className:"text-blue-600",size:16})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-700",children:["Decision:"," "]}),o.jsx("span",{className:h.decision==="Normal/Low Risk"?"text-green-600":"text-orange-600",children:h.decision??"-"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-700",children:["Reviewed:"," "]}),o.jsx("span",{className:"text-gray-600",children:d(h.reviewUpdatedAt)})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:h.detailedFindings??"-"})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"text-white font-medium text-sm flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#1488fc"},onMouseEnter:p=>p.currentTarget.style.backgroundColor="#0066cc",onMouseLeave:p=>p.currentTarget.style.backgroundColor="#1488fc",disabled:r===h.scanId,onClick:p=>{p.stopPropagation(),s(h.scanId),n(h.scanId,t.id,h.appointmentId)},children:r===h.scanId?o.jsx("span",{children:"Loading..."}):o.jsxs(o.Fragment,{children:[o.jsx(qt,{size:14}),o.jsx("span",{children:"Review"}),o.jsx(Ri,{className:"rotate-180",size:14})]})})})]},h.scanId))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(et,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:a&&o.jsxs("span",{children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"We're fetching the latest reports of your patient"}),o.jsx("p",{className:"text-gray-500",children:"This will just take a few moments"})]})}),!a&&o.jsxs("span",{children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Reports Available"}),o.jsx("p",{className:"text-gray-500",children:"This patient doesn't have any thermography reports yet."})]})]})]})]})]})},w6=[{level:1,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-500",textColor:"text-blue-700",icon:ne,title:"TH:1",description:"99% chance no cancer present",details:"Minimal thermal activity"},{level:2,color:"green",bgColor:"bg-green-50",borderColor:"border-green-500",textColor:"text-green-700",icon:ne,title:"TH:2",description:"99% chance no cancer present",details:"Low thermal activity"},{level:3,color:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-500",textColor:"text-yellow-700",icon:Oe,title:"TH:3",description:"Medium/average risk (1 in 7 chance)",details:"Moderate thermal patterns"},{level:4,color:"orange",bgColor:"bg-orange-50",borderColor:"border-orange-500",textColor:"text-orange-700",icon:yp,title:"TH:4",description:"Moderate to high risk",details:"Concerning thermal patterns"},{level:5,color:"red",bgColor:"bg-red-50",borderColor:"border-red-500",textColor:"text-red-700",icon:HP,title:"TH:5",description:"90% chance cancer present",details:"High-risk thermal patterns"}],b6=({selectedLevel:t,onLevelChange:e})=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Thermography Risk Scale"}),o.jsx("div",{className:"space-y-3",children:w6.map(n=>{const r=n.icon,s=t===n.level;return o.jsx("button",{onClick:()=>e(n.level),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${s?`border-blue-400 ${n.bgColor}`:"border-gray-200 hover:border-gray-300 bg-white"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(r,{size:20,className:s?n.textColor:"text-gray-400"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:`font-bold ${s?n.textColor:"text-gray-700"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.title}),o.jsx("span",{className:`text-xs ${s?n.textColor:"text-gray-500"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.details})]}),o.jsx("p",{className:`text-sm mt-1 ${s?n.textColor:"text-gray-600"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.description})]})]})},n.level)})})]}),E6=({greyScaleImage:t,colorScaleImage:e,newScanImage:n})=>{const[r,s]=I.useState(1),[i,a]=I.useState("grey"),[c,u]=I.useState({x:0,y:0}),[d,h]=I.useState(!1),[m,p]=I.useState({x:0,y:0}),[x,N]=I.useState(0),[k,A]=I.useState(!1);I.useEffect(()=>{n&&a("newScan")},[n]);const b=()=>s(C=>Math.min(C+.25,3)),_=()=>s(C=>Math.max(C-.25,.5)),w=()=>{s(1),u({x:0,y:0}),N(0)},D=()=>N(C=>C-90),L=()=>N(C=>C+90),V=()=>A(!k),E=C=>{r>1&&(h(!0),p({x:C.clientX-c.x,y:C.clientY-c.y}))},v=C=>{d&&r>1&&u({x:C.clientX-m.x,y:C.clientY-m.y})},T=()=>{h(!1)},S=i==="newScan"?n:i==="grey"?t:e,R=i==="grey"?{title:"Grey Scale Reference",desc:"White = Cool, Black = Hot"}:i==="color"?{title:"Color Scale Reference",desc:"Blue = Cool, Red = Hot"}:{title:"New Scan",desc:""};return o.jsxs("div",{className:`space-y-4 ${k?"fixed inset-0 z-50 bg-black p-4":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[!n&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>a("grey"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${i==="grey"?"text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-sm"}`,style:{backgroundColor:i==="grey"?"#1488fc":void 0,fontFamily:"Inter, system-ui, sans-serif"},children:"Grey Scale"}),o.jsx("button",{onClick:()=>a("color"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${i==="color"?"text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:{backgroundColor:i==="color"?"#1488fc":void 0,fontFamily:"Inter, system-ui, sans-serif"},children:"Color Scale"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:_,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},disabled:r<=.5,children:o.jsx(p4,{size:16})}),o.jsxs("span",{className:"text-sm text-gray-600 min-w-[4rem] text-center font-medium",children:[Math.round(r*100),"%"]}),o.jsx("button",{onClick:b,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},disabled:r>=3,children:o.jsx(m4,{size:16})}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx("button",{onClick:D,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Rotate Left",children:o.jsx(o4,{size:16})}),o.jsx("button",{onClick:L,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Rotate Right",children:o.jsx(a4,{size:16})}),o.jsx("button",{onClick:w,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Reset View",children:o.jsx(s4,{size:16})}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx("button",{onClick:V,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:k?"Exit Fullscreen":"Fullscreen",children:o.jsx(n4,{size:16})}),o.jsx("button",{className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Download Image",children:o.jsx(xp,{size:16})})]})]}),o.jsxs("div",{className:`relative bg-gray-100 rounded-lg overflow-hidden ${d?"cursor-grabbing":r>1?"cursor-grab":"cursor-default"}`,style:{height:k?"calc(100vh - 120px)":"500px"},onMouseDown:E,onMouseMove:v,onMouseUp:T,onMouseLeave:T,children:[o.jsx("div",{className:"flex h-full items-center justify-center p-4 select-none",children:o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[o.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg text-sm font-medium z-10",children:"DEMO SCAN - For Presentation Only"}),o.jsx("img",{src:S,alt:"Thermography Scan",className:"w-full h-full object-contain rounded-lg shadow-sm transition-all duration-200",style:{transform:`scale(${r}) translate(${c.x/r}px, ${c.y/r}px) rotate(${x}deg)`,transformOrigin:"center center"},draggable:!1})]})}),o.jsxs("div",{className:"absolute bottom-4 left-4 bg-white bg-opacity-95 backdrop-blur-sm rounded-lg p-3 shadow-lg border border-gray-200",children:[o.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:R.title}),o.jsx("p",{className:"text-xs text-gray-600",children:R.desc})]}),r!==1&&o.jsx("div",{className:"absolute top-4 right-4 bg-white bg-opacity-95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg border border-gray-200",children:o.jsxs("p",{className:"text-xs font-medium text-gray-700",children:[Math.round(r*100),"% ",r>1&&" Drag to pan"]})}),k&&o.jsx("button",{onClick:V,className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-all duration-200",children:o.jsx(vp,{size:20})})]})]})},N6=({doctor:t,onSaveReview:e})=>{var w,D;const n=Xn(),r=En(),s=(w=n.state)==null?void 0:w.report,i=(D=n.state)==null?void 0:D.patient,a=()=>r(-1),[c,u]=I.useState((s==null?void 0:s.thRiskLevel)||1),[d,h]=I.useState((s==null?void 0:s.decision)||""),[m,p]=I.useState({vascularPattern:(s==null?void 0:s.vascularPattern)||"",thermalSymmetry:(s==null?void 0:s.thermalSymmetry)||"",hotSpots:(s==null?void 0:s.hotSpots)||"",nippleTemperature:(s==null?void 0:s.nippleTemperature)||""}),[x,N]=I.useState((s==null?void 0:s.detailedFindings)||""),[k,A]=I.useState(!1);I.useEffect(()=>{console.log(" Entered ThermographyReview page"),console.log("Report Data : ",s),console.log("Patient ID:",i==null?void 0:i.patientId),console.log("Doctor ID:",t)},[t,i==null?void 0:i.patientId,s]),I.useEffect(()=>{(!s||!i)&&r("/patients")},[s,i,r]);const b=async()=>{if(A(!0),!s||!i){Vr.error("No report or patient data available"),A(!1);return}const L={patientId:i.id,appointmentId:s.appointmentId,scanId:s.scanId,decision:d,detailedFindings:x,hotSpots:m.hotSpots,nippleTemperature:m.nippleTemperature,thRiskLevel:c,vascularPattern:m.vascularPattern,thermalSymmetry:m.thermalSymmetry,reviewDoctorId:t.id,reviewUpdatedAt:le.fromDate(new Date),reviewStatus:"Completed"};try{await e(s.aiInferenceId,L),Vr.success("Review saved successfully!")}catch{Vr.error("Failed to save review. Please try again.")}A(!1)},_=L=>{if(!L)return"-";let V;if(L instanceof Date?V=L:"toDate"in L&&typeof L.toDate=="function"?V=L.toDate():"seconds"in L&&typeof L.seconds=="number"?V=new Date(L.seconds*1e3):V=new Date(L),isNaN(V.getTime()))return"-";const E=V.getFullYear(),v=(V.getMonth()+1).toString().padStart(2,"0"),T=V.getDate().toString().padStart(2,"0");return`${E}-${v}-${T}`};return o.jsxs("div",{className:"space-y-8",children:[o.jsx(wp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",onClick:a},{label:(i==null?void 0:i.fullName)||"Patient"},{label:"Review Scan",isActive:!0}]}),o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-50 to-white rounded-2xl p-6 border border-purple-200 shadow-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-purple-600 transition-colors rounded-xl hover:bg-purple-50",children:o.jsx(Ri,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold text-purple-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Thermography Review"}),o.jsxs("p",{className:"text-purple-700 text-xl",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[i==null?void 0:i.fullName," - ",_(s.scanTimestamp)]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("button",{onClick:b,disabled:k,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl text-lg",children:k?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Saving..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(l4,{size:18}),o.jsx("span",{children:"Save Review"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Thermography Images"}),s&&o.jsx(E6,{greyScaleImage:s.scanImage1Grey||s.scanImage1,colorScaleImage:s.scanImage1})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Clinical Findings"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Vascular Pattern Assessment"}),o.jsx("textarea",{value:m.vascularPattern,onChange:L=>p(V=>({...V,vascularPattern:L.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Describe vascular patterns observed..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Thermal Symmetry Evaluation"}),o.jsx("textarea",{value:m.thermalSymmetry,onChange:L=>p(V=>({...V,thermalSymmetry:L.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Evaluate thermal symmetry..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Hot Spot Identification"}),o.jsx("textarea",{value:m.hotSpots,onChange:L=>p(V=>({...V,hotSpots:L.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Identify and describe hot spots..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Nipple Temperature Comparison"}),o.jsx("textarea",{value:m.nippleTemperature,onChange:L=>p(V=>({...V,nippleTemperature:L.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Compare nipple temperatures..."})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Patient Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Patient ID"}),o.jsx("p",{className:"text-purple-900",children:i==null?void 0:i.patientId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Age"}),o.jsxs("p",{className:"text-purple-900",children:[i==null?void 0:i.age," years"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Visit Date"}),o.jsx("p",{className:"text-purple-900",children:_(s.scanCreatedAt)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Total Visits"}),o.jsx("p",{className:"text-purple-900",children:i==null?void 0:i.totalVisits})]})]})]}),o.jsx(b6,{selectedLevel:c,onLevelChange:u}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Assessment Decision"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("button",{onClick:()=>h("Normal/Low Risk"),className:`p-4 rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 ${d==="Normal/Low Risk"?"border-green-400 bg-gradient-to-r from-green-50 to-green-100 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx(ne,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Normal/Low Risk"})]}),o.jsxs("button",{onClick:()=>h("Requires Further Medical Evaluation"),className:`p-4 rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 ${d==="Requires Further Medical Evaluation"?"border-red-400 bg-gradient-to-r from-red-50 to-red-100 text-red-700":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx(yp,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Requires Further Evaluation"})]})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Detailed Findings"}),o.jsx("textarea",{value:x,onChange:L=>N(L.target.value),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:5,placeholder:"Write detailed findings here..."})]})]})]})]})},T6=()=>{const t=Ub,e=[{month:"December 2024",reports:28,amount:1400,status:"Current"},{month:"November 2024",reports:45,amount:2250,status:"Paid"},{month:"October 2024",reports:38,amount:1900,status:"Paid"},{month:"September 2024",reports:42,amount:2100,status:"Paid"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Tracking"}),o.jsx("p",{className:"text-gray-600",children:"Monitor your earnings and payment history"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:o.jsx(Tb,{className:"text-green-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Earnings"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["SAR ",t.monthlyEarnings.toLocaleString()]})]})]}),o.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[o.jsx(Cb,{size:16,className:"mr-1"}),o.jsx("span",{children:"+18% from last month"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:o.jsx(et,{className:"text-blue-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reports This Month"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalReportsProcessed})]})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Rate: SAR ",t.reportPaymentRate," per report"]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:o.jsx(Ba,{className:"text-purple-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Processed"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalReportsProcessed})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Since joining platform"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"p-6 border-b border-gray-100",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment History"})}),o.jsx("div",{className:"divide-y divide-gray-100",children:e.map((n,r)=>o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:n.month}),o.jsxs("p",{className:"text-sm text-gray-500",children:[n.reports," reports reviewed"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold text-gray-900",children:["SAR ",n.amount.toLocaleString()]}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${n.status==="Paid"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n.status})]})]},r))})]})]})},I6=()=>{const t=()=>{const n=document.createElement("a");n.href="/thermography/Thermography-Risk-ScaleV2.pdf",n.download="Thermography-Risk-ScaleV2.pdf",n.click()},e=()=>{window.open("/thermography/Thermography-Risk-ScaleV2.pdf","_blank")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Thermography Risk Scale Reference"}),o.jsx("p",{className:"text-gray-600",children:"Official thermography risk assessment guidelines and documentation"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(et,{size:40,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Thermography Risk Scale V2"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Access the comprehensive thermography risk assessment guide containing detailed information about TH risk levels, clinical findings, and professional recommendations for breast cancer screening."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{onClick:e,className:"flex items-center justify-center space-x-2 bg-violet-600 text-white px-6 py-3 rounded-lg hover:bg-violet-700 transition-colors font-medium",children:[o.jsx(Ib,{size:20}),o.jsx("span",{children:"View PDF Guide"})]}),o.jsxs("button",{onClick:t,className:"flex items-center justify-center space-x-2 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:[o.jsx(xp,{size:20}),o.jsx("span",{children:"Download PDF"})]})]})]})}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(et,{className:"text-blue-600 mt-0.5 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Professional Guidelines"}),o.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[o.jsx("p",{children:" This document contains the official thermography risk scale used for breast cancer screening"}),o.jsx("p",{children:" Review the complete guidelines before conducting thermography assessments"}),o.jsx("p",{children:" Ensure all risk classifications follow the standardized TH:1-5 scale"}),o.jsx("p",{children:" Always correlate thermographic findings with clinical examination and patient history"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Reference"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-blue-700",children:"TH:1-2"}),o.jsx("span",{className:"text-gray-600",children:"Low Risk (99% no cancer)"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-yellow-700",children:"TH:3"}),o.jsx("span",{className:"text-gray-600",children:"Medium Risk (1 in 7 chance)"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-orange-700",children:"TH:4"}),o.jsx("span",{className:"text-gray-600",children:"High Risk"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-red-700",children:"TH:5"}),o.jsx("span",{className:"text-gray-600",children:"Very High Risk (90% cancer present)"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Assessment Areas"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsx("p",{children:" Vascular pattern analysis"}),o.jsx("p",{children:" Thermal symmetry evaluation"}),o.jsx("p",{children:" Hot spot identification"}),o.jsx("p",{children:" Nipple temperature comparison"}),o.jsx("p",{children:" Estrogen dominance indicators"}),o.jsx("p",{children:" Overall thermal distribution"})]})]})]})]})},j6=({doctor:t})=>{const[e,n]=I.useState(!1),[r,s]=I.useState(!1),[i,a]=I.useState(t),{hospitals:c,loading:u,error:d}=Rb(),{medicalSpecialty:h,loading:m,error:p}=Ab(),x=A=>{if(!A)return"-";let b;if(A.toDate)b=A.toDate();else if(typeof A=="string"){const[L,V,E]=A.split("/").map(Number);if(!L||!V||!E)return"-";b=new Date(E,V-1,L)}else b=new Date(A);if(isNaN(b.getTime()))return"-";const _=b.getFullYear(),w=(b.getMonth()+1).toString().padStart(2,"0"),D=b.getDate().toString().padStart(2,"0");return`${_}-${w}-${D}`};I.useEffect(()=>{a(t)},[t]);const N=A=>{const{name:b,value:_}=A.target;a(w=>({...w,[b]:b==="yearsOfExperience"?Number(_):_}))},k=async()=>{try{s(!0);const A=ys(ge,"doctors",t.id),b={phoneNumber:i.phoneNumber,medicalLicenseNumber:i.medicalLicenseNumber,ibanNumber:i.ibanNumber,medicalSpecialty:i.medicalSpecialty,hospitalAffiliation:i.hospitalAffiliation,yearsOfExperience:i.yearsOfExperience};await pf(A,b),n(!1),Vr.success("Profile saved successfully!")}catch(A){console.error(A),Vr.error(A instanceof Error?A.message:"Failed to save review. Please try again.")}finally{s(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),o.jsx("p",{className:"text-gray-600",children:"Manage your professional information"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center",children:o.jsx(Ha,{size:32,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.fullName}),o.jsx("p",{className:"text-gray-600",children:t.medicalSpecialty}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Member since : ",x(new Date(t.joinedDate).toLocaleDateString())]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Professional Information"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Fn,{size:18,className:"text-gray-400"}),o.jsx("input",{value:i.email,disabled:!0,className:"w-full bg-gray-100 px-3 py-2 rounded-lg"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Medical License"}),o.jsx("input",{name:"medicalLicenseNumber",value:i.medicalLicenseNumber,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Medical Specialty"}),p&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:p}),o.jsxs("select",{name:"medicalSpecialty",value:i.medicalSpecialty,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg",children:[m&&o.jsx("option",{disabled:!0,children:"Loading Medical Specialities..."}),!m&&h.map(A=>o.jsx("option",{value:A.name,children:A.name},A.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Hospital Affiliation"}),d&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:d}),o.jsxs("select",{name:"hospitalAffiliation",value:i.hospitalAffiliation,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg",children:[u&&o.jsx("option",{disabled:!0,children:"Loading hospitals..."}),!u&&c.map(A=>o.jsx("option",{value:A.name,children:A.name},A.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Years of Experience"}),o.jsx("input",{type:"number",name:"yearsOfExperience",min:1,value:i.yearsOfExperience,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Contact & Payment"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),o.jsx("input",{name:"phoneNumber",value:i.phoneNumber,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"IBAN"}),o.jsx("input",{name:"ibanNumber",value:i.ibanNumber,onChange:N,disabled:!e,className:"w-full px-3 py-2 border rounded-lg font-mono"})]})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t flex gap-3",children:e?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:k,disabled:r,className:"bg-violet-600 text-white px-6 py-2 rounded-lg",children:r?"Saving...":"Save"}),o.jsx("button",{onClick:()=>{a(t),n(!1)},className:"border px-6 py-2 rounded-lg",children:"Cancel"})]}):o.jsx("button",{onClick:()=>n(!0),className:"bg-violet-600 text-white px-6 py-2 rounded-lg",children:"Edit Profile"})})]})]})},zs=({title:t,children:e,isOpen:n,onToggle:r,icon:s})=>o.jsxs("div",{className:"border border-gray-200 rounded-lg mb-4",children:[o.jsxs("button",{onClick:r,className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[s,o.jsx("span",{className:"font-semibold text-gray-900",children:t})]}),n?o.jsx(GP,{className:"text-gray-500 flex-shrink-0",size:20}):o.jsx(Gc,{className:"text-gray-500 flex-shrink-0",size:20})]}),n&&o.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:o.jsx("div",{className:"pt-4",children:e})})]}),fx=({term:t,definition:e})=>{const[n,r]=I.useState(!1);return o.jsxs("span",{className:"relative",children:[o.jsx("button",{className:"text-violet-600 underline hover:text-violet-700 cursor-help",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!n),children:t}),n&&o.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-lg z-10",children:[e,o.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})},S6=()=>{const[t,e]=I.useState("en"),[n,r]=I.useState(new Set([0])),s=d=>{const h=new Set(n);h.has(d)?h.delete(d):h.add(d),r(h)},i=()=>{window.print()},a=()=>{alert("PDF download functionality would be implemented here")},c="January 15, 2025";return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100 print:bg-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 print:shadow-none",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(Ye,{size:24,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis Privacy Policy"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Professionals Platform"})]})]}),o.jsxs("div",{className:"flex items-center space-x-4 print:hidden",children:[o.jsx("a",{href:"/",className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:o.jsx("span",{children:" Back to Login"})}),o.jsxs("button",{onClick:()=>e(t==="en"?"ar":"en"),className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(jb,{size:16}),o.jsx("span",{children:t==="en"?"":"English"})]}),o.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(i4,{size:16}),o.jsx("span",{children:"Print"})]}),o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 bg-violet-600 text-white px-4 py-2 rounded-lg hover:bg-violet-700 transition-colors",children:[o.jsx(xp,{size:16}),o.jsx("span",{children:"Download PDF"})]})]})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Privacy Policy for Medical Professionals"}),o.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ba,{size:16}),o.jsxs("span",{children:["Last Updated: ",c]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(et,{size:16}),o.jsxs("span",{children:["Version ","2.1"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8 print:hidden",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Navigation"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:["Introduction","Data Collection","Data Usage","Security","Data Sharing","Your Rights","Data Retention","International Transfers","Cookies","Updates"].map((d,h)=>o.jsx("button",{onClick:()=>s(h),className:"text-left p-3 rounded-lg border border-gray-200 hover:border-violet-300 hover:bg-violet-50 transition-colors text-sm",children:d},h))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(zs,{title:"1. Introduction and Scope",isOpen:n.has(0),onToggle:()=>s(0),icon:o.jsx(ZP,{className:"text-blue-600",size:20}),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Purpose of This Privacy Policy"}),o.jsx("p",{className:"text-blue-800 text-sm",children:'This privacy policy explains how Fahm Biotech LLC ("Fahis", "we", "us", or "our") collects, uses, protects, and shares personal information in connection with the Fahis thermography doctor platform designed specifically for medical professionals.'})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Scope of Application"}),o.jsxs("ul",{className:"space-y-2 text-gray-700 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Licensed medical professionals using the Fahis platform"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Healthcare institutions and affiliated doctors"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Patient data accessed through the platform"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"All platform-related communications and activities"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Legal Compliance"}),o.jsxs("ul",{className:"space-y-2 text-gray-700 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Saudi Personal Data Protection Law (PDPL)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Ministry of Health regulations"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"International healthcare data standards"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Medical confidentiality requirements"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Privacy Contact Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Fn,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"privacy@fahmbiotech.com"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ea,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"+966 55 710 1103"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(yf,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"Riyadh, Saudi Arabia"})]})]})]})]})}),o.jsx(zs,{title:"2. Data We Collect",isOpen:n.has(1),onToggle:()=>s(1),icon:o.jsx(et,{className:"text-green-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Doctor Registration Data"}),o.jsxs("ul",{className:"space-y-2 text-green-800 text-sm",children:[o.jsx("li",{children:" Medical license number and verification documents"}),o.jsx("li",{children:" Professional credentials and certifications"}),o.jsx("li",{children:" Contact information (email, phone, address)"}),o.jsx("li",{children:" Institutional affiliations and specializations"}),o.jsx("li",{children:" Professional references and background checks"}),o.jsx("li",{children:" IBAN and payment information"}),o.jsx("li",{children:" Years of experience and education history"})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Platform Usage Data"}),o.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[o.jsx("li",{children:" Login timestamps and IP addresses"}),o.jsx("li",{children:" Platform feature usage and navigation patterns"}),o.jsx("li",{children:" Report generation and review activities"}),o.jsx("li",{children:" System performance and error logs"}),o.jsx("li",{children:" Communication records with patients"}),o.jsx("li",{children:" Search queries and filter preferences"}),o.jsx("li",{children:" Session duration and activity patterns"})]})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Patient Data Accessed"}),o.jsxs("ul",{className:"space-y-2 text-purple-800 text-sm",children:[o.jsxs("li",{children:[" ",o.jsx(fx,{term:"Thermography scan images",definition:"Thermal imaging data showing heat patterns in breast tissue for medical analysis"})," and metadata"]}),o.jsx("li",{children:" Patient demographic information (limited access)"}),o.jsx("li",{children:" Medical history relevant to thermography"}),o.jsx("li",{children:" Previous scan comparisons and analysis"}),o.jsx("li",{children:" Report generation and recommendations"}),o.jsx("li",{children:" Risk assessment classifications (TH:1-5)"}),o.jsx("li",{children:" Follow-up scheduling and notes"})]})]})]}),o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Oe,{className:"text-yellow-600 mt-0.5 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Data Minimization Principle"}),o.jsx("p",{className:"text-yellow-800 text-sm",children:"We collect only the minimum amount of personal data necessary to provide medical services and maintain platform functionality. All data collection is purpose-limited and proportionate to the legitimate medical and operational needs of the platform."})]})]})})]})}),o.jsx(zs,{title:"3. How We Use Your Data",isOpen:n.has(2),onToggle:()=>s(2),icon:o.jsx(d4,{className:"text-purple-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"For Medical Practice"}),o.jsxs("ul",{className:"space-y-2 text-purple-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Facilitating thermography scan review and analysis"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Generating medical reports and recommendations"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Enabling patient communication and follow-up"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Supporting clinical decision-making processes"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Maintaining accurate medical records"})]})]})]}),o.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-3",children:"For Platform Operations"}),o.jsxs("ul",{className:"space-y-2 text-indigo-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"User authentication and access control"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"System security and fraud prevention"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Platform improvement and feature development"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Technical support and troubleshooting"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Compliance monitoring and audit trails"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Legal Basis for Processing"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Legitimate Interest"}),o.jsx("p",{className:"text-gray-600",children:"Platform security, fraud prevention, and service improvement"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Contractual Necessity"}),o.jsx("p",{className:"text-gray-600",children:"Providing medical services and platform functionality"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Legal Compliance"}),o.jsx("p",{className:"text-gray-600",children:"Meeting regulatory requirements and medical standards"})]})]})]})]})}),o.jsx(zs,{title:"4. Data Protection and Security",isOpen:n.has(3),onToggle:()=>s(3),icon:o.jsx(Kc,{className:"text-red-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Technical Safeguards"}),o.jsxs("ul",{className:"space-y-2 text-red-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx(fx,{term:"AES-256 encryption",definition:"Advanced Encryption Standard with 256-bit keys, providing military-grade security for data protection"})," for data at rest and in transit"]})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Multi-factor authentication for account access"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Regular security audits and penetration testing"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Automated backup and disaster recovery systems"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ye,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Secure API endpoints with rate limiting"})]})]})]}),o.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-orange-900 mb-3",children:"Administrative Controls"}),o.jsxs("ul",{className:"space-y-2 text-orange-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(kn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Role-based access permissions"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(kn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Regular staff security training"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(kn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Incident response procedures"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(kn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Data breach notification protocols"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(kn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Third-party vendor security assessments"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-900 text-white rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Security Incident Response"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Detection"}),o.jsx("p",{className:"text-gray-400",children:"24/7 monitoring and automated threat detection"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Response"}),o.jsx("p",{className:"text-gray-400",children:"Immediate containment and impact assessment"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Notification"}),o.jsx("p",{className:"text-gray-400",children:"Affected parties notified within 72 hours"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Recovery"}),o.jsx("p",{className:"text-gray-400",children:"System restoration and preventive measures"})]})]})]})]})}),o.jsx(zs,{title:"5. Data Sharing and Disclosure",isOpen:n.has(4),onToggle:()=>s(4),icon:o.jsx(kn,{className:"text-yellow-600",size:20}),children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Permitted Sharing"}),o.jsxs("ul",{className:"space-y-2 text-green-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With patients (their own data only)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With referring physicians (with patient consent)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With healthcare institutions (as authorized)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"For legal compliance and regulatory requirements"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"For emergency medical situations"})]})]})]}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Prohibited Sharing"}),o.jsxs("ul",{className:"space-y-2 text-red-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Oe,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Commercial marketing purposes"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Oe,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Unauthorized third parties"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Oe,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Non-medical research without consent"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Oe,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Social media or public platforms"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Oe,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Personal use outside medical practice"})]})]})]})]})})}),o.jsx(zs,{title:"6. Your Rights as a Medical Professional",isOpen:n.has(5),onToggle:()=>s(5),icon:o.jsx(qt,{className:"text-indigo-600",size:20}),children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-3",children:"Account Management Rights"}),o.jsxs("ul",{className:"space-y-2 text-indigo-800 text-sm",children:[o.jsx("li",{children:" Access and update your professional information"}),o.jsx("li",{children:" Download your platform usage data"}),o.jsx("li",{children:" Request account deactivation or deletion"}),o.jsx("li",{children:" Modify notification preferences"}),o.jsx("li",{children:" Review automated decisions"})]})]}),o.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-teal-900 mb-3",children:"Patient Data Rights"}),o.jsxs("ul",{className:"space-y-2 text-teal-800 text-sm",children:[o.jsx("li",{children:" Facilitate patient access requests"}),o.jsx("li",{children:" Support patient data correction requests"}),o.jsx("li",{children:" Honor patient deletion requests"}),o.jsx("li",{children:" Provide data portability assistance"}),o.jsx("li",{children:" Respect patient consent withdrawal"})]})]})]})})})]}),o.jsxs("div",{className:"mt-12 bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How long do you retain my professional data?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"Doctor account data is retained for 7 years after account deactivation to comply with medical record retention requirements and regulatory obligations."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I request deletion of patient data I've accessed?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"Patient data deletion requests must come directly from the patient. As a medical professional, you can facilitate these requests but cannot initiate deletion of patient medical records."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How do you ensure PDPL compliance?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"We maintain full compliance with Saudi PDPL through regular audits, staff training, technical safeguards, and ongoing legal review of our privacy practices."})]})]})]}),o.jsxs("div",{className:"mt-8 bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl border border-violet-200 p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Privacy Questions?"}),o.jsx("p",{className:"text-gray-700 mb-6",children:"If you have questions about this privacy policy or our data practices, please contact our privacy team."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("a",{href:"mailto:privacy@fahmbiotech.com",className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200 hover:border-violet-300 transition-colors",children:[o.jsx(Fn,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Email"}),o.jsx("div",{className:"text-sm text-gray-600",children:"privacy@fahmbiotech.com"})]})]}),o.jsxs("a",{href:"tel:+966557101103",className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200 hover:border-violet-300 transition-colors",children:[o.jsx(Ea,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Phone"}),o.jsx("div",{className:"text-sm text-gray-600",children:"+966 55 710 1103"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200",children:[o.jsx(yf,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Address"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Riyadh, Saudi Arabia"})]})]})]})]}),o.jsxs("div",{className:"mt-8 text-center text-gray-500 text-sm",children:[o.jsx("p",{children:" 2025 Fahm Biotech LLC. All rights reserved."}),o.jsxs("p",{className:"mt-2",children:["This privacy policy is effective as of ",c," and may be updated periodically."]})]})]}),o.jsx("style",{jsx:!0,children:`
        @media print {
          .print\\:hidden { display: none !important; }
          .print\\:bg-white { background-color: white !important; }
          .print\\:shadow-none { box-shadow: none !important; }
          body { font-size: 12pt; }
          h1 { font-size: 18pt; }
          h2 { font-size: 16pt; }
          h3 { font-size: 14pt; }
          h4 { font-size: 13pt; }
        }
      `})]})},zb=()=>{const[t,e]=I.useState({name:"",email:"",subject:"",message:"",priority:"normal"}),[n,r]=I.useState(!1),[s,i]=I.useState(!1),a=async h=>{h.preventDefault(),r(!0),setTimeout(()=>{r(!1),i(!0)},2e3)},c=h=>{e(m=>({...m,[h.target.name]:h.target.value}))},u=En(),d=()=>{u("/dashboard",{replace:!0})};return s?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ne,{size:32,className:"text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Message Sent!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for contacting us. Our support team will respond within 4 business hours."}),o.jsx("button",{onClick:d,className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:" Back to Main Page"})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Un,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Contact Support"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:d,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Ri,{size:20}),o.jsx("span",{children:"Back to Dashboard"})]})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contact Us"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Get in touch with our team for support, partnerships, or general inquiries about our thermography platform and medical services."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us a message"}),o.jsxs("form",{onSubmit:a,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),o.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Dr. John Smith"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),o.jsx("input",{type:"email",name:"email",required:!0,value:t.email,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inquiry Type"}),o.jsxs("select",{name:"priority",value:t.priority,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",children:[o.jsx("option",{value:"general",children:"General Inquiry"}),o.jsx("option",{value:"technical",children:"Technical Support"}),o.jsx("option",{value:"medical",children:"Medical Professional Support"}),o.jsx("option",{value:"partnership",children:"Partnership Opportunity"}),o.jsx("option",{value:"business",children:"Business Development"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),o.jsx("input",{type:"text",name:"subject",required:!0,value:t.subject,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Brief description of your inquiry"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),o.jsx("textarea",{name:"message",required:!0,value:t.message,onChange:c,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Please provide details about your inquiry..."})]}),o.jsx("button",{type:"submit",disabled:n,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 cursor-pointer active:scale-95",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Sending..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(u4,{size:18}),o.jsx("span",{children:"Send Message"})]})})]})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"FAHM BioTech"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(yf,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Headquarters"}),o.jsx("p",{className:"text-gray-600",children:"Riyadh, Saudi Arabia"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Fn,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"General Inquiries"}),o.jsx("a",{href:"mailto:info@fahmbiotech.com",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"info@fahmbiotech.com"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Ea,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),o.jsx("a",{href:"tel:+966557101103",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"+966 55 710 1103"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(jb,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Website"}),o.jsx("a",{href:"https://fahmbiotech.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"fahmbiotech.com"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-8 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Ye,{className:"text-purple-600 mr-3",size:24}),o.jsx("h3",{className:"text-xl font-bold text-purple-900",children:"Medical Professional Support"})]}),o.jsx("p",{className:"text-purple-800 mb-4",children:"Dedicated support for healthcare professionals using our thermography platform."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"mailto:medical@fahmbiotech.com",className:"flex items-center space-x-3 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Fn,{size:18}),o.jsx("span",{children:"medical@fahmbiotech.com"})]}),o.jsx("div",{className:"bg-purple-200 p-3 rounded-lg",children:o.jsxs("p",{className:"text-purple-800 text-sm",children:[o.jsx("strong",{children:"Response Time:"})," Within 4 business hours for medical inquiries"]})})]})]}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Oe,{className:"text-red-600 mr-3",size:24}),o.jsx("h3",{className:"text-lg font-bold text-red-900",children:"Emergency Support"})]}),o.jsx("p",{className:"text-red-800 mb-4",children:"For urgent technical issues affecting patient care:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"tel:+966557101103",className:"flex items-center space-x-3 bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Ea,{size:18}),o.jsx("span",{children:"+966 55 710 1103"})]}),o.jsxs("a",{href:"https://wa.me/966557101103",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(r4,{size:18}),o.jsx("span",{children:"WhatsApp Support"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Ou,{className:"text-purple-600 mr-3",size:20}),o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Business Hours"})]}),o.jsxs("div",{className:"space-y-2 text-gray-700",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Sunday - Thursday:"})," 9:00 AM - 6:00 PM (AST)"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Friday - Saturday:"})," Emergency support only"]}),o.jsx("p",{className:"text-sm text-purple-600 mt-3 bg-purple-50 p-2 rounded",children:"* Emergency medical support available 24/7 for critical issues"})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-6 border border-pink-200",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(JP,{className:"text-pink-600 mr-3",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Our Mission"})]}),o.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:"FAHM BioTech is dedicated to advancing women's health through innovative thermography solutions. We provide cutting-edge medical technology that empowers healthcare professionals to deliver better patient outcomes through early detection and comprehensive breast health monitoring."})]})]})]}),o.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center mb-4",children:[o.jsx(kn,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Partnership Opportunities"})]}),o.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:"We're always looking for strategic partnerships with healthcare institutions, medical professionals, and technology partners to expand access to advanced thermography solutions across the region."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Healthcare Institutions"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Partner with hospitals and clinics to integrate our thermography platform"})]}),o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Medical Professionals"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Join our network of certified thermography specialists"})]}),o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Technology Partners"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Collaborate on advancing medical imaging and AI technologies"})]})]}),o.jsx("div",{className:"text-center mt-8",children:o.jsxs("a",{href:"mailto:partnerships@fahmbiotech.com",className:"inline-flex items-center space-x-2 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Fn,{size:18}),o.jsx("span",{children:"partnerships@fahmbiotech.com"})]})})]})]})]})},mx={fullName:"",patientId:"",contactNumber:"",email:"",gender:"Female",dateOfBirth:"",thRiskLevel:1,locationId:"",doctorId:"",appointmentSlot:"",roomCode:"",scanImage1:"",scanImage2:"",scanImage3:"",reportURL:"",decision:"",vascularPattern:"",thermalSymmetry:"",hotSpots:"",nippleTemperature:"",detailedFindings:"",inferenceAIModel:""},C6=()=>{const[t,e]=I.useState(mx),[n,r]=I.useState(!1),[s,i]=I.useState(null),[a,c]=I.useState(null),u=h=>{const{name:m,value:p}=h.target;e(x=>({...x,[m]:m==="thRiskLevel"?Number(p):p}))},d=async h=>{h.preventDefault(),r(!0),c(null),i(null);try{const m=await Sl(Ve(ge,"patients"),{fullName:t.fullName,patientId:t.patientId,contactNumber:t.contactNumber,email:t.email,gender:t.gender,dateOfBirth:t.dateOfBirth,status:"Active",role:"Patient",totalVisits:1,thRiskLevel:t.thRiskLevel,reviewed:!1,lastVisit:le.now(),createdAt:In(),updatedAt:In()}),p=await Sl(Ve(ge,"patients",m.id,"appointments"),{locationId:t.locationId,doctorId:t.doctorId,appointmentDate:le.now(),appointmentSlot:t.appointmentSlot,roomCode:t.roomCode,status:"Completed",createdAt:In(),updatedAt:In()}),x=await Sl(Ve(ge,"patients",m.id,"appointments",p.id,"thermalScans"),{scanImage1:t.scanImage1,scanImage2:t.scanImage2,scanImage3:t.scanImage3,scanTimestamp:le.now(),scanStatus:"Completed",scanCreatedAt:In(),scanUpdatedAt:In(),reportURL:t.reportURL,reportCreatedAt:In(),reportUpdatedAt:In()});await Sl(Ve(ge,"patients",m.id,"appointments",p.id,"thermalScans",x.id,"aiInferenceResults"),{scanImage1Grey:t.scanImage1,scanImage2Grey:t.scanImage2,scanImage3Grey:t.scanImage3,thRiskLevel:t.thRiskLevel,decision:t.decision,vascularPattern:t.vascularPattern,thermalSymmetry:t.thermalSymmetry,hotSpots:t.hotSpots,nippleTemperature:t.nippleTemperature,detailedFindings:t.detailedFindings,inferenceScanStatus:"Completed",inferenceTimestamp:le.now(),inferenceAIModel:t.inferenceAIModel,reviewDoctorId:t.doctorId,reviewStatus:"Reviewed",reviewUpdatedAt:In(),sentReport:!1}),i("Patient record added successfully!"),e(mx)}catch(m){console.error(m),c("Failed to add patient")}finally{r(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-6 max-w-3xl mx-auto p-4 border rounded-xl",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Add Patient Record"}),o.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Patient Info"}),o.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:u,placeholder:"Full Name",className:"w-full border rounded px-2 py-1",required:!0}),o.jsx("input",{type:"text",name:"patientId",value:t.patientId,onChange:u,placeholder:"Patient ID",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"contactNumber",value:t.contactNumber,onChange:u,placeholder:"Contact Number",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"email",name:"email",value:t.email,onChange:u,placeholder:"Email",className:"w-full border rounded px-2 py-1"}),o.jsxs("select",{name:"gender",value:t.gender,onChange:u,className:"w-full border rounded px-2 py-1",children:[o.jsx("option",{value:"Female",children:"Female"}),o.jsx("option",{value:"Male",children:"Male"}),o.jsx("option",{value:"Other",children:"Other"})]}),o.jsx("input",{type:"date",name:"dateOfBirth",value:t.dateOfBirth,onChange:u,className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"number",name:"thRiskLevel",value:t.thRiskLevel,onChange:u,min:1,max:5,placeholder:"Thermal Risk Level",className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Appointment Info"}),o.jsx("input",{type:"text",name:"locationId",value:t.locationId,onChange:u,placeholder:"Location ID",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"doctorId",value:t.doctorId,onChange:u,placeholder:"Doctor ID",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"appointmentSlot",value:t.appointmentSlot,onChange:u,placeholder:"Appointment Slot",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"roomCode",value:t.roomCode,onChange:u,placeholder:"Room Code",className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Thermal Scan Info"}),o.jsx("input",{type:"text",name:"scanImage1",value:t.scanImage1,onChange:u,placeholder:"Scan Image 1 URL",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"scanImage2",value:t.scanImage2,onChange:u,placeholder:"Scan Image 2 URL",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"scanImage3",value:t.scanImage3,onChange:u,placeholder:"Scan Image 3 URL",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"reportURL",value:t.reportURL,onChange:u,placeholder:"Report URL",className:"w-full border rounded px-2 py-1"})]}),o.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"AI Inference Info"}),o.jsx("input",{type:"text",name:"decision",value:t.decision,onChange:u,placeholder:"Decision",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"vascularPattern",value:t.vascularPattern,onChange:u,placeholder:"Vascular Pattern",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"thermalSymmetry",value:t.thermalSymmetry,onChange:u,placeholder:"Thermal Symmetry",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"hotSpots",value:t.hotSpots,onChange:u,placeholder:"Hot Spots",className:"w-full border rounded px-2 py-1"}),o.jsx("input",{type:"text",name:"nippleTemperature",value:t.nippleTemperature,onChange:u,placeholder:"Nipple Temperature",className:"w-full border rounded px-2 py-1"}),o.jsx("textarea",{name:"detailedFindings",value:t.detailedFindings,onChange:u,placeholder:"Detailed Findings",className:"w-full border rounded px-2 py-1",rows:3}),o.jsx("input",{type:"text",name:"inferenceAIModel",value:t.inferenceAIModel,onChange:u,placeholder:"Inference AI Model",className:"w-full border rounded px-2 py-1"})]}),o.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:n?"Saving...":"Add Patient Record"}),s&&o.jsx("p",{className:"text-green-600 mt-2",children:s}),a&&o.jsx("p",{className:"text-red-600 mt-2",children:a})]})},k6=({currentDoctor:t,logout:e})=>{const n=En(),[r,s]=I.useState([]);I.useEffect(()=>{const h=Ve(ge,"patients"),m=Mr(h,p=>{const x=p.docs.map(N=>({id:N.id,...N.data()}));s(x)});return()=>m()},[]);const i=async(h,m,p)=>{console.log(`patients/${h}/appointments/${m}/thermalScans`);const x=await xr(Ve(ge,`patients/${h}/appointments/${m}/thermalScans`));for(const N of x.docs){if(N.id!==p)continue;const k=await xr(Ve(ge,`patients/${h}/appointments/${m}/thermalScans/${N.id}/aiInferenceResults`));for(const A of k.docs)return{patientId:h,appointmentId:m,scanId:N.id,aiInferenceId:A.id,...N.data(),...A.data()}}return null},a=h=>{console.log("App received patientId:",h),n(`/patients/${h}`)},c=(h,m,p)=>{const x=r.find(N=>N.id===m);i(m,p,h).then(N=>{N&&n("/thermography-review",{state:{report:N,patient:x}})})},u=async(h,m)=>{try{const p={...m};delete p.patientId,delete p.appointmentId,delete p.scanId,console.log(m,"updatesInferenceClean : ",p);const x=ys(ge,`patients/${m.patientId}/appointments/${m.appointmentId}/thermalScans/${m.scanId}/aiInferenceResults/${h}`);await pf(x,p);const N=Ve(ge,`patients/${m.patientId}/appointments`),k=await xr(bn(N,nn("appointmentDate","desc"),Go(1)));if(k.empty)return;const A=k.docs[0].id,b=Ve(ge,`patients/${m.patientId}/appointments/${A}/thermalScans`),_=await xr(bn(b,nn("scanTimestamp","desc"),Go(1)));if(_.empty)return;const w=_.docs[0].id,D=Ve(ge,`patients/${m.patientId}/appointments/${A}/thermalScans/${w}/aiInferenceResults`),L=await xr(bn(D,nn("reviewUpdatedAt","desc"),Go(1)));if(L.empty)return;const V=L.docs[0].data().thRiskLevel,E=ys(ge,`patients/${m.patientId}`);return await pf(E,{thRiskLevel:V,reviewed:!0}),s(T=>T.map(S=>S.id===m.patientId?{...S,thRiskLevel:V,reviewed:!0}:S)),!0}catch(p){return console.error(" Firebase update failed: App",p),!1}},d=({allPatients:h,onSelectReport:m})=>{const{patientId:p}=jT(),x=En();if(!p)return o.jsx("div",{children:"Patient not found"});const N=h.find(A=>A.id===p);if(!N)return o.jsx("div",{children:"Patient not found"});const k=()=>{x("/patients")};return o.jsx(_6,{patient:N,onBack:k,onSelectReport:m})};return o.jsx(d6,{doctor:t,onLogout:e,children:o.jsxs($1,{children:[o.jsx(Qe,{path:"/",element:o.jsx(zT,{to:"/dashboard",replace:!0})}),o.jsx(Qe,{path:"/add-thermal-scan",element:o.jsx(C6,{})}),o.jsx(Qe,{path:"/dashboard",element:o.jsx(p6,{})}),o.jsx(Qe,{path:"/patients",element:o.jsx(x6,{onSelectPatient:a})}),o.jsx(Qe,{path:"/patients/:patientId",element:o.jsx(d,{allPatients:r,onSelectReport:c})}),o.jsx(Qe,{path:"/thermography-review",element:o.jsx(N6,{doctor:t,onSaveReview:u})}),o.jsx(Qe,{path:"/profile",element:o.jsx(j6,{doctor:t})}),o.jsx(Qe,{path:"/payments",element:o.jsx(T6,{})}),o.jsx(Qe,{path:"/risk-scale",element:o.jsx(I6,{})}),o.jsx(Qe,{path:"/privacy-policy",element:o.jsx(S6,{})}),o.jsx(Qe,{path:"/contact-support",element:o.jsx(zb,{})})]})})},R6=()=>o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(Un,{size:24,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Guidelines"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsx("a",{href:"/",className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:o.jsx("span",{children:" Back to Main Page"})})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(et,{size:40,className:"text-violet-600"})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Medical Guidelines"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Clinical protocols and best practices for thermographic breast screening using the Fahis platform"})]}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 mb-8 rounded-r-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Oe,{className:"text-red-400 mt-1 mr-3 flex-shrink-0",size:24}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Important Medical Notice"}),o.jsx("p",{className:"text-red-700",children:"These guidelines are intended for licensed healthcare professionals only. Thermography is an adjunctive screening tool and should never replace standard diagnostic procedures."})]})]})}),o.jsxs("div",{className:"space-y-12",children:[o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Ye,{size:24,className:"text-blue-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"1. Scope of Use"})]}),o.jsxs("div",{className:"space-y-4 text-gray-700",children:[o.jsx("p",{className:"text-lg font-medium text-blue-900",children:"Thermography as an Adjunctive Screening Tool"}),o.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Primary Applications:"}),o.jsxs("ul",{className:"space-y-2 text-blue-800",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Adjunctive screening"})," for breast health assessment in asymptomatic women"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Risk stratification"})," to identify patients requiring closer monitoring"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Monitoring tool"})," for patients with dense breast tissue where mammography may be limited"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Complementary assessment"})," in conjunction with clinical breast examination"]})]})]})]}),o.jsxs("div",{className:"bg-red-50 p-6 rounded-lg border border-red-200",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Critical Limitations:"}),o.jsxs("ul",{className:"space-y-2 text-red-800",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx(Oe,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT a replacement"})," for mammography, ultrasound, or MRI"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Oe,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT diagnostic"})," - cannot definitively diagnose cancer"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Oe,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT suitable"})," as a standalone screening method"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Oe,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT recommended"})," for patients with acute breast symptoms requiring immediate evaluation"]})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(qt,{size:24,className:"text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"2. Best Practices for Image Interpretation"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-4",children:"Systematic Interpretation Checklist:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Vascular Assessment:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Bilateral vascular symmetry"}),o.jsx("li",{children:" Vessel recruitment patterns"}),o.jsx("li",{children:" Abnormal vascular density"}),o.jsx("li",{children:" Serpentine vessel patterns"}),o.jsx("li",{children:" Vascular cut-off signs"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Thermal Patterns:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Temperature differentials (>1.5C significant)"}),o.jsx("li",{children:" Thermal symmetry evaluation"}),o.jsx("li",{children:" Hot spot identification and mapping"}),o.jsx("li",{children:" Cold areas or thermal voids"}),o.jsx("li",{children:" Nipple temperature comparison"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Morphological Features:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Breast contour irregularities"}),o.jsx("li",{children:" Skin temperature variations"}),o.jsx("li",{children:" Areolar thermal changes"}),o.jsx("li",{children:" Lymphatic drainage patterns"}),o.jsx("li",{children:" Axillary thermal activity"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Risk Indicators:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Estrogen dominance patterns"}),o.jsx("li",{children:" Inflammatory thermal signatures"}),o.jsx("li",{children:" Metabolic activity indicators"}),o.jsx("li",{children:" Angiogenesis markers"}),o.jsx("li",{children:" Progressive thermal changes"})]})]})]})]}),o.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-3",children:"TH Classification System (TH:1-5):"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-3 bg-blue-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-blue-800",children:"TH:1"}),o.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"Minimal thermal activity"}),o.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"99% no cancer"})]}),o.jsxs("div",{className:"text-center p-3 bg-green-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-green-800",children:"TH:2"}),o.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Low thermal activity"}),o.jsx("div",{className:"text-xs text-green-600 mt-1",children:"99% no cancer"})]}),o.jsxs("div",{className:"text-center p-3 bg-yellow-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-yellow-800",children:"TH:3"}),o.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Moderate patterns"}),o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"1 in 7 chance"})]}),o.jsxs("div",{className:"text-center p-3 bg-orange-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-orange-800",children:"TH:4"}),o.jsx("div",{className:"text-xs text-orange-700 mt-1",children:"Concerning patterns"}),o.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"High risk"})]}),o.jsxs("div",{className:"text-center p-3 bg-red-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-red-800",children:"TH:5"}),o.jsx("div",{className:"text-xs text-red-700 mt-1",children:"High-risk patterns"}),o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"90% cancer present"})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(KP,{size:24,className:"text-purple-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"3. Standardized Reporting"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-gray-700",children:"Every thermographic report generated through the Fahis platform must contain the following standardized components:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-4",children:"Required Report Sections:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"1. Patient Demographics & History"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Age, menstrual status, hormone use"}),o.jsx("li",{children:" Family history of breast/ovarian cancer"}),o.jsx("li",{children:" Previous breast imaging results"}),o.jsx("li",{children:" Current symptoms or concerns"}),o.jsx("li",{children:" Medications affecting circulation"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"2. Technical Parameters"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Imaging date and time"}),o.jsx("li",{children:" Room temperature and conditions"}),o.jsx("li",{children:" Equilibration time"}),o.jsx("li",{children:" Image quality assessment"})]})]})]})]}),o.jsxs("div",{className:"bg-indigo-50 p-6 rounded-lg border border-indigo-200",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-4",children:"Clinical Findings:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-indigo-800 mb-2",children:"3. Thermal Findings"}),o.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[o.jsx("li",{children:" Vascular pattern description"}),o.jsx("li",{children:" Thermal symmetry assessment"}),o.jsx("li",{children:" Hot spot identification and location"}),o.jsx("li",{children:" Temperature differentials"}),o.jsx("li",{children:" Estrogen dominance indicators"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-indigo-800 mb-2",children:"4. Classification & Recommendations"}),o.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[o.jsx("li",{children:" TH risk level (1-5) with rationale"}),o.jsx("li",{children:" Clinical impression"}),o.jsx("li",{children:" Recommended follow-up actions"}),o.jsx("li",{children:" Suggested imaging intervals"}),o.jsx("li",{children:" Referral recommendations if indicated"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Report Quality Standards:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Clear, objective language"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Standardized terminology"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Evidence-based conclusions"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Appropriate disclaimers"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Actionable recommendations"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Professional formatting"})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Oe,{size:24,className:"text-red-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"4. Clinical Disclaimer"})]}),o.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 rounded-r-lg",children:[o.jsx("h4",{className:"font-bold text-red-900 text-lg mb-4",children:"Professional Responsibility Statement"}),o.jsxs("div",{className:"space-y-4 text-red-800",children:[o.jsx("p",{className:"font-medium",children:"The Fahis thermography platform is a clinical decision support tool designed to assist qualified healthcare professionals in the interpretation of thermal imaging data. The ultimate responsibility for patient diagnosis, treatment decisions, and clinical management remains solely with the licensed physician."}),o.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[o.jsx("h5",{className:"font-semibold text-red-900 mb-2",children:"Physician Responsibilities:"}),o.jsxs("ul",{className:"space-y-1 text-red-800 text-sm",children:[o.jsx("li",{children:" Verify all thermographic findings through appropriate clinical correlation"}),o.jsx("li",{children:" Ensure compliance with local medical practice standards and regulations"}),o.jsx("li",{children:" Maintain appropriate professional liability coverage"}),o.jsx("li",{children:" Document all clinical decisions and rationale in patient records"}),o.jsx("li",{children:" Provide appropriate patient counseling regarding limitations of thermography"}),o.jsx("li",{children:" Ensure timely referral for additional imaging or specialist consultation when indicated"})]})]}),o.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[o.jsx("h5",{className:"font-semibold text-red-900 mb-2",children:"Platform Limitations:"}),o.jsxs("ul",{className:"space-y-1 text-red-800 text-sm",children:[o.jsx("li",{children:" Fahis does not provide medical advice, diagnosis, or treatment recommendations"}),o.jsx("li",{children:" The platform does not replace clinical judgment or standard diagnostic procedures"}),o.jsx("li",{children:" Technical malfunctions or interpretation errors may occur"}),o.jsx("li",{children:" Results must be interpreted within the context of complete clinical assessment"}),o.jsx("li",{children:" The platform is not intended for emergency or acute care situations"})]})]}),o.jsx("p",{className:"font-medium text-red-900 border-t border-red-300 pt-4",children:"By using the Fahis platform, healthcare professionals acknowledge their understanding of these limitations and accept full responsibility for all clinical decisions made in connection with thermographic assessments."})]})]})]}),o.jsxs("section",{className:"bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl border border-violet-200 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Vu,{size:24,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Additional Resources"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-violet-900 mb-3",children:"Professional Development:"}),o.jsxs("ul",{className:"space-y-2 text-violet-800 text-sm",children:[o.jsx("li",{children:" Thermography certification programs"}),o.jsx("li",{children:" Continuing medical education opportunities"}),o.jsx("li",{children:" Professional society memberships"}),o.jsx("li",{children:" Research publications and case studies"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-violet-900 mb-3",children:"Clinical Support:"}),o.jsxs("ul",{className:"space-y-2 text-violet-800 text-sm",children:[o.jsx("li",{children:" Expert consultation services"}),o.jsx("li",{children:" Quality assurance programs"}),o.jsx("li",{children:" Peer review opportunities"}),o.jsx("li",{children:" Technical support and training"})]})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-violet-200",children:o.jsxs("p",{className:"text-violet-700 text-sm",children:["For questions regarding these medical guidelines or clinical protocols, please contact our medical affairs team at ",o.jsx("a",{href:"mailto:medical@fahis.com",className:"text-violet-600 underline font-medium",children:"medical@fahis.com"})]})})]})]}),o.jsxs("div",{className:"mt-12 text-center",children:[o.jsxs("p",{className:"text-gray-500 text-sm",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),o.jsx("p",{className:"text-gray-500 text-sm mt-2",children:" 2025 Fahm Biotech LLC. All rights reserved."})]})]})]}),A6=({case:t,onClose:e})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-purple-900",children:t.title}),o.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[o.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${t.tag==="Urgent"?"bg-red-100 text-red-800":t.tag==="Benign"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.tag}),o.jsx("span",{className:"text-sm text-purple-700",children:t.anatomy}),o.jsxs("span",{className:"text-sm text-purple-600",children:["Difficulty: ",t.difficulty]})]})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(vp,{size:24})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 180px)"},children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Thermography Scan"}),o.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:[o.jsx("img",{src:t.thumbnail,alt:"Thermography scan",className:"w-full h-64 object-cover rounded-lg shadow-sm"}),o.jsx("div",{className:"mt-3 bg-purple-50 p-3 rounded-lg border border-purple-200",children:o.jsx("p",{className:"text-xs text-purple-700 font-medium",children:"SAMPLE CASE  For training only. Not real patient data."})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"AI-Generated Interpretation"}),o.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:o.jsx("p",{className:"text-purple-800 text-sm leading-relaxed",children:t.aiInterpretation})}),o.jsx("h4",{className:"text-md font-semibold text-purple-900 mt-6 mb-3",children:"Discussion Notes"}),o.jsx("div",{className:"space-y-2",children:t.discussionNotes.map((n,r)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsx("p",{className:"text-gray-700 text-sm",children:n})]},r))})]})]})}),o.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:["Training Case #",t.id,"  ",t.anatomy," Thermography"]}),o.jsx("button",{onClick:e,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Close Case"})]})})]})}),P6=()=>{const[t,e]=I.useState(null),n=[{id:"001",title:"Bilateral Breast Asymmetry",thumbnail:"/thermography/case1.jpeg",tag:"Urgent",anatomy:"Breast",aiInterpretation:"Significant thermal asymmetry detected in left breast upper outer quadrant. Temperature differential of 2.3C compared to contralateral side. Increased vascular activity with serpentine pattern suggests possible malignancy. Recommend immediate clinical correlation and imaging workup.",discussionNotes:["Upload: High-resolution thermal images acquired following 15-minute acclimatization period","Review: Systematic evaluation reveals focal hyperthermia with irregular borders","Consult: Correlation with mammography and ultrasound recommended within 48 hours","Follow-up: Patient counseled on findings and referred to breast specialist","Teaching Point: Temperature differentials >2C warrant urgent evaluation"],difficulty:"Advanced"},{id:"002",title:"Normal Thermal Symmetry",thumbnail:"/thermography/case2.jpeg",tag:"Benign",anatomy:"Breast",aiInterpretation:"Excellent bilateral thermal symmetry observed. Temperature differential <0.5C throughout breast tissue. Normal vascular patterns with symmetric distribution. No areas of focal hyperthermia or concerning thermal signatures identified.",discussionNotes:["Upload: Standard positioning with optimal image quality achieved","Review: Systematic assessment confirms normal thermal distribution","Consult: Baseline study established for future comparison","Follow-up: Routine screening interval recommended (12 months)","Teaching Point: Normal studies provide valuable baseline for longitudinal monitoring"],difficulty:"Beginner"},{id:"003",title:"Thyroid Thermal Irregularity",thumbnail:"/thermography/case3.jpeg",tag:"Follow-up",anatomy:"Thyroid",aiInterpretation:"Focal thermal elevation in right thyroid lobe with temperature increase of 1.8C. Pattern suggests possible nodular disease or inflammatory process. Recommend thyroid ultrasound and TSH evaluation for clinical correlation.",discussionNotes:["Upload: Neck positioning optimized for thyroid visualization","Review: Asymmetric thermal pattern in thyroid region identified","Consult: Endocrinology referral for comprehensive thyroid assessment","Follow-up: Repeat thermography in 3 months to assess progression","Teaching Point: Thyroid thermography complements but does not replace ultrasound"],difficulty:"Intermediate"},{id:"004",title:"Vascular Malformation",thumbnail:"/thermography/case1.jpeg",tag:"Follow-up",anatomy:"Vascular",aiInterpretation:"Linear thermal signature consistent with arteriovenous malformation in left upper extremity. Increased perfusion pattern with temperature elevation of 1.5C along vascular distribution. Recommend vascular surgery consultation.",discussionNotes:["Upload: Extremity positioning allows clear visualization of vascular patterns","Review: Abnormal thermal signature follows anatomical vascular distribution","Consult: Vascular surgery evaluation for treatment planning","Follow-up: Monitor for progression or complications","Teaching Point: Thermography excellent for vascular anomaly detection"],difficulty:"Intermediate"},{id:"005",title:"Post-Surgical Monitoring",thumbnail:"/thermography/case2.jpeg",tag:"Follow-up",anatomy:"Breast",aiInterpretation:"Post-lumpectomy thermal changes consistent with normal healing process. Mild temperature elevation (1.2C) in surgical site with gradual thermal gradient. No signs of infection or complications. Healing progressing appropriately.",discussionNotes:["Upload: Post-operative imaging at 6 weeks following surgery","Review: Expected thermal changes in healing tissue identified","Consult: Surgical team informed of normal healing progression","Follow-up: Continue monitoring until thermal normalization","Teaching Point: Understanding normal post-surgical thermal evolution is crucial"],difficulty:"Advanced"},{id:"006",title:"Inflammatory Breast Changes",thumbnail:"/thermography/case3.jpeg",tag:"Urgent",anatomy:"Breast",aiInterpretation:"Diffuse thermal elevation across entire left breast with temperature increase of 2.8C. Pattern consistent with inflammatory breast cancer or severe mastitis. Immediate clinical evaluation required for definitive diagnosis and treatment.",discussionNotes:["Upload: Emergency thermography requested for acute breast symptoms","Review: Diffuse hyperthermia with concerning thermal signature","Consult: Immediate oncology and infectious disease consultation","Follow-up: Urgent biopsy and imaging studies initiated","Teaching Point: Inflammatory patterns require immediate medical attention"],difficulty:"Advanced"}],r=c=>{switch(c){case"Urgent":return o.jsx(Oe,{size:16,className:"text-red-600"});case"Benign":return o.jsx(ne,{size:16,className:"text-green-600"});case"Follow-up":return o.jsx(Ou,{size:16,className:"text-yellow-600"});default:return null}},s=c=>{switch(c){case"Urgent":return"bg-red-100 text-red-800 border-red-200";case"Benign":return"bg-green-100 text-green-800 border-green-200";case"Follow-up":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=En(),a=()=>{i("/dashboard",{replace:!0})};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Vu,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Training Materials"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[o.jsx(Ri,{size:20}),o.jsx("span",{children:"Back to Main Page"})]})})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Interactive Case Library"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Explore anonymized thermography cases with AI-generated interpretations and expert discussion notes. Perfect for training and continuing medical education."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(et,{size:24,className:"text-purple-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Training Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Oe,{size:24,className:"text-red-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.filter(c=>c.tag==="Urgent").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Urgent Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(ne,{size:24,className:"text-green-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.filter(c=>c.tag==="Benign").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Benign Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(kn,{size:24,className:"text-purple-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"3"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Anatomical Areas"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 overflow-hidden hover:shadow-xl hover:border-purple-300 transition-all duration-200",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute top-3 left-3",children:o.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${s(c.tag)}`,children:[r(c.tag),o.jsx("span",{className:"ml-1",children:c.tag})]})}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsx("span",{className:"bg-white bg-opacity-90 text-purple-700 px-2 py-1 rounded text-xs font-medium",children:c.anatomy})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:[c.aiInterpretation.substring(0,120),"..."]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded",children:c.difficulty}),o.jsxs("button",{onClick:()=>e(c),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:[o.jsx(qt,{size:16}),o.jsx("span",{children:"View Case + AI Notes"})]})]})]})]},c.id))}),o.jsx("div",{className:"mt-12 bg-purple-50 border border-purple-200 rounded-xl p-8",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(Nb,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-2",children:"Educational Purpose"}),o.jsxs("p",{className:"text-purple-800 mb-4",children:["These training cases are designed to enhance your thermography interpretation skills through realistic scenarios and AI-assisted learning. Each case follows the proven workflow:",o.jsx("strong",{children:" Upload  Review  Consult"}),"."]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Upload:"})," Proper image acquisition and quality assessment"]}),o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Review:"})," Systematic interpretation and pattern recognition"]}),o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Consult:"})," Clinical correlation and next steps"]})]})]})]})})]}),t&&o.jsx(A6,{case:t,onClose:()=>e(null)})]})},D6=()=>{const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,i]=I.useState(null);return I.useEffect(()=>{(async()=>{try{const c=bn(Ve(ge,"publications"),nn("year","desc")),d=(await xr(c)).docs.map(h=>({id:h.id,...h.data()}));e(d)}catch(c){console.error(c),i("Failed to load publications")}finally{r(!1)}})()},[]),{publications:t,loading:n,error:s}},L6=()=>{const[t,e]=I.useState("guide"),n=En(),{publications:r,loading:s,error:i}=D6(),a=()=>{n("/dashboard",{replace:!0})},c=[{anatomy:"Breast",tempRange:"30C  36C",colorMap:"Rainbow",notes:"Optimal for detecting asymmetry and vascular patterns"},{anatomy:"Thyroid",tempRange:"32C  37C",colorMap:"Iron",notes:"Enhanced contrast for nodular detection"},{anatomy:"Extremities",tempRange:"28C  35C",colorMap:"Hot Metal",notes:"Ideal for vascular and circulation assessment"},{anatomy:"Face/Head",tempRange:"31C  36C",colorMap:"Rainbow",notes:"Balanced contrast for facial thermal patterns"}],u=[{step:1,title:"Confirm Patient ID + Laterality",description:"Verify patient identity and ensure correct left/right orientation",details:["Check patient name and ID against requisition","Confirm date and time of examination","Verify anatomical markers (L/R indicators)","Ensure proper patient positioning was maintained"],icon:o.jsx(h4,{size:24,className:"text-purple-600"})},{step:2,title:"Adjust Window/Level Settings",description:"Optimize thermal display for specific anatomy and clinical question",details:["Select appropriate temperature range for anatomy","Choose optimal color map (Rainbow, Iron, Hot Metal)","Adjust contrast for maximum abnormality detection","Save preset settings for consistency"],icon:o.jsx(qt,{size:24,className:"text-purple-600"})},{step:3,title:"Scan for Asymmetry",description:"Systematic comparison of bilateral thermal patterns",details:["Compare temperature differentials (>1.5C significant)","Assess bilateral symmetry in vascular patterns","Identify focal hot or cold spots","Document temperature measurements at key landmarks"],icon:o.jsx(Sb,{size:24,className:"text-purple-600"})},{step:4,title:"Flag Vascular Irregularities",description:"Identify abnormal vascular patterns and recruitment",details:["Look for serpentine or tortuous vessels","Assess vascular density and distribution","Identify vessel cut-offs or abrupt terminations","Compare with contralateral vascular architecture"],icon:o.jsx(f4,{size:24,className:"text-purple-600"})},{step:5,title:"Compare with Prior Studies",description:"Evaluate temporal changes and progression",details:["Load previous examinations if available","Assess interval changes in thermal patterns","Document new findings or resolution of prior abnormalities","Consider patient factors affecting thermal patterns"],icon:o.jsx(Ou,{size:24,className:"text-purple-600"})}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Vu,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Scan Interpretation Help"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[o.jsx(Ri,{size:20}),o.jsx("span",{children:"Back to Main Page"})]})})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Quick Reference + Recent Research"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive guide to thermography interpretation with step-by-step protocols, technical references, and latest research findings."})]}),o.jsxs("div",{className:"flex flex-wrap justify-center mb-8 bg-white rounded-xl shadow-sm border border-purple-100 p-2",children:[o.jsx("button",{onClick:()=>e("guide"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="guide"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Step-by-Step Guide"}),o.jsx("button",{onClick:()=>e("settings"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="settings"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Window/Level Settings"}),o.jsx("button",{onClick:()=>e("research"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="research"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Recent Publications"})]}),t==="guide"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(Un,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"How to Read a Thermography Scan in 5 Steps"})]}),o.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-8",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Oe,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsx("div",{children:o.jsxs("p",{className:"text-purple-800 text-sm",children:[o.jsx("strong",{children:"Professional Tip:"})," Use systematic windowing to maximize abnormality detection rate. Sudden thermal breaks or asymmetries often suggest pathology requiring further evaluation."]})})]})}),o.jsx("div",{className:"space-y-6",children:u.map(d=>o.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-white border border-purple-200 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:d.icon})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsxs("span",{className:"bg-purple-600 text-white text-sm font-bold px-3 py-1 rounded-full mr-3",children:["Step ",d.step]}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.title})]}),o.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),o.jsx("ul",{className:"space-y-2",children:d.details.map((h,m)=>o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{className:"text-gray-600 text-sm",children:h})]},m))})]})]})},d.step))})]})}),t==="settings"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(qt,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Window/Level Cheat Sheet"})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-blue-800 text-sm",children:[o.jsx("strong",{children:"Optimization Tip:"})," Proper windowing maximizes abnormality pickup rate. Adjust temperature ranges based on anatomy and clinical indication for optimal contrast."]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-purple-50",children:[o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Anatomy"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Recommended Temp Range"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Color Map"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Clinical Notes"})]})}),o.jsx("tbody",{children:c.map((d,h)=>o.jsxs("tr",{className:h%2===0?"bg-white":"bg-purple-25",children:[o.jsx("td",{className:"border border-purple-200 px-4 py-3 font-medium text-gray-900",children:d.anatomy}),o.jsx("td",{className:"border border-purple-200 px-4 py-3 text-gray-700",children:d.tempRange}),o.jsx("td",{className:"border border-purple-200 px-4 py-3",children:o.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm font-medium",children:d.colorMap})}),o.jsx("td",{className:"border border-purple-200 px-4 py-3 text-gray-600 text-sm",children:d.notes})]},h))})]})}),o.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Temperature Significance"}),o.jsxs("ul",{className:"space-y-2 text-sm text-purple-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:">1.5C:"})," Clinically significant"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:">2.0C:"})," Highly suspicious"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:">2.5C:"})," Urgent evaluation"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Color Map Selection"}),o.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Rainbow:"})," General purpose"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Iron:"})," High contrast"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Hot Metal:"})," Vascular studies"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Quality Factors"}),o.jsxs("ul",{className:"space-y-2 text-sm text-green-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Room temp:"})," 20-24C"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Acclimatization:"})," 15-20 min"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Distance:"})," 1-2 meters"]})]})]})]})]}),t==="research"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(et,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Recent Publications"})]}),o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-green-800 text-sm",children:[o.jsx("strong",{children:"Evidence-Based Practice:"})," Stay current with latest research to improve diagnostic accuracy and reduce missed findings. These publications represent cutting-edge developments in medical thermography."]})}),o.jsxs("div",{className:"space-y-6",children:[s&&o.jsx("p",{className:"text-gray-500",children:"Loading publications..."}),i&&o.jsx("p",{className:"text-red-600",children:i}),r.map(d=>o.jsxs("div",{className:"border border-purple-200 rounded-lg p-6 hover:border-purple-300 transition-colors",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded mr-3",children:d.year}),o.jsx("span",{className:"text-sm text-gray-600",children:d.journal})]}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:d.name}),o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[d.firstAuthor,d.secondAuthor&&`, ${d.secondAuthor}`]})]})}),o.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:["DOI: ",d.doi]}),o.jsx("div",{className:"flex space-x-3",children:o.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors text-sm",children:[o.jsx(Ib,{size:16}),o.jsx("span",{children:"View Online"})]})})]})]},d.id))]}),o.jsxs("div",{className:"mt-8 bg-purple-50 border border-purple-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Key Research Insights"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Diagnostic Accuracy"}),o.jsxs("ul",{className:"space-y-1 text-sm text-purple-700",children:[o.jsx("li",{children:" AI-assisted interpretation: 94% accuracy"}),o.jsx("li",{children:" Human radiologists alone: 87% accuracy"}),o.jsx("li",{children:" Combined approach: 97% accuracy"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Quality Improvement"}),o.jsxs("ul",{className:"space-y-1 text-sm text-purple-700",children:[o.jsx("li",{children:" Checklist reduces missed findings by 34%"}),o.jsx("li",{children:" Standardized protocols improve consistency"}),o.jsx("li",{children:" Population-specific baselines enhance accuracy"})]})]})]})]})]})]})]})};function M6(){const{isAuthenticated:t,currentDoctor:e,authError:n,login:r,register:s,logout:i}=Eb(),[a,c]=I.useState("login");return o.jsxs(hI,{children:[o.jsx(o6,{position:"top-right",reverseOrder:!1}),o.jsxs($1,{children:[o.jsx(Qe,{path:"/medical-guidelines",element:o.jsx(R6,{})}),o.jsx(Qe,{path:"/training-materials",element:o.jsx(P6,{})}),o.jsx(Qe,{path:"/scan-interpretation-help",element:o.jsx(L6,{})}),o.jsx(Qe,{path:"/contact-support",element:o.jsx(zb,{})}),o.jsx(Qe,{path:"/*",element:t?e?o.jsx(k6,{currentDoctor:e,logout:i}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"text-center text-gray-600",children:"Error loading doctor information"})}):a==="login"?o.jsx(y4,{onLogin:r,onSwitchToRegister:()=>c("register"),authError:n}):o.jsx(a6,{onRegister:s,onSwitchToLogin:()=>c("login")})})]})]})}j1(document.getElementById("root")).render(o.jsx(I.StrictMode,{children:o.jsx(M6,{})}));
