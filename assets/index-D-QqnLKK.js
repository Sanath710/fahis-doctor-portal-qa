(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ub(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cx={exports:{}},Wc={},ux={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),db=Symbol.for("react.portal"),hb=Symbol.for("react.fragment"),fb=Symbol.for("react.strict_mode"),mb=Symbol.for("react.profiler"),pb=Symbol.for("react.provider"),gb=Symbol.for("react.context"),yb=Symbol.for("react.forward_ref"),xb=Symbol.for("react.suspense"),vb=Symbol.for("react.memo"),_b=Symbol.for("react.lazy"),mg=Symbol.iterator;function wb(t){return t===null||typeof t!="object"?null:(t=mg&&t[mg]||t["@@iterator"],typeof t=="function"?t:null)}var dx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hx=Object.assign,fx={};function Si(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||dx}Si.prototype.isReactComponent={};Si.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Si.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mx(){}mx.prototype=Si.prototype;function mf(t,e,n){this.props=t,this.context=e,this.refs=fx,this.updater=n||dx}var pf=mf.prototype=new mx;pf.constructor=mf;hx(pf,Si.prototype);pf.isPureReactComponent=!0;var pg=Array.isArray,px=Object.prototype.hasOwnProperty,gf={current:null},gx={key:!0,ref:!0,__self:!0,__source:!0};function yx(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)px.call(e,r)&&!gx.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:va,type:t,key:i,ref:a,props:s,_owner:gf.current}}function Eb(t,e){return{$$typeof:va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===va}function bb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gg=/\/+/g;function nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bb(""+t.key):e.toString(36)}function Tl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case va:case db:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+nd(a,0):r,pg(s)?(n="",t!=null&&(n=t.replace(gg,"$&/")+"/"),Tl(s,e,n,"",function(d){return d})):s!=null&&(yf(s)&&(s=Eb(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(gg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",pg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+nd(i,c);a+=Tl(i,e,n,u,s)}else if(u=wb(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+nd(i,c++),a+=Tl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Za(t,e,n){if(t==null)return t;var r=[],s=0;return Tl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Nb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Il={transition:null},Tb={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Il,ReactCurrentOwner:gf};function xx(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Za,forEach:function(t,e,n){Za(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Za(t,function(){e++}),e},toArray:function(t){return Za(t,function(e){return e})||[]},only:function(t){if(!yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Si;te.Fragment=hb;te.Profiler=mb;te.PureComponent=mf;te.StrictMode=fb;te.Suspense=xb;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;te.act=xx;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)px.call(e,u)&&!gx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:va,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:gb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pb,_context:t},t.Consumer=t};te.createElement=yx;te.createFactory=function(t){var e=yx.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:yb,render:t}};te.isValidElement=yf;te.lazy=function(t){return{$$typeof:_b,_payload:{_status:-1,_result:t},_init:Nb}};te.memo=function(t,e){return{$$typeof:vb,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Il.transition;Il.transition={};try{t()}finally{Il.transition=e}};te.unstable_act=xx;te.useCallback=function(t,e){return pt.current.useCallback(t,e)};te.useContext=function(t){return pt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};te.useEffect=function(t,e){return pt.current.useEffect(t,e)};te.useId=function(){return pt.current.useId()};te.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return pt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};te.useRef=function(t){return pt.current.useRef(t)};te.useState=function(t){return pt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return pt.current.useTransition()};te.version="18.3.1";ux.exports=te;var k=ux.exports;const Ib=ub(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb=k,Sb=Symbol.for("react.element"),Cb=Symbol.for("react.fragment"),kb=Object.prototype.hasOwnProperty,Rb=jb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ab={key:!0,ref:!0,__self:!0,__source:!0};function vx(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)kb.call(e,r)&&!Ab.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Sb,type:t,key:i,ref:a,props:s,_owner:Rb.current}}Wc.Fragment=Cb;Wc.jsx=vx;Wc.jsxs=vx;cx.exports=Wc;var o=cx.exports,_x={exports:{}},kt={},wx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var ye=Z-1>>>1,je=B[ye];if(0<s(je,Y))B[ye]=Y,B[Z]=je,Z=ye;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var ye=0,je=B.length,Yr=je>>>1;ye<Yr;){var Pt=2*(ye+1)-1,Jr=B[Pt],qt=Pt+1,Zn=B[qt];if(0>s(Jr,Z))qt<je&&0>s(Zn,Jr)?(B[ye]=Zn,B[qt]=Z,ye=qt):(B[ye]=Jr,B[Pt]=Z,ye=Pt);else if(qt<je&&0>s(Zn,Z))B[ye]=Zn,B[qt]=Z,ye=qt;else break e}}return Y}function s(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,m=null,g=3,x=!1,b=!1,I=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function D(B){if(I=!1,w(B),!b)if(n(u)!==null)b=!0,$i(M);else{var Y=n(d);Y!==null&&Bi(D,Y.startTime-B)}}function M(B,Y){b=!1,I&&(I=!1,E(v),v=-1),x=!0;var Z=g;try{for(w(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!R());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,g=m.priorityLevel;var je=ye(m.expirationTime<=Y);Y=t.unstable_now(),typeof je=="function"?m.callback=je:m===n(u)&&r(u),w(Y)}else r(u);m=n(u)}if(m!==null)var Yr=!0;else{var Pt=n(d);Pt!==null&&Bi(D,Pt.startTime-Y),Yr=!1}return Yr}finally{m=null,g=Z,x=!1}}var F=!1,N=null,v=-1,T=5,S=-1;function R(){return!(t.unstable_now()-S<T)}function C(){if(N!==null){var B=t.unstable_now();S=B;var Y=!0;try{Y=N(!0,B)}finally{Y?j():(F=!1,N=null)}}else F=!1}var j;if(typeof _=="function")j=function(){_(C)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,bn=qe.port2;qe.port1.onmessage=C,j=function(){bn.postMessage(null)}}else j=function(){A(C,0)};function $i(B){N=B,F||(F=!0,j())}function Bi(B,Y){v=A(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,$i(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return B()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=g;g=B;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var ye=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ye+Z:ye):Z=ye,B){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=Z+je,B={id:h++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:je,sortIndex:-1},Z>ye?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(I?(E(v),v=-1):I=!0,Bi(D,Z-ye))):(B.sortIndex=je,e(u,B),b||x||(b=!0,$i(M))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Y=g;return function(){var Z=g;g=Y;try{return B.apply(this,arguments)}finally{g=Z}}}})(Ex);wx.exports=Ex;var Pb=wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db=k,Ct=Pb;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bx=new Set,Ho={};function js(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(Ho[t]=e,t=0;t<e.length;t++)bx.add(e[t])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=Object.prototype.hasOwnProperty,Lb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},xg={};function Mb(t){return Bd.call(xg,t)?!0:Bd.call(yg,t)?!1:Lb.test(t)?xg[t]=!0:(yg[t]=!0,!1)}function Vb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ob(t,e,n,r){if(e===null||typeof e>"u"||Vb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xf=/[\-:]([a-z])/g;function vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xf,vf);Ze[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xf,vf);Ze[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xf,vf);Ze[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ob(e,n,s,r)&&(n=null),r||s===null?Mb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qn=Db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),Hd=Symbol.for("react.profiler"),Nx=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),qd=Symbol.for("react.suspense"),Wd=Symbol.for("react.suspense_list"),bf=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Ix=Symbol.for("react.offscreen"),vg=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=vg&&t[vg]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,rd;function xo(t){if(rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rd=e&&e[1]||""}return`
`+rd+t}var sd=!1;function id(t,e){if(!t||sd)return"";sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function Fb(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=id(t.type,!1),t;case 11:return t=id(t.type.render,!1),t;case 1:return t=id(t.type,!0),t;default:return""}}function Gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case Hd:return"Profiler";case wf:return"StrictMode";case qd:return"Suspense";case Wd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tx:return(t.displayName||"Context")+".Consumer";case Nx:return(t._context.displayName||"Context")+".Provider";case Ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bf:return e=t.displayName||null,e!==null?e:Gd(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Gd(t(e))}catch{}}return null}function Ub(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(e);case 8:return e===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zb(t){var e=jx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=zb(t))}function Sx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kd(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _g(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cx(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function Qd(t,e){Cx(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vo=Array.isArray;function ei(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(vo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function kx(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,Ax=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$b=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(t){$b.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),So[e]=So[t]})});function Px(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||So.hasOwnProperty(t)&&So[t]?(""+e).trim():e+"px"}function Dx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Px(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Bb=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zd(t,e){if(e){if(Bb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function eh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nh=null,ti=null,ni=null;function Ng(t){if(t=Ea(t)){if(typeof nh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Jc(e),nh(t.stateNode,t.type,e))}}function Lx(t){ti?ni?ni.push(t):ni=[t]:ti=t}function Mx(){if(ti){var t=ti,e=ni;if(ni=ti=null,Ng(t),e)for(t=0;t<e.length;t++)Ng(e[t])}}function Vx(t,e){return t(e)}function Ox(){}var od=!1;function Fx(t,e,n){if(od)return t(e,n);od=!0;try{return Vx(t,e,n)}finally{od=!1,(ti!==null||ni!==null)&&(Ox(),Mx())}}function Wo(t,e){var n=t.stateNode;if(n===null)return null;var r=Jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var rh=!1;if(On)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){rh=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{rh=!1}function Hb(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Co=!1,Xl=null,Zl=!1,sh=null,qb={onError:function(t){Co=!0,Xl=t}};function Wb(t,e,n,r,s,i,a,c,u){Co=!1,Xl=null,Hb.apply(qb,arguments)}function Gb(t,e,n,r,s,i,a,c,u){if(Wb.apply(this,arguments),Co){if(Co){var d=Xl;Co=!1,Xl=null}else throw Error(U(198));Zl||(Zl=!0,sh=d)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ux(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tg(t){if(Ss(t)!==t)throw Error(U(188))}function Kb(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tg(s),t;if(i===r)return Tg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function zx(t){return t=Kb(t),t!==null?$x(t):null}function $x(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$x(t);if(e!==null)return e;t=t.sibling}return null}var Bx=Ct.unstable_scheduleCallback,Ig=Ct.unstable_cancelCallback,Qb=Ct.unstable_shouldYield,Yb=Ct.unstable_requestPaint,Ce=Ct.unstable_now,Jb=Ct.unstable_getCurrentPriorityLevel,Tf=Ct.unstable_ImmediatePriority,Hx=Ct.unstable_UserBlockingPriority,ec=Ct.unstable_NormalPriority,Xb=Ct.unstable_LowPriority,qx=Ct.unstable_IdlePriority,Gc=null,mn=null;function Zb(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Gc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:nN,eN=Math.log,tN=Math.LN2;function nN(t){return t>>>=0,t===0?32:31-(eN(t)/tN|0)|0}var rl=64,sl=4194304;function _o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=_o(c):(i&=a,i!==0&&(r=_o(i)))}else a=n&~s,a!==0?r=_o(a):i!==0&&(r=_o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),s=1<<n,r|=t[n],e&=~s;return r}function rN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zt(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=rN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wx(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function iN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function If(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ce=0;function Gx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Kx,jf,Qx,Yx,Jx,oh=!1,il=[],_r=null,wr=null,Er=null,Go=new Map,Ko=new Map,ur=[],oN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jg(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(e.pointerId)}}function lo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ea(e),e!==null&&jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aN(t,e,n,r,s){switch(e){case"focusin":return _r=lo(_r,t,e,n,r,s),!0;case"dragenter":return wr=lo(wr,t,e,n,r,s),!0;case"mouseover":return Er=lo(Er,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Go.set(i,lo(Go.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ko.set(i,lo(Ko.get(i)||null,t,e,n,r,s)),!0}return!1}function Xx(t){var e=os(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=Ux(n),e!==null){t.blockedOn=e,Jx(t.priority,function(){Qx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ah(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);th=r,n.target.dispatchEvent(r),th=null}else return e=Ea(n),e!==null&&jf(e),t.blockedOn=n,!1;e.shift()}return!0}function Sg(t,e,n){jl(t)&&n.delete(e)}function lN(){oh=!1,_r!==null&&jl(_r)&&(_r=null),wr!==null&&jl(wr)&&(wr=null),Er!==null&&jl(Er)&&(Er=null),Go.forEach(Sg),Ko.forEach(Sg)}function co(t,e){t.blockedOn===e&&(t.blockedOn=null,oh||(oh=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,lN)))}function Qo(t){function e(s){return co(s,t)}if(0<il.length){co(il[0],t);for(var n=1;n<il.length;n++){var r=il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_r!==null&&co(_r,t),wr!==null&&co(wr,t),Er!==null&&co(Er,t),Go.forEach(e),Ko.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Xx(n),n.blockedOn===null&&ur.shift()}var ri=Qn.ReactCurrentBatchConfig,nc=!0;function cN(t,e,n,r){var s=ce,i=ri.transition;ri.transition=null;try{ce=1,Sf(t,e,n,r)}finally{ce=s,ri.transition=i}}function uN(t,e,n,r){var s=ce,i=ri.transition;ri.transition=null;try{ce=4,Sf(t,e,n,r)}finally{ce=s,ri.transition=i}}function Sf(t,e,n,r){if(nc){var s=ah(t,e,n,r);if(s===null)yd(t,e,r,rc,n),jg(t,r);else if(aN(s,t,e,n,r))r.stopPropagation();else if(jg(t,r),e&4&&-1<oN.indexOf(t)){for(;s!==null;){var i=Ea(s);if(i!==null&&Kx(i),i=ah(t,e,n,r),i===null&&yd(t,e,r,rc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yd(t,e,r,null,n)}}var rc=null;function ah(t,e,n,r){if(rc=null,t=Nf(r),t=os(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ux(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rc=t,null}function Zx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jb()){case Tf:return 1;case Hx:return 4;case ec:case Xb:return 16;case qx:return 536870912;default:return 16}default:return 16}}var yr=null,Cf=null,Sl=null;function ev(){if(Sl)return Sl;var t,e=Cf,n=e.length,r,s="value"in yr?yr.value:yr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Sl=s.slice(t,1<r?1-r:void 0)}function Cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function Cg(){return!1}function Rt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ol:Cg,this.isPropagationStopped=Cg,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=Rt(Ci),wa=Ee({},Ci,{view:0,detail:0}),dN=Rt(wa),ld,cd,uo,Kc=Ee({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(ld=t.screenX-uo.screenX,cd=t.screenY-uo.screenY):cd=ld=0,uo=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:cd}}),kg=Rt(Kc),hN=Ee({},Kc,{dataTransfer:0}),fN=Rt(hN),mN=Ee({},wa,{relatedTarget:0}),ud=Rt(mN),pN=Ee({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),gN=Rt(pN),yN=Ee({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xN=Rt(yN),vN=Ee({},Ci,{data:0}),Rg=Rt(vN),_N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EN[t])?!!e[t]:!1}function Rf(){return bN}var NN=Ee({},wa,{key:function(t){if(t.key){var e=_N[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(t){return t.type==="keypress"?Cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TN=Rt(NN),IN=Ee({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ag=Rt(IN),jN=Ee({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),SN=Rt(jN),CN=Ee({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),kN=Rt(CN),RN=Ee({},Kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AN=Rt(RN),PN=[9,13,27,32],Af=On&&"CompositionEvent"in window,ko=null;On&&"documentMode"in document&&(ko=document.documentMode);var DN=On&&"TextEvent"in window&&!ko,tv=On&&(!Af||ko&&8<ko&&11>=ko),Pg=" ",Dg=!1;function nv(t,e){switch(t){case"keyup":return PN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function LN(t,e){switch(t){case"compositionend":return rv(e);case"keypress":return e.which!==32?null:(Dg=!0,Pg);case"textInput":return t=e.data,t===Pg&&Dg?null:t;default:return null}}function MN(t,e){if(Bs)return t==="compositionend"||!Af&&nv(t,e)?(t=ev(),Sl=Cf=yr=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tv&&e.locale!=="ko"?null:e.data;default:return null}}var VN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VN[t.type]:e==="textarea"}function sv(t,e,n,r){Lx(r),e=sc(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,Yo=null;function ON(t){pv(t,0)}function Qc(t){var e=Ws(t);if(Sx(e))return t}function FN(t,e){if(t==="change")return e}var iv=!1;if(On){var dd;if(On){var hd="oninput"in document;if(!hd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),hd=typeof Mg.oninput=="function"}dd=hd}else dd=!1;iv=dd&&(!document.documentMode||9<document.documentMode)}function Vg(){Ro&&(Ro.detachEvent("onpropertychange",ov),Yo=Ro=null)}function ov(t){if(t.propertyName==="value"&&Qc(Yo)){var e=[];sv(e,Yo,t,Nf(t)),Fx(ON,e)}}function UN(t,e,n){t==="focusin"?(Vg(),Ro=e,Yo=n,Ro.attachEvent("onpropertychange",ov)):t==="focusout"&&Vg()}function zN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(Yo)}function $N(t,e){if(t==="click")return Qc(e)}function BN(t,e){if(t==="input"||t==="change")return Qc(e)}function HN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:HN;function Jo(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bd.call(e,s)||!nn(t[s],e[s]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,e){var n=Og(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Og(n)}}function av(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?av(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lv(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qN(t){var e=lv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&av(n.ownerDocument.documentElement,n)){if(r!==null&&Pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fg(n,i);var a=Fg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WN=On&&"documentMode"in document&&11>=document.documentMode,Hs=null,lh=null,Ao=null,ch=!1;function Ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ch||Hs==null||Hs!==Jl(r)||(r=Hs,"selectionStart"in r&&Pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ao&&Jo(Ao,r)||(Ao=r,r=sc(lh,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},fd={},cv={};On&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Yc(t){if(fd[t])return fd[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cv)return fd[t]=e[n];return t}var uv=Yc("animationend"),dv=Yc("animationiteration"),hv=Yc("animationstart"),fv=Yc("transitionend"),mv=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(t,e){mv.set(t,e),js(e,[t])}for(var md=0;md<zg.length;md++){var pd=zg[md],GN=pd.toLowerCase(),KN=pd[0].toUpperCase()+pd.slice(1);$r(GN,"on"+KN)}$r(uv,"onAnimationEnd");$r(dv,"onAnimationIteration");$r(hv,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(fv,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QN=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function $g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gb(r,e,void 0,t),t.currentTarget=null}function pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;$g(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;$g(s,c,d),i=u}}}if(Zl)throw t=sh,Zl=!1,sh=null,t}function pe(t,e){var n=e[mh];n===void 0&&(n=e[mh]=new Set);var r=t+"__bubble";n.has(r)||(gv(e,t,2,!1),n.add(r))}function gd(t,e,n){var r=0;e&&(r|=4),gv(n,t,r,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function Xo(t){if(!t[ll]){t[ll]=!0,bx.forEach(function(n){n!=="selectionchange"&&(QN.has(n)||gd(n,!1,t),gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,gd("selectionchange",!1,e))}}function gv(t,e,n,r){switch(Zx(e)){case 1:var s=cN;break;case 4:s=uN;break;default:s=Sf}n=s.bind(null,e,n,t),s=void 0,!rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=os(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Fx(function(){var d=i,h=Nf(n),m=[];e:{var g=mv.get(t);if(g!==void 0){var x=kf,b=t;switch(t){case"keypress":if(Cl(n)===0)break e;case"keydown":case"keyup":x=TN;break;case"focusin":b="focus",x=ud;break;case"focusout":b="blur",x=ud;break;case"beforeblur":case"afterblur":x=ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=fN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=SN;break;case uv:case dv:case hv:x=gN;break;case fv:x=kN;break;case"scroll":x=dN;break;case"wheel":x=AN;break;case"copy":case"cut":case"paste":x=xN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ag}var I=(e&4)!==0,A=!I&&t==="scroll",E=I?g!==null?g+"Capture":null:g;I=[];for(var _=d,w;_!==null;){w=_;var D=w.stateNode;if(w.tag===5&&D!==null&&(w=D,E!==null&&(D=Wo(_,E),D!=null&&I.push(Zo(_,D,w)))),A)break;_=_.return}0<I.length&&(g=new x(g,b,null,n,h),m.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==th&&(b=n.relatedTarget||n.fromElement)&&(os(b)||b[Fn]))break e;if((x||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,x?(b=n.relatedTarget||n.toElement,x=d,b=b?os(b):null,b!==null&&(A=Ss(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(I=kg,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Ag,D="onPointerLeave",E="onPointerEnter",_="pointer"),A=x==null?g:Ws(x),w=b==null?g:Ws(b),g=new I(D,_+"leave",x,n,h),g.target=A,g.relatedTarget=w,D=null,os(h)===d&&(I=new I(E,_+"enter",b,n,h),I.target=w,I.relatedTarget=A,D=I),A=D,x&&b)t:{for(I=x,E=b,_=0,w=I;w;w=Ls(w))_++;for(w=0,D=E;D;D=Ls(D))w++;for(;0<_-w;)I=Ls(I),_--;for(;0<w-_;)E=Ls(E),w--;for(;_--;){if(I===E||E!==null&&I===E.alternate)break t;I=Ls(I),E=Ls(E)}I=null}else I=null;x!==null&&Bg(m,g,x,I,!1),b!==null&&A!==null&&Bg(m,A,b,I,!0)}}e:{if(g=d?Ws(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var M=FN;else if(Lg(g))if(iv)M=BN;else{M=zN;var F=UN}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=$N);if(M&&(M=M(t,d))){sv(m,M,n,h);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Yd(g,"number",g.value)}switch(F=d?Ws(d):window,t){case"focusin":(Lg(F)||F.contentEditable==="true")&&(Hs=F,lh=d,Ao=null);break;case"focusout":Ao=lh=Hs=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,Ug(m,n,h);break;case"selectionchange":if(WN)break;case"keydown":case"keyup":Ug(m,n,h)}var N;if(Af)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Bs?nv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(tv&&n.locale!=="ko"&&(Bs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Bs&&(N=ev()):(yr=h,Cf="value"in yr?yr.value:yr.textContent,Bs=!0)),F=sc(d,v),0<F.length&&(v=new Rg(v,t,null,n,h),m.push({event:v,listeners:F}),N?v.data=N:(N=rv(n),N!==null&&(v.data=N)))),(N=DN?LN(t,n):MN(t,n))&&(d=sc(d,"onBeforeInput"),0<d.length&&(h=new Rg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=N))}pv(m,e)})}function Zo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wo(t,n),i!=null&&r.unshift(Zo(t,i,s)),i=Wo(t,e),i!=null&&r.push(Zo(t,i,s))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Wo(n,i),u!=null&&a.unshift(Zo(n,u,c))):s||(u=Wo(n,i),u!=null&&a.push(Zo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var YN=/\r\n?/g,JN=/\u0000|\uFFFD/g;function Hg(t){return(typeof t=="string"?t:""+t).replace(YN,`
`).replace(JN,"")}function cl(t,e,n){if(e=Hg(e),Hg(t)!==e&&n)throw Error(U(425))}function ic(){}var uh=null,dh=null;function hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,XN=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,ZN=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(t){return qg.resolve(null).then(t).catch(e2)}:fh;function e2(t){setTimeout(function(){throw t})}function xd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Qo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qo(e)}function br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ki=Math.random().toString(36).slice(2),hn="__reactFiber$"+ki,ea="__reactProps$"+ki,Fn="__reactContainer$"+ki,mh="__reactEvents$"+ki,t2="__reactListeners$"+ki,n2="__reactHandles$"+ki;function os(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wg(t);t!==null;){if(n=t[hn])return n;t=Wg(t)}return e}t=n,n=t.parentNode}return null}function Ea(t){return t=t[hn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Jc(t){return t[ea]||null}var ph=[],Gs=-1;function Br(t){return{current:t}}function ge(t){0>Gs||(t.current=ph[Gs],ph[Gs]=null,Gs--)}function fe(t,e){Gs++,ph[Gs]=t.current,t.current=e}var Lr={},ct=Br(Lr),wt=Br(!1),ms=Lr;function mi(t,e){var n=t.type.contextTypes;if(!n)return Lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function oc(){ge(wt),ge(ct)}function Gg(t,e,n){if(ct.current!==Lr)throw Error(U(168));fe(ct,e),fe(wt,n)}function yv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,Ub(t)||"Unknown",s));return Ee({},n,r)}function ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lr,ms=ct.current,fe(ct,t),fe(wt,wt.current),!0}function Kg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=yv(t,e,ms),r.__reactInternalMemoizedMergedChildContext=t,ge(wt),ge(ct),fe(ct,t)):ge(wt),fe(wt,n)}var In=null,Xc=!1,vd=!1;function xv(t){In===null?In=[t]:In.push(t)}function r2(t){Xc=!0,xv(t)}function Hr(){if(!vd&&In!==null){vd=!0;var t=0,e=ce;try{var n=In;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,Xc=!1}catch(s){throw In!==null&&(In=In.slice(t+1)),Bx(Tf,Hr),s}finally{ce=e,vd=!1}}return null}var Ks=[],Qs=0,lc=null,cc=0,Dt=[],Lt=0,ps=null,Sn=1,Cn="";function rs(t,e){Ks[Qs++]=cc,Ks[Qs++]=lc,lc=t,cc=e}function vv(t,e,n){Dt[Lt++]=Sn,Dt[Lt++]=Cn,Dt[Lt++]=ps,ps=t;var r=Sn;t=Cn;var s=32-Zt(r)-1;r&=~(1<<s),n+=1;var i=32-Zt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Sn=1<<32-Zt(e)+s|n<<s|r,Cn=i+t}else Sn=1<<i|n<<s|r,Cn=t}function Df(t){t.return!==null&&(rs(t,1),vv(t,1,0))}function Lf(t){for(;t===lc;)lc=Ks[--Qs],Ks[Qs]=null,cc=Ks[--Qs],Ks[Qs]=null;for(;t===ps;)ps=Dt[--Lt],Dt[Lt]=null,Cn=Dt[--Lt],Dt[Lt]=null,Sn=Dt[--Lt],Dt[Lt]=null}var St=null,It=null,xe=!1,Qt=null;function _v(t,e){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,It=br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Sn,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,It=null,!0):!1;default:return!1}}function gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yh(t){if(xe){var e=It;if(e){var n=e;if(!Qg(t,e)){if(gh(t))throw Error(U(418));e=br(n.nextSibling);var r=St;e&&Qg(t,e)?_v(r,n):(t.flags=t.flags&-4097|2,xe=!1,St=t)}}else{if(gh(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,St=t}}}function Yg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function ul(t){if(t!==St)return!1;if(!xe)return Yg(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hh(t.type,t.memoizedProps)),e&&(e=It)){if(gh(t))throw wv(),Error(U(418));for(;e;)_v(t,e),e=br(e.nextSibling)}if(Yg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=St?br(t.stateNode.nextSibling):null;return!0}function wv(){for(var t=It;t;)t=br(t.nextSibling)}function pi(){It=St=null,xe=!1}function Mf(t){Qt===null?Qt=[t]:Qt.push(t)}var s2=Qn.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jg(t){var e=t._init;return e(t._payload)}function Ev(t){function e(E,_){if(t){var w=E.deletions;w===null?(E.deletions=[_],E.flags|=16):w.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=jr(E,_),E.index=0,E.sibling=null,E}function i(E,_,w){return E.index=w,t?(w=E.alternate,w!==null?(w=w.index,w<_?(E.flags|=2,_):w):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,_,w,D){return _===null||_.tag!==6?(_=Id(w,E.mode,D),_.return=E,_):(_=s(_,w),_.return=E,_)}function u(E,_,w,D){var M=w.type;return M===$s?h(E,_,w.props.children,D,w.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===lr&&Jg(M)===_.type)?(D=s(_,w.props),D.ref=ho(E,_,w),D.return=E,D):(D=Ml(w.type,w.key,w.props,null,E.mode,D),D.ref=ho(E,_,w),D.return=E,D)}function d(E,_,w,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=jd(w,E.mode,D),_.return=E,_):(_=s(_,w.children||[]),_.return=E,_)}function h(E,_,w,D,M){return _===null||_.tag!==7?(_=ds(w,E.mode,D,M),_.return=E,_):(_=s(_,w),_.return=E,_)}function m(E,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Id(""+_,E.mode,w),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case el:return w=Ml(_.type,_.key,_.props,null,E.mode,w),w.ref=ho(E,null,_),w.return=E,w;case zs:return _=jd(_,E.mode,w),_.return=E,_;case lr:var D=_._init;return m(E,D(_._payload),w)}if(vo(_)||oo(_))return _=ds(_,E.mode,w,null),_.return=E,_;dl(E,_)}return null}function g(E,_,w,D){var M=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:c(E,_,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case el:return w.key===M?u(E,_,w,D):null;case zs:return w.key===M?d(E,_,w,D):null;case lr:return M=w._init,g(E,_,M(w._payload),D)}if(vo(w)||oo(w))return M!==null?null:h(E,_,w,D,null);dl(E,w)}return null}function x(E,_,w,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(w)||null,c(_,E,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case el:return E=E.get(D.key===null?w:D.key)||null,u(_,E,D,M);case zs:return E=E.get(D.key===null?w:D.key)||null,d(_,E,D,M);case lr:var F=D._init;return x(E,_,w,F(D._payload),M)}if(vo(D)||oo(D))return E=E.get(w)||null,h(_,E,D,M,null);dl(_,D)}return null}function b(E,_,w,D){for(var M=null,F=null,N=_,v=_=0,T=null;N!==null&&v<w.length;v++){N.index>v?(T=N,N=null):T=N.sibling;var S=g(E,N,w[v],D);if(S===null){N===null&&(N=T);break}t&&N&&S.alternate===null&&e(E,N),_=i(S,_,v),F===null?M=S:F.sibling=S,F=S,N=T}if(v===w.length)return n(E,N),xe&&rs(E,v),M;if(N===null){for(;v<w.length;v++)N=m(E,w[v],D),N!==null&&(_=i(N,_,v),F===null?M=N:F.sibling=N,F=N);return xe&&rs(E,v),M}for(N=r(E,N);v<w.length;v++)T=x(N,E,v,w[v],D),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?v:T.key),_=i(T,_,v),F===null?M=T:F.sibling=T,F=T);return t&&N.forEach(function(R){return e(E,R)}),xe&&rs(E,v),M}function I(E,_,w,D){var M=oo(w);if(typeof M!="function")throw Error(U(150));if(w=M.call(w),w==null)throw Error(U(151));for(var F=M=null,N=_,v=_=0,T=null,S=w.next();N!==null&&!S.done;v++,S=w.next()){N.index>v?(T=N,N=null):T=N.sibling;var R=g(E,N,S.value,D);if(R===null){N===null&&(N=T);break}t&&N&&R.alternate===null&&e(E,N),_=i(R,_,v),F===null?M=R:F.sibling=R,F=R,N=T}if(S.done)return n(E,N),xe&&rs(E,v),M;if(N===null){for(;!S.done;v++,S=w.next())S=m(E,S.value,D),S!==null&&(_=i(S,_,v),F===null?M=S:F.sibling=S,F=S);return xe&&rs(E,v),M}for(N=r(E,N);!S.done;v++,S=w.next())S=x(N,E,v,S.value,D),S!==null&&(t&&S.alternate!==null&&N.delete(S.key===null?v:S.key),_=i(S,_,v),F===null?M=S:F.sibling=S,F=S);return t&&N.forEach(function(C){return e(E,C)}),xe&&rs(E,v),M}function A(E,_,w,D){if(typeof w=="object"&&w!==null&&w.type===$s&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case el:e:{for(var M=w.key,F=_;F!==null;){if(F.key===M){if(M=w.type,M===$s){if(F.tag===7){n(E,F.sibling),_=s(F,w.props.children),_.return=E,E=_;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===lr&&Jg(M)===F.type){n(E,F.sibling),_=s(F,w.props),_.ref=ho(E,F,w),_.return=E,E=_;break e}n(E,F);break}else e(E,F);F=F.sibling}w.type===$s?(_=ds(w.props.children,E.mode,D,w.key),_.return=E,E=_):(D=Ml(w.type,w.key,w.props,null,E.mode,D),D.ref=ho(E,_,w),D.return=E,E=D)}return a(E);case zs:e:{for(F=w.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(E,_.sibling),_=s(_,w.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=jd(w,E.mode,D),_.return=E,E=_}return a(E);case lr:return F=w._init,A(E,_,F(w._payload),D)}if(vo(w))return b(E,_,w,D);if(oo(w))return I(E,_,w,D);dl(E,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,w),_.return=E,E=_):(n(E,_),_=Id(w,E.mode,D),_.return=E,E=_),a(E)):n(E,_)}return A}var gi=Ev(!0),bv=Ev(!1),uc=Br(null),dc=null,Ys=null,Vf=null;function Of(){Vf=Ys=dc=null}function Ff(t){var e=uc.current;ge(uc),t._currentValue=e}function xh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function si(t,e){dc=t,Vf=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(dc===null)throw Error(U(308));Ys=t,dc.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var as=null;function Uf(t){as===null?as=[t]:as.push(t)}function Nv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Un(t,r)}function Un(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Un(t,n)}return s=r.interleaved,s===null?(e.next=e,Uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Un(t,n)}function kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}function Xg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hc(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==a&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,h=d=u=null,c=i;do{var g=c.lane,x=c.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,I=c;switch(g=e,x=n,I.tag){case 1:if(b=I.payload,typeof b=="function"){m=b.call(x,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=I.payload,g=typeof b=="function"?b.call(x,m,g):b,g==null)break e;m=Ee({},m,g);break e;case 2:cr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else x={eventTime:x,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=x,u=m):h=h.next=x,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ys|=a,t.lanes=a,t.memoizedState=m}}function Zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ba={},pn=Br(ba),ta=Br(ba),na=Br(ba);function ls(t){if(t===ba)throw Error(U(174));return t}function $f(t,e){switch(fe(na,e),fe(ta,t),fe(pn,ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xd(e,t)}ge(pn),fe(pn,e)}function yi(){ge(pn),ge(ta),ge(na)}function Iv(t){ls(na.current);var e=ls(pn.current),n=Xd(e,t.type);e!==n&&(fe(ta,t),fe(pn,n))}function Bf(t){ta.current===t&&(ge(pn),ge(ta))}var _e=Br(0);function fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function Hf(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var Rl=Qn.ReactCurrentDispatcher,wd=Qn.ReactCurrentBatchConfig,gs=0,we=null,Le=null,Be=null,mc=!1,Po=!1,ra=0,i2=0;function nt(){throw Error(U(321))}function qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Wf(t,e,n,r,s,i){if(gs=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?c2:u2,t=n(r,s),Po){i=0;do{if(Po=!1,ra=0,25<=i)throw Error(U(301));i+=1,Be=Le=null,e.updateQueue=null,Rl.current=d2,t=n(r,s)}while(Po)}if(Rl.current=pc,e=Le!==null&&Le.next!==null,gs=0,Be=Le=we=null,mc=!1,e)throw Error(U(300));return t}function Gf(){var t=ra!==0;return ra=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?we.memoizedState=Be=t:Be=Be.next=t,Be}function $t(){if(Le===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?we.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?we.memoizedState=Be=t:Be=Be.next=t}return Be}function sa(t,e){return typeof e=="function"?e(t):e}function Ed(t){var e=$t(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var h=d.lane;if((gs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,we.lanes|=h,ys|=h}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,nn(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bd(t){var e=$t(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nn(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jv(){}function Sv(t,e){var n=we,r=$t(),s=e(),i=!nn(r.memoizedState,s);if(i&&(r.memoizedState=s,_t=!0),r=r.queue,Kf(Rv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ia(9,kv.bind(null,n,r,s,e),void 0,null),He===null)throw Error(U(349));gs&30||Cv(n,e,s)}return s}function Cv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kv(t,e,n,r){e.value=n,e.getSnapshot=r,Av(e)&&Pv(t)}function Rv(t,e,n){return n(function(){Av(e)&&Pv(t)})}function Av(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function Pv(t){var e=Un(t,1);e!==null&&en(e,t,1,-1)}function e0(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t},e.queue=t,t=t.dispatch=l2.bind(null,we,t),[e.memoizedState,t]}function ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dv(){return $t().memoizedState}function Al(t,e,n,r){var s=un();we.flags|=t,s.memoizedState=ia(1|e,n,void 0,r===void 0?null:r)}function Zc(t,e,n,r){var s=$t();r=r===void 0?null:r;var i=void 0;if(Le!==null){var a=Le.memoizedState;if(i=a.destroy,r!==null&&qf(r,a.deps)){s.memoizedState=ia(e,n,i,r);return}}we.flags|=t,s.memoizedState=ia(1|e,n,i,r)}function t0(t,e){return Al(8390656,8,t,e)}function Kf(t,e){return Zc(2048,8,t,e)}function Lv(t,e){return Zc(4,2,t,e)}function Mv(t,e){return Zc(4,4,t,e)}function Vv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ov(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4,4,Vv.bind(null,e,t),n)}function Qf(){}function Fv(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uv(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zv(t,e,n){return gs&21?(nn(n,e)||(n=Wx(),we.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function o2(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=wd.transition;wd.transition={};try{t(!1),e()}finally{ce=n,wd.transition=r}}function $v(){return $t().memoizedState}function a2(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bv(t))Hv(e,n);else if(n=Nv(t,e,n,r),n!==null){var s=mt();en(n,t,r,s),qv(n,e,r)}}function l2(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bv(t))Hv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,nn(c,a)){var u=e.interleaved;u===null?(s.next=s,Uf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Nv(t,e,s,r),n!==null&&(s=mt(),en(n,t,r,s),qv(n,e,r))}}function Bv(t){var e=t.alternate;return t===we||e!==null&&e===we}function Hv(t,e){Po=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}var pc={readContext:zt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},c2={readContext:zt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:t0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Al(4194308,4,Vv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Al(4194308,4,t,e)},useInsertionEffect:function(t,e){return Al(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=a2.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:e0,useDebugValue:Qf,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=e0(!1),e=t[0];return t=o2.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,s=un();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),He===null)throw Error(U(349));gs&30||Cv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,t0(Rv.bind(null,r,i,t),[t]),r.flags|=2048,ia(9,kv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=un(),e=He.identifierPrefix;if(xe){var n=Cn,r=Sn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},u2={readContext:zt,useCallback:Fv,useContext:zt,useEffect:Kf,useImperativeHandle:Ov,useInsertionEffect:Lv,useLayoutEffect:Mv,useMemo:Uv,useReducer:Ed,useRef:Dv,useState:function(){return Ed(sa)},useDebugValue:Qf,useDeferredValue:function(t){var e=$t();return zv(e,Le.memoizedState,t)},useTransition:function(){var t=Ed(sa)[0],e=$t().memoizedState;return[t,e]},useMutableSource:jv,useSyncExternalStore:Sv,useId:$v,unstable_isNewReconciler:!1},d2={readContext:zt,useCallback:Fv,useContext:zt,useEffect:Kf,useImperativeHandle:Ov,useInsertionEffect:Lv,useLayoutEffect:Mv,useMemo:Uv,useReducer:bd,useRef:Dv,useState:function(){return bd(sa)},useDebugValue:Qf,useDeferredValue:function(t){var e=$t();return Le===null?e.memoizedState=t:zv(e,Le.memoizedState,t)},useTransition:function(){var t=bd(sa)[0],e=$t().memoizedState;return[t,e]},useMutableSource:jv,useSyncExternalStore:Sv,useId:$v,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eu={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Ir(t),i=An(r,s);i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(en(e,t,s,r),kl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Ir(t),i=An(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Nr(t,i,s),e!==null&&(en(e,t,s,r),kl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=Ir(t),s=An(n,r);s.tag=2,e!=null&&(s.callback=e),e=Nr(t,s,r),e!==null&&(en(e,t,r,n),kl(e,t,r))}};function n0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Jo(n,r)||!Jo(s,i):!0}function Wv(t,e,n){var r=!1,s=Lr,i=e.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=Et(e)?ms:ct.current,r=e.contextTypes,i=(r=r!=null)?mi(t,s):Lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function r0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eu.enqueueReplaceState(e,e.state,null)}function _h(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=Et(e)?ms:ct.current,s.context=mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eu.enqueueReplaceState(s,s.state,null),hc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xi(t,e){try{var n="",r=e;do n+=Fb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h2=typeof WeakMap=="function"?WeakMap:Map;function Gv(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yc||(yc=!0,Rh=r),wh(t,e)},n}function Kv(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wh(t,e),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function s0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new h2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=I2.bind(null,t,e,n),e.then(t,t))}function i0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function o0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var f2=Qn.ReactCurrentOwner,_t=!1;function ft(t,e,n,r){e.child=t===null?bv(e,null,n,r):gi(e,t.child,n,r)}function a0(t,e,n,r,s){n=n.render;var i=e.ref;return si(e,s),r=Wf(t,e,n,r,i,s),n=Gf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(xe&&n&&Df(e),e.flags|=1,ft(t,e,r,s),e.child)}function l0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qv(t,e,i,r,s)):(t=Ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jo,n(a,r)&&t.ref===e.ref)return zn(t,e,s)}return e.flags|=1,t=jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Jo(i,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,zn(t,e,s)}return Eh(t,e,n,r,s)}function Yv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Xs,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Xs,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe(Xs,Tt),Tt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,fe(Xs,Tt),Tt|=r;return ft(t,e,s,n),e.child}function Jv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eh(t,e,n,r,s){var i=Et(n)?ms:ct.current;return i=mi(e,i),si(e,s),n=Wf(t,e,n,r,i,s),r=Gf(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zn(t,e,s)):(xe&&r&&Df(e),e.flags|=1,ft(t,e,n,s),e.child)}function c0(t,e,n,r,s){if(Et(n)){var i=!0;ac(e)}else i=!1;if(si(e,s),e.stateNode===null)Pl(t,e),Wv(e,n,r),_h(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=Et(n)?ms:ct.current,d=mi(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&r0(e,a,r,d),cr=!1;var g=e.memoizedState;a.state=g,hc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||wt.current||cr?(typeof h=="function"&&(vh(e,n,h,r),u=e.memoizedState),(c=cr||n0(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Tv(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Gt(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=zt(u):(u=Et(n)?ms:ct.current,u=mi(e,u));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&r0(e,a,r,u),cr=!1,g=e.memoizedState,a.state=g,hc(e,r,a,s);var b=e.memoizedState;c!==m||g!==b||wt.current||cr?(typeof x=="function"&&(vh(e,n,x,r),b=e.memoizedState),(d=cr||n0(e,n,d,r,g,b,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return bh(t,e,n,r,i,s)}function bh(t,e,n,r,s,i){Jv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Kg(e,n,!1),zn(t,e,i);r=e.stateNode,f2.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,c,i)):ft(t,e,c,i),e.memoizedState=r.state,s&&Kg(e,n,!0),e.child}function Xv(t){var e=t.stateNode;e.pendingContext?Gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gg(t,e.context,!1),$f(t,e.containerInfo)}function u0(t,e,n,r,s){return pi(),Mf(s),e.flags|=256,ft(t,e,n,r),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Th(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zv(t,e,n){var r=e.pendingProps,s=_e.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),fe(_e,s&1),t===null)return yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ru(a,r,0,null),t=ds(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Th(n),e.memoizedState=Nh,t):Yf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return m2(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=jr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=jr(c,i):(i=ds(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Th(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Nh,r}return i=t.child,t=i.sibling,r=jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,r){return r!==null&&Mf(r),gi(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m2(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Nd(Error(U(422))),hl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ru({mode:"visible",children:r.children},s,0,null),i=ds(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gi(e,t.child,null,a),e.child.memoizedState=Th(a),e.memoizedState=Nh,i);if(!(e.mode&1))return hl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(U(419)),r=Nd(i,r,void 0),hl(t,e,a,r)}if(c=(a&t.childLanes)!==0,_t||c){if(r=He,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Un(t,s),en(r,t,s,-1))}return nm(),r=Nd(Error(U(421))),hl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=j2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=br(s.nextSibling),St=e,xe=!0,Qt=null,t!==null&&(Dt[Lt++]=Sn,Dt[Lt++]=Cn,Dt[Lt++]=ps,Sn=t.id,Cn=t.overflow,ps=e),e=Yf(e,r.children),e.flags|=4096,e)}function d0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xh(t.return,e,n)}function Td(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function e1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&d0(t,n,e);else if(t.tag===19)d0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(_e,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,i);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function p2(t,e,n){switch(e.tag){case 3:Xv(e),pi();break;case 5:Iv(e);break;case 1:Et(e.type)&&ac(e);break;case 4:$f(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;fe(uc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?Zv(t,e,n):(fe(_e,_e.current&1),t=zn(t,e,n),t!==null?t.sibling:null);fe(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return e1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,Yv(t,e,n)}return zn(t,e,n)}var t1,Ih,n1,r1;t1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ih=function(){};n1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ls(pn.current);var i=null;switch(n){case"input":s=Kd(t,s),r=Kd(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=Jd(t,s),r=Jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ic)}Zd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ho.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ho.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};r1=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g2(t,e,n){var r=e.pendingProps;switch(Lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Et(e.type)&&oc(),rt(e),null;case 3:return r=e.stateNode,yi(),ge(wt),ge(ct),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qt!==null&&(Dh(Qt),Qt=null))),Ih(t,e),rt(e),null;case 5:Bf(e);var s=ls(na.current);if(n=e.type,t!==null&&e.stateNode!=null)n1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return rt(e),null}if(t=ls(pn.current),ul(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hn]=e,r[ea]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<wo.length;s++)pe(wo[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":_g(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":Eg(r,i),pe("invalid",r)}Zd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&cl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&cl(r.textContent,c,t),s=["children",""+c]):Ho.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&pe("scroll",r)}switch(n){case"input":tl(r),wg(r,i,!0);break;case"textarea":tl(r),bg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ic)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hn]=e,t[ea]=r,t1(t,e,!1,!1),e.stateNode=t;e:{switch(a=eh(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<wo.length;s++)pe(wo[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":_g(t,r),s=Kd(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),pe("invalid",t);break;case"textarea":Eg(t,r),s=Jd(t,r),pe("invalid",t);break;default:s=r}Zd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Dx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ax(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qo(t,u):typeof u=="number"&&qo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ho.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&_f(t,i,u,a))}switch(n){case"input":tl(t),wg(t,r,!1);break;case"textarea":tl(t),bg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ei(t,!!r.multiple,i,!1):r.defaultValue!=null&&ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)r1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ls(na.current),ls(pn.current),ul(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(i=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return rt(e),null;case 13:if(ge(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&It!==null&&e.mode&1&&!(e.flags&128))wv(),pi(),e.flags|=98560,i=!1;else if(i=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[hn]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Qt!==null&&(Dh(Qt),Qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Oe===0&&(Oe=3):nm())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return yi(),Ih(t,e),t===null&&Xo(e.stateNode.containerInfo),rt(e),null;case 10:return Ff(e.type._context),rt(e),null;case 17:return Et(e.type)&&oc(),rt(e),null;case 19:if(ge(_e),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)fo(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=fc(t),a!==null){for(e.flags|=128,fo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(_e,_e.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ce()>vi&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=fc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xe)return rt(e),null}else 2*Ce()-i.renderingStartTime>vi&&n!==1073741824&&(e.flags|=128,r=!0,fo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ce(),e.sibling=null,n=_e.current,fe(_e,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function y2(t,e){switch(Lf(e),e.tag){case 1:return Et(e.type)&&oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),ge(wt),ge(ct),Hf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(ge(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(_e),null;case 4:return yi(),null;case 10:return Ff(e.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var fl=!1,at=!1,x2=typeof WeakSet=="function"?WeakSet:Set,q=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function jh(t,e,n){try{n()}catch(r){Te(t,e,r)}}var h0=!1;function v2(t,e){if(uh=nc,t=lv(),Pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,h=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++h===r&&(u=a),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dh={focusedElem:t,selectionRange:n},nc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var I=b.memoizedProps,A=b.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?I:Gt(e.type,I),A);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Te(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=h0,h0=!1,b}function Do(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jh(e,n,i)}s=s.next}while(s!==r)}}function tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function s1(t){var e=t.alternate;e!==null&&(t.alternate=null,s1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[ea],delete e[mh],delete e[t2],delete e[n2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i1(t){return t.tag===5||t.tag===3||t.tag===4}function f0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ch(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ic));else if(r!==4&&(t=t.child,t!==null))for(Ch(t,e,n),t=t.sibling;t!==null;)Ch(t,e,n),t=t.sibling}function kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kh(t,e,n),t=t.sibling;t!==null;)kh(t,e,n),t=t.sibling}var We=null,Kt=!1;function or(t,e,n){for(n=n.child;n!==null;)o1(t,e,n),n=n.sibling}function o1(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:at||Js(n,e);case 6:var r=We,s=Kt;We=null,or(t,e,n),We=r,Kt=s,We!==null&&(Kt?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Kt?(t=We,n=n.stateNode,t.nodeType===8?xd(t.parentNode,n):t.nodeType===1&&xd(t,n),Qo(t)):xd(We,n.stateNode));break;case 4:r=We,s=Kt,We=n.stateNode.containerInfo,Kt=!0,or(t,e,n),We=r,Kt=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&jh(n,e,a),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!at&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Te(n,e,c)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,or(t,e,n),at=r):or(t,e,n);break;default:or(t,e,n)}}function m0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x2),e.forEach(function(r){var s=S2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:We=c.stateNode,Kt=!1;break e;case 3:We=c.stateNode.containerInfo,Kt=!0;break e;case 4:We=c.stateNode.containerInfo,Kt=!0;break e}c=c.return}if(We===null)throw Error(U(160));o1(i,a,s),We=null,Kt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Te(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a1(e,t),e=e.sibling}function a1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),cn(t),r&4){try{Do(3,t,t.return),tu(3,t)}catch(I){Te(t,t.return,I)}try{Do(5,t,t.return)}catch(I){Te(t,t.return,I)}}break;case 1:Wt(e,t),cn(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Wt(e,t),cn(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var s=t.stateNode;try{qo(s,"")}catch(I){Te(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Cx(s,i),eh(c,a);var d=eh(c,i);for(a=0;a<u.length;a+=2){var h=u[a],m=u[a+1];h==="style"?Dx(s,m):h==="dangerouslySetInnerHTML"?Ax(s,m):h==="children"?qo(s,m):_f(s,h,m,d)}switch(c){case"input":Qd(s,i);break;case"textarea":kx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ei(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?ei(s,!!i.multiple,i.defaultValue,!0):ei(s,!!i.multiple,i.multiple?[]:"",!1))}s[ea]=i}catch(I){Te(t,t.return,I)}}break;case 6:if(Wt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){Te(t,t.return,I)}}break;case 3:if(Wt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qo(e.containerInfo)}catch(I){Te(t,t.return,I)}break;case 4:Wt(e,t),cn(t);break;case 13:Wt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zf=Ce())),r&4&&m0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(at=(d=at)||h,Wt(e,t),at=d):Wt(e,t),cn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(m=q=h;q!==null;){switch(g=q,x=g.child,g.tag){case 0:case 11:case 14:case 15:Do(4,g,g.return);break;case 1:Js(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(I){Te(r,n,I)}}break;case 5:Js(g,g.return);break;case 22:if(g.memoizedState!==null){g0(m);continue}}x!==null?(x.return=g,q=x):g0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Px("display",a))}catch(I){Te(t,t.return,I)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(I){Te(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wt(e,t),cn(t),r&4&&m0(t);break;case 21:break;default:Wt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(i1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qo(s,""),r.flags&=-33);var i=f0(t);kh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=f0(t);Ch(t,c,a);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _2(t,e,n){q=t,l1(t)}function l1(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||fl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||at;c=fl;var d=at;if(fl=a,(at=u)&&!d)for(q=s;q!==null;)a=q,u=a.child,a.tag===22&&a.memoizedState!==null?y0(s):u!==null?(u.return=a,q=u):y0(s);for(;i!==null;)q=i,l1(i),i=i.sibling;q=s,fl=c,at=d}p0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):p0(t)}}function p0(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zg(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Qo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}at||e.flags&512&&Sh(e)}catch(g){Te(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function g0(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function y0(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Te(e,s,u)}}var i=e.return;try{Sh(e)}catch(u){Te(e,i,u)}break;case 5:var a=e.return;try{Sh(e)}catch(u){Te(e,a,u)}}}catch(u){Te(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var w2=Math.ceil,gc=Qn.ReactCurrentDispatcher,Jf=Qn.ReactCurrentOwner,Ft=Qn.ReactCurrentBatchConfig,ae=0,He=null,Re=null,Je=0,Tt=0,Xs=Br(0),Oe=0,oa=null,ys=0,nu=0,Xf=0,Lo=null,xt=null,Zf=0,vi=1/0,Tn=null,yc=!1,Rh=null,Tr=null,ml=!1,xr=null,xc=0,Mo=0,Ah=null,Dl=-1,Ll=0;function mt(){return ae&6?Ce():Dl!==-1?Dl:Dl=Ce()}function Ir(t){return t.mode&1?ae&2&&Je!==0?Je&-Je:s2.transition!==null?(Ll===0&&(Ll=Wx()),Ll):(t=ce,t!==0||(t=window.event,t=t===void 0?16:Zx(t.type)),t):1}function en(t,e,n,r){if(50<Mo)throw Mo=0,Ah=null,Error(U(185));_a(t,n,r),(!(ae&2)||t!==He)&&(t===He&&(!(ae&2)&&(nu|=n),Oe===4&&dr(t,Je)),bt(t,r),n===1&&ae===0&&!(e.mode&1)&&(vi=Ce()+500,Xc&&Hr()))}function bt(t,e){var n=t.callbackNode;sN(t,e);var r=tc(t,t===He?Je:0);if(r===0)n!==null&&Ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ig(n),e===1)t.tag===0?r2(x0.bind(null,t)):xv(x0.bind(null,t)),ZN(function(){!(ae&6)&&Hr()}),n=null;else{switch(Gx(r)){case 1:n=Tf;break;case 4:n=Hx;break;case 16:n=ec;break;case 536870912:n=qx;break;default:n=ec}n=g1(n,c1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c1(t,e){if(Dl=-1,Ll=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(ii()&&t.callbackNode!==n)return null;var r=tc(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var s=ae;ae|=2;var i=d1();(He!==t||Je!==e)&&(Tn=null,vi=Ce()+500,us(t,e));do try{N2();break}catch(c){u1(t,c)}while(!0);Of(),gc.current=i,ae=s,Re!==null?e=0:(He=null,Je=0,e=Oe)}if(e!==0){if(e===2&&(s=ih(t),s!==0&&(r=s,e=Ph(t,s))),e===1)throw n=oa,us(t,0),dr(t,r),bt(t,Ce()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!E2(s)&&(e=vc(t,r),e===2&&(i=ih(t),i!==0&&(r=i,e=Ph(t,i))),e===1))throw n=oa,us(t,0),dr(t,r),bt(t,Ce()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ss(t,xt,Tn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Zf+500-Ce(),10<e)){if(tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fh(ss.bind(null,t,xt,Tn),e);break}ss(t,xt,Tn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w2(r/1960))-r,10<r){t.timeoutHandle=fh(ss.bind(null,t,xt,Tn),r);break}ss(t,xt,Tn);break;case 5:ss(t,xt,Tn);break;default:throw Error(U(329))}}}return bt(t,Ce()),t.callbackNode===n?c1.bind(null,t):null}function Ph(t,e){var n=Lo;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=vc(t,e),t!==2&&(e=xt,xt=n,e!==null&&Dh(e)),t}function Dh(t){xt===null?xt=t:xt.push.apply(xt,t)}function E2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~Xf,e&=~nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function x0(t){if(ae&6)throw Error(U(327));ii();var e=tc(t,0);if(!(e&1))return bt(t,Ce()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=ih(t);r!==0&&(e=r,n=Ph(t,r))}if(n===1)throw n=oa,us(t,0),dr(t,e),bt(t,Ce()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ss(t,xt,Tn),bt(t,Ce()),null}function em(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(vi=Ce()+500,Xc&&Hr())}}function xs(t){xr!==null&&xr.tag===0&&!(ae&6)&&ii();var e=ae;ae|=1;var n=Ft.transition,r=ce;try{if(Ft.transition=null,ce=1,t)return t()}finally{ce=r,Ft.transition=n,ae=e,!(ae&6)&&Hr()}}function tm(){Tt=Xs.current,ge(Xs)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XN(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oc();break;case 3:yi(),ge(wt),ge(ct),Hf();break;case 5:Bf(r);break;case 4:yi();break;case 13:ge(_e);break;case 19:ge(_e);break;case 10:Ff(r.type._context);break;case 22:case 23:tm()}n=n.return}if(He=t,Re=t=jr(t.current,null),Je=Tt=e,Oe=0,oa=null,Xf=nu=ys=0,xt=Lo=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}as=null}return t}function u1(t,e){do{var n=Re;try{if(Of(),Rl.current=pc,mc){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mc=!1}if(gs=0,Be=Le=we=null,Po=!1,ra=0,Jf.current=null,n===null||n.return===null){Oe=1,oa=e,Re=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Je,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=i0(a);if(x!==null){x.flags&=-257,o0(x,a,c,i,e),x.mode&1&&s0(i,d,e),e=x,u=d;var b=e.updateQueue;if(b===null){var I=new Set;I.add(u),e.updateQueue=I}else b.add(u);break e}else{if(!(e&1)){s0(i,d,e),nm();break e}u=Error(U(426))}}else if(xe&&c.mode&1){var A=i0(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),o0(A,a,c,i,e),Mf(xi(u,c));break e}}i=u=xi(u,c),Oe!==4&&(Oe=2),Lo===null?Lo=[i]:Lo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Gv(i,u,e);Xg(i,E);break e;case 1:c=u;var _=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Tr===null||!Tr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Kv(i,c,e);Xg(i,D);break e}}i=i.return}while(i!==null)}f1(n)}catch(M){e=M,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function d1(){var t=gc.current;return gc.current=pc,t===null?pc:t}function nm(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),He===null||!(ys&268435455)&&!(nu&268435455)||dr(He,Je)}function vc(t,e){var n=ae;ae|=2;var r=d1();(He!==t||Je!==e)&&(Tn=null,us(t,e));do try{b2();break}catch(s){u1(t,s)}while(!0);if(Of(),ae=n,gc.current=r,Re!==null)throw Error(U(261));return He=null,Je=0,Oe}function b2(){for(;Re!==null;)h1(Re)}function N2(){for(;Re!==null&&!Qb();)h1(Re)}function h1(t){var e=p1(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?f1(t):Re=e,Jf.current=null}function f1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y2(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Re=null;return}}else if(n=g2(n,e,Tt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Oe===0&&(Oe=5)}function ss(t,e,n){var r=ce,s=Ft.transition;try{Ft.transition=null,ce=1,T2(t,e,n,r)}finally{Ft.transition=s,ce=r}return null}function T2(t,e,n,r){do ii();while(xr!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iN(t,i),t===He&&(Re=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,g1(ec,function(){return ii(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var a=ce;ce=1;var c=ae;ae|=4,Jf.current=null,v2(t,n),a1(n,t),qN(dh),nc=!!uh,dh=uh=null,t.current=n,_2(n),Yb(),ae=c,ce=a,Ft.transition=i}else t.current=n;if(ml&&(ml=!1,xr=t,xc=s),i=t.pendingLanes,i===0&&(Tr=null),Zb(n.stateNode),bt(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yc)throw yc=!1,t=Rh,Rh=null,t;return xc&1&&t.tag!==0&&ii(),i=t.pendingLanes,i&1?t===Ah?Mo++:(Mo=0,Ah=t):Mo=0,Hr(),null}function ii(){if(xr!==null){var t=Gx(xc),e=Ft.transition,n=ce;try{if(Ft.transition=null,ce=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,xc=0,ae&6)throw Error(U(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,a=i.child;if(q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Do(8,h,i)}var m=h.child;if(m!==null)m.return=h,q=m;else for(;q!==null;){h=q;var g=h.sibling,x=h.return;if(s1(h),h===d){q=null;break}if(g!==null){g.return=x,q=g;break}q=x}}}var b=i.alternate;if(b!==null){var I=b.child;if(I!==null){b.child=null;do{var A=I.sibling;I.sibling=null,I=A}while(I!==null)}}q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,q=a;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Do(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){a=q;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,q=w;else e:for(a=_;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:tu(9,c)}}catch(M){Te(c,c.return,M)}if(c===a){q=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,q=D;break e}q=c.return}}if(ae=s,Hr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Gc,t)}catch{}r=!0}return r}finally{ce=n,Ft.transition=e}}return!1}function v0(t,e,n){e=xi(n,e),e=Gv(t,e,1),t=Nr(t,e,1),e=mt(),t!==null&&(_a(t,1,e),bt(t,e))}function Te(t,e,n){if(t.tag===3)v0(t,t,n);else for(;e!==null;){if(e.tag===3){v0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=xi(n,t),t=Kv(e,t,1),e=Nr(e,t,1),t=mt(),e!==null&&(_a(e,1,t),bt(e,t));break}}e=e.return}}function I2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(Oe===4||Oe===3&&(Je&130023424)===Je&&500>Ce()-Zf?us(t,0):Xf|=n),bt(t,e)}function m1(t,e){e===0&&(t.mode&1?(e=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):e=1);var n=mt();t=Un(t,e),t!==null&&(_a(t,e,n),bt(t,n))}function j2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m1(t,n)}function S2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),m1(t,n)}var p1;p1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,p2(t,e,n);_t=!!(t.flags&131072)}else _t=!1,xe&&e.flags&1048576&&vv(e,cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pl(t,e),t=e.pendingProps;var s=mi(e,ct.current);si(e,n),s=Wf(null,e,r,t,s,n);var i=Gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,ac(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zf(e),s.updater=eu,e.stateNode=s,s._reactInternals=e,_h(e,r,t,n),e=bh(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Df(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=k2(r),t=Gt(r,t),s){case 0:e=Eh(null,e,r,t,n);break e;case 1:e=c0(null,e,r,t,n);break e;case 11:e=a0(null,e,r,t,n);break e;case 14:e=l0(null,e,r,Gt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),Eh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),c0(t,e,r,s,n);case 3:e:{if(Xv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tv(t,e),hc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xi(Error(U(423)),e),e=u0(t,e,r,n,s);break e}else if(r!==s){s=xi(Error(U(424)),e),e=u0(t,e,r,n,s);break e}else for(It=br(e.stateNode.containerInfo.firstChild),St=e,xe=!0,Qt=null,n=bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),r===s){e=zn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return Iv(e),t===null&&yh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,hh(r,s)?a=null:i!==null&&hh(r,i)&&(e.flags|=32),Jv(t,e),ft(t,e,a,n),e.child;case 6:return t===null&&yh(e),null;case 13:return Zv(t,e,n);case 4:return $f(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),a0(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,fe(uc,r._currentValue),r._currentValue=a,i!==null)if(nn(i.value,a)){if(i.children===s.children&&!wt.current){e=zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=An(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),xh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),xh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,si(e,n),s=zt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Gt(r,e.pendingProps),s=Gt(r.type,s),l0(t,e,r,s,n);case 15:return Qv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gt(r,s),Pl(t,e),e.tag=1,Et(r)?(t=!0,ac(e)):t=!1,si(e,n),Wv(e,r,s),_h(e,r,s,n),bh(null,e,r,!0,t,n);case 19:return e1(t,e,n);case 22:return Yv(t,e,n)}throw Error(U(156,e.tag))};function g1(t,e){return Bx(t,e)}function C2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,e,n,r){return new C2(t,e,n,r)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k2(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ef)return 11;if(t===bf)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=Ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ml(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")rm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case $s:return ds(n.children,s,i,e);case wf:a=8,s|=8;break;case Hd:return t=Ot(12,n,e,s|2),t.elementType=Hd,t.lanes=i,t;case qd:return t=Ot(13,n,e,s),t.elementType=qd,t.lanes=i,t;case Wd:return t=Ot(19,n,e,s),t.elementType=Wd,t.lanes=i,t;case Ix:return ru(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nx:a=10;break e;case Tx:a=9;break e;case Ef:a=11;break e;case bf:a=14;break e;case lr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ot(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ds(t,e,n,r){return t=Ot(7,t,r,e),t.lanes=n,t}function ru(t,e,n,r){return t=Ot(22,t,r,e),t.elementType=Ix,t.lanes=n,t.stateNode={isHidden:!1},t}function Id(t,e,n){return t=Ot(6,t,null,e),t.lanes=n,t}function jd(t,e,n){return e=Ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ad(0),this.expirationTimes=ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ad(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,r,s,i,a,c,u){return t=new R2(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(i),t}function A2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function y1(t){if(!t)return Lr;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Et(n))return yv(t,n,e)}return e}function x1(t,e,n,r,s,i,a,c,u){return t=sm(n,r,!0,t,s,i,a,c,u),t.context=y1(null),n=t.current,r=mt(),s=Ir(n),i=An(r,s),i.callback=e??null,Nr(n,i,s),t.current.lanes=s,_a(t,s,r),bt(t,r),t}function su(t,e,n,r){var s=e.current,i=mt(),a=Ir(s);return n=y1(n),e.context===null?e.context=n:e.pendingContext=n,e=An(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(s,e,a),t!==null&&(en(t,s,a,i),kl(t,s,a)),a}function _c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){_0(t,e),(t=t.alternate)&&_0(t,e)}function P2(){return null}var v1=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}iu.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));su(t,e,null,null)};iu.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){su(null,t,null,null)}),e[Fn]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&Xx(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function w0(){}function D2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=_c(a);i.call(d)}}var a=x1(e,r,t,0,null,!1,!1,"",w0);return t._reactRootContainer=a,t[Fn]=a.current,Xo(t.nodeType===8?t.parentNode:t),xs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=_c(u);c.call(d)}}var u=sm(t,0,!1,null,null,!1,!1,"",w0);return t._reactRootContainer=u,t[Fn]=u.current,Xo(t.nodeType===8?t.parentNode:t),xs(function(){su(e,u,n,r)}),u}function au(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=_c(a);c.call(u)}}su(e,a,t,s)}else a=D2(n,e,t,s,r);return _c(a)}Kx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_o(e.pendingLanes);n!==0&&(If(e,n|1),bt(e,Ce()),!(ae&6)&&(vi=Ce()+500,Hr()))}break;case 13:xs(function(){var r=Un(t,1);if(r!==null){var s=mt();en(r,t,1,s)}}),im(t,1)}};jf=function(t){if(t.tag===13){var e=Un(t,134217728);if(e!==null){var n=mt();en(e,t,134217728,n)}im(t,134217728)}};Qx=function(t){if(t.tag===13){var e=Ir(t),n=Un(t,e);if(n!==null){var r=mt();en(n,t,e,r)}im(t,e)}};Yx=function(){return ce};Jx=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};nh=function(t,e,n){switch(e){case"input":if(Qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jc(r);if(!s)throw Error(U(90));Sx(r),Qd(r,s)}}}break;case"textarea":kx(t,n);break;case"select":e=n.value,e!=null&&ei(t,!!n.multiple,e,!1)}};Vx=em;Ox=xs;var L2={usingClientEntryPoint:!1,Events:[Ea,Ws,Jc,Lx,Mx,em]},mo={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M2={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zx(t),t===null?null:t.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||P2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Gc=pl.inject(M2),mn=pl}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L2;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(U(200));return A2(t,e,null,n)};kt.createRoot=function(t,e){if(!am(t))throw Error(U(299));var n=!1,r="",s=v1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,r,s),t[Fn]=e.current,Xo(t.nodeType===8?t.parentNode:t),new om(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=zx(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return xs(t)};kt.hydrate=function(t,e,n){if(!ou(e))throw Error(U(200));return au(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!am(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=v1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=x1(e,null,t,1,n??null,s,!1,i,a),t[Fn]=e.current,Xo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new iu(e)};kt.render=function(t,e,n){if(!ou(e))throw Error(U(200));return au(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!ou(t))throw Error(U(40));return t._reactRootContainer?(xs(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};kt.unstable_batchedUpdates=em;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ou(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return au(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function _1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_1)}catch(t){console.error(t)}}_1(),_x.exports=kt;var V2=_x.exports,w1,E0=V2;w1=E0.createRoot,E0.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var b0="popstate";function O2(t={}){function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Lh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:aa(s)}return U2(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F2(){return Math.random().toString(36).substring(2,10)}function N0(t,e){return{usr:t.state,key:t.key,idx:e}}function Lh(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ri(e):e,state:n,key:e&&e.key||r||F2()}}function aa({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ri(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function U2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c="POP",u=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function m(){c="POP";let A=h(),E=A==null?null:A-d;d=A,u&&u({action:c,location:I.location,delta:E})}function g(A,E){c="PUSH";let _=Lh(I.location,A,E);d=h()+1;let w=N0(_,d),D=I.createHref(_);try{a.pushState(w,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(D)}i&&u&&u({action:c,location:I.location,delta:1})}function x(A,E){c="REPLACE";let _=Lh(I.location,A,E);d=h();let w=N0(_,d),D=I.createHref(_);a.replaceState(w,"",D),i&&u&&u({action:c,location:I.location,delta:0})}function b(A){return z2(A)}let I={get action(){return c},get location(){return t(s,a)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(b0,m),u=A,()=>{s.removeEventListener(b0,m),u=null}},createHref(A){return e(s,A)},createURL:b,encodeLocation(A){let E=b(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:x,go(A){return a.go(A)}};return I}function z2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ve(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:aa(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function E1(t,e,n="/"){return $2(t,e,n,!1)}function $2(t,e,n,r){let s=typeof e=="string"?Ri(e):e,i=$n(s.pathname||"/",n);if(i==null)return null;let a=b1(t);B2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=eT(i);c=X2(a[u],d,r)}return c}function b1(t,e=[],n=[],r="",s=!1){let i=(a,c,u=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;ve(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=Pn([r,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(ve(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),b1(a.children,e,g,m,u)),!(a.path==null&&!a.index)&&e.push({path:m,score:Y2(m,a.index),routesMeta:g})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))i(a,c);else for(let d of N1(a.path))i(a,c,!0,d)}),e}function N1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=N1(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function B2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:J2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var H2=/^:[\w-]+$/,q2=3,W2=2,G2=1,K2=10,Q2=-2,T0=t=>t==="*";function Y2(t,e){let n=t.split("/"),r=n.length;return n.some(T0)&&(r+=Q2),e&&(r+=W2),n.filter(s=>!T0(s)).reduce((s,i)=>s+(H2.test(i)?q2:i===""?G2:K2),r)}function J2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=wc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Pn([i,m.pathname]),pathnameBase:sT(Pn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Pn([i,m.pathnameBase]))}return a}function wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Z2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},g)=>{if(h==="*"){let b=c[g]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=c[g];return m&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function Z2(t,e=!1,n=!0){Bt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function eT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function $n(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var T1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tT=t=>T1.test(t);function nT(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ri(t):t,i;if(n)if(tT(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Bt(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?i=I0(n.substring(1),"/"):i=I0(n,e)}else i=e;return{pathname:i,search:iT(r),hash:oT(s)}}function I0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lm(t){let e=rT(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function cm(t,e,n,r=!1){let s;typeof t=="string"?s=Ri(t):(s={...t},ve(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=nT(s,c),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Pn=t=>t.join("/").replace(/\/\/+/g,"/"),sT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,aT=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function lT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function cT(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var I1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function j1(t,e){let n=t;if(typeof n!="string"||!T1.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(I1)try{let i=new URL(window.location.href),a=n.startsWith("//")?new URL(i.protocol+n):new URL(n),c=$n(a.pathname,e);a.origin===i.origin&&c!=null?n=c+a.search+a.hash:s=!0}catch{Bt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var S1=["POST","PUT","PATCH","DELETE"];new Set(S1);var uT=["GET",...S1];new Set(uT);var Ai=k.createContext(null);Ai.displayName="DataRouter";var lu=k.createContext(null);lu.displayName="DataRouterState";var dT=k.createContext(!1),C1=k.createContext({isTransitioning:!1});C1.displayName="ViewTransition";var hT=k.createContext(new Map);hT.displayName="Fetchers";var fT=k.createContext(null);fT.displayName="Await";var At=k.createContext(null);At.displayName="Navigation";var Na=k.createContext(null);Na.displayName="Location";var on=k.createContext({outlet:null,matches:[],isDataRoute:!1});on.displayName="Route";var um=k.createContext(null);um.displayName="RouteError";var k1="REACT_ROUTER_ERROR",mT="REDIRECT",pT="ROUTE_ERROR_RESPONSE";function gT(t){if(t.startsWith(`${k1}:${mT}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function yT(t){if(t.startsWith(`${k1}:${pT}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new aT(e.status,e.statusText,e.data)}catch{}}function xT(t,{relative:e}={}){ve(Pi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(At),{hash:s,pathname:i,search:a}=Ta(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Pn([n,i])),r.createHref({pathname:c,search:a,hash:s})}function Pi(){return k.useContext(Na)!=null}function Yn(){return ve(Pi(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Na).location}var R1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A1(t){k.useContext(At).static||k.useLayoutEffect(t)}function Bn(){let{isDataRoute:t}=k.useContext(on);return t?AT():vT()}function vT(){ve(Pi(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Ai),{basename:e,navigator:n}=k.useContext(At),{matches:r}=k.useContext(on),{pathname:s}=Yn(),i=JSON.stringify(lm(r)),a=k.useRef(!1);return A1(()=>{a.current=!0}),k.useCallback((u,d={})=>{if(Bt(a.current,R1),!a.current)return;if(typeof u=="number"){n.go(u);return}let h=cm(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Pn([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}k.createContext(null);function _T(){let{matches:t}=k.useContext(on),e=t[t.length-1];return e?e.params:{}}function Ta(t,{relative:e}={}){let{matches:n}=k.useContext(on),{pathname:r}=Yn(),s=JSON.stringify(lm(n));return k.useMemo(()=>cm(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function wT(t,e){return P1(t,e)}function P1(t,e,n,r,s){var _;ve(Pi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=k.useContext(At),{matches:a}=k.useContext(on),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",m=c&&c.route;{let w=m&&m.path||"";L1(d,!m||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=Yn(),x;if(e){let w=typeof e=="string"?Ri(e):e;ve(h==="/"||((_=w.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=g;let b=x.pathname||"/",I=b;if(h!=="/"){let w=h.replace(/^\//,"").split("/");I="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let A=E1(t,{pathname:I});Bt(m||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Bt(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=IT(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Pn([h,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Pn([h,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),a,n,r,s);return e&&E?k.createElement(Na.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},E):E}function ET(){let t=RT(),e=lT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,a)}var bT=k.createElement(ET,null),D1=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=yT(t.digest);n&&(t=n)}let e=t!==void 0?k.createElement(on.Provider,{value:this.props.routeContext},k.createElement(um.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?k.createElement(NT,{error:t},e):e}};D1.contextType=dT;var Cd=new WeakMap;function NT({children:t,error:e}){let{basename:n}=k.useContext(At);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=gT(e.digest);if(r){let s=Cd.get(e);if(s)throw s;let i=j1(r.location,n);if(I1&&!Cd.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw Cd.set(e,a),a}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function TT({routeContext:t,match:e,children:n}){let r=k.useContext(Ai);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(on.Provider,{value:t},n)}function IT(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let h=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);ve(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:x}=n,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(h,m)=>{var g,x;r(h,{location:n.location,params:((x=(g=n.matches)==null?void 0:g[0])==null?void 0:x.params)??{},unstable_pattern:cT(n.matches),errorInfo:m})}:void 0;return i.reduceRight((h,m,g)=>{let x,b=!1,I=null,A=null;n&&(x=a&&m.route.id?a[m.route.id]:void 0,I=m.route.errorElement||bT,c&&(u<0&&g===0?(L1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,A=null):u===g&&(b=!0,A=m.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,g+1)),_=()=>{let w;return x?w=I:b?w=A:m.route.Component?w=k.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=h,k.createElement(TT,{match:m,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?k.createElement(D1,{location:n.location,revalidation:n.revalidation,component:I,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):_()},null)}function dm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jT(t){let e=k.useContext(Ai);return ve(e,dm(t)),e}function ST(t){let e=k.useContext(lu);return ve(e,dm(t)),e}function CT(t){let e=k.useContext(on);return ve(e,dm(t)),e}function hm(t){let e=CT(t),n=e.matches[e.matches.length-1];return ve(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kT(){return hm("useRouteId")}function RT(){var r;let t=k.useContext(um),e=ST("useRouteError"),n=hm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function AT(){let{router:t}=jT("useNavigate"),e=hm("useNavigate"),n=k.useRef(!1);return A1(()=>{n.current=!0}),k.useCallback(async(s,i={})=>{Bt(n.current,R1),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var j0={};function L1(t,e,n){!e&&!j0[t]&&(j0[t]=!0,Bt(!1,n))}k.memo(PT);function PT({routes:t,future:e,state:n,onError:r}){return P1(t,void 0,n,r,e)}function DT({to:t,replace:e,state:n,relative:r}){ve(Pi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(At);Bt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=k.useContext(on),{pathname:a}=Yn(),c=Bn(),u=cm(t,lm(i),a,r==="path"),d=JSON.stringify(u);return k.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function it(t){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LT({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:a}){ve(!Pi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:c,navigator:s,static:i,unstable_useTransitions:a,future:{}}),[c,s,i,a]);typeof n=="string"&&(n=Ri(n));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:x="default"}=n,b=k.useMemo(()=>{let I=$n(d,c);return I==null?null:{location:{pathname:I,search:h,hash:m,state:g,key:x},navigationType:r}},[c,d,h,m,g,x,r]);return Bt(b!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:k.createElement(At.Provider,{value:u},k.createElement(Na.Provider,{children:e,value:b}))}function M1({children:t,location:e}){return wT(Mh(t),e)}function Mh(t,e=[]){let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,Mh(r.props.children,i));return}ve(r.type===it,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Mh(r.props.children,i)),n.push(a)}),n}var Vl="get",Ol="application/x-www-form-urlencoded";function cu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function MT(t){return cu(t)&&t.tagName.toLowerCase()==="button"}function VT(t){return cu(t)&&t.tagName.toLowerCase()==="form"}function OT(t){return cu(t)&&t.tagName.toLowerCase()==="input"}function FT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UT(t,e){return t.button===0&&(!e||e==="_self")&&!FT(t)}var gl=null;function zT(){if(gl===null)try{new FormData(document.createElement("form"),0),gl=!1}catch{gl=!0}return gl}var $T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kd(t){return t!=null&&!$T.has(t)?(Bt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ol}"`),null):t}function BT(t,e){let n,r,s,i,a;if(VT(t)){let c=t.getAttribute("action");r=c?$n(c,e):null,n=t.getAttribute("method")||Vl,s=kd(t.getAttribute("enctype"))||Ol,i=new FormData(t)}else if(MT(t)||OT(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?$n(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Vl,s=kd(t.getAttribute("formenctype"))||kd(c.getAttribute("enctype"))||Ol,i=new FormData(c,t),!zT()){let{name:d,type:h,value:m}=t;if(h==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(cu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Vl,r=null,s=Ol,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HT(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&$n(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function qT(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GT(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await qT(i,n);return a.links?a.links():[]}return[]}));return JT(r.flat(1).filter(WT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function S0(t,e,n,r,s,i){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function KT(t,e,{includeHydrateFallback:n}={}){return QT(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function QT(t){return[...new Set(t)]}function YT(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JT(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(YT(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function V1(){let t=k.useContext(Ai);return fm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function XT(){let t=k.useContext(lu);return fm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var mm=k.createContext(void 0);mm.displayName="FrameworkContext";function O1(){let t=k.useContext(mm);return fm(t,"You must render this element inside a <HydratedRouter> element"),t}function ZT(t,e){let n=k.useContext(mm),[r,s]=k.useState(!1),[i,a]=k.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,g=k.useRef(null);k.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let I=E=>{E.forEach(_=>{a(_.isIntersecting)})},A=new IntersectionObserver(I,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),k.useEffect(()=>{if(r){let I=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(I)}}},[r]);let x=()=>{s(!0)},b=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:po(c,x),onBlur:po(u,b),onMouseEnter:po(d,x),onMouseLeave:po(h,b),onTouchStart:po(m,x)}]:[!1,g,{}]}function po(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function eI({page:t,...e}){let{router:n}=V1(),r=k.useMemo(()=>E1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(nI,{page:t,matches:r,...e}):null}function tI(t){let{manifest:e,routeModules:n}=O1(),[r,s]=k.useState([]);return k.useEffect(()=>{let i=!1;return GT(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function nI({page:t,matches:e,...n}){let r=Yn(),{future:s,manifest:i,routeModules:a}=O1(),{basename:c}=V1(),{loaderData:u,matches:d}=XT(),h=k.useMemo(()=>S0(t,e,d,i,r,"data"),[t,e,d,i,r]),m=k.useMemo(()=>S0(t,e,d,i,r,"assets"),[t,e,d,i,r]),g=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,A=!1;if(e.forEach(_=>{var D;let w=i.routes[_.route.id];!w||!w.hasLoader||(!h.some(M=>M.route.id===_.route.id)&&_.route.id in u&&((D=a[_.route.id])!=null&&D.shouldRevalidate)||w.hasClientLoader?A=!0:I.add(_.route.id))}),I.size===0)return[];let E=HT(t,c,s.unstable_trailingSlashAwareDataRequests,"data");return A&&I.size>0&&E.searchParams.set("_routes",e.filter(_=>I.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[c,s.unstable_trailingSlashAwareDataRequests,u,r,i,h,e,t,a]),x=k.useMemo(()=>KT(m,i),[m,i]),b=tI(m);return k.createElement(k.Fragment,null,g.map(I=>k.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),x.map(I=>k.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),b.map(({key:I,link:A})=>k.createElement("link",{key:I,nonce:n.nonce,...A})))}function rI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var sI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sI&&(window.__reactRouterVersion="7.12.0")}catch{}function iI({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=k.useRef();s.current==null&&(s.current=O2({window:r,v5Compat:!0}));let i=s.current,[a,c]=k.useState({action:i.action,location:i.location}),u=k.useCallback(d=>{n===!1?c(d):k.startTransition(()=>c(d))},[n]);return k.useLayoutEffect(()=>i.listen(u),[i,u]),k.createElement(LT,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i,unstable_useTransitions:n})}var F1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U1=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:g,...x},b){let{basename:I,unstable_useTransitions:A}=k.useContext(At),E=typeof d=="string"&&F1.test(d),_=j1(d,I);d=_.to;let w=xT(d,{relative:s}),[D,M,F]=ZT(r,x),N=lI(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:g,unstable_useTransitions:A});function v(S){e&&e(S),S.defaultPrevented||N(S)}let T=k.createElement("a",{...x,...F,href:_.absoluteURL||w,onClick:_.isExternal||i?e:v,ref:rI(b,M),target:u,"data-discover":!E&&n==="render"?"true":void 0});return D&&!E?k.createElement(k.Fragment,null,T,k.createElement(eI,{page:w})):T});U1.displayName="Link";var z1=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:c,children:u,...d},h){let m=Ta(a,{relative:d.relative}),g=Yn(),x=k.useContext(lu),{navigator:b,basename:I}=k.useContext(At),A=x!=null&&fI(m)&&c===!0,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,_=g.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(_=_.toLowerCase(),w=w?w.toLowerCase():null,E=E.toLowerCase()),w&&I&&(w=$n(w,I)||w);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=_===E||!s&&_.startsWith(E)&&_.charAt(D)==="/",F=w!=null&&(w===E||!s&&w.startsWith(E)&&w.charAt(E.length)==="/"),N={isActive:M,isPending:F,isTransitioning:A},v=M?e:void 0,T;typeof r=="function"?T=r(N):T=[r,M?"active":null,F?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let S=typeof i=="function"?i(N):i;return k.createElement(U1,{...d,"aria-current":v,className:T,ref:h,style:S,to:a,viewTransition:c},typeof u=="function"?u(N):u)});z1.displayName="NavLink";var oI=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Vl,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:g,...x},b)=>{let{unstable_useTransitions:I}=k.useContext(At),A=dI(),E=hI(c,{relative:d}),_=a.toLowerCase()==="get"?"get":"post",w=typeof c=="string"&&F1.test(c),D=M=>{if(u&&u(M),M.defaultPrevented)return;M.preventDefault();let F=M.nativeEvent.submitter,N=(F==null?void 0:F.getAttribute("formmethod"))||a,v=()=>A(F||M.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:g});I&&n!==!1?k.startTransition(()=>v()):v()};return k.createElement("form",{ref:b,method:_,action:E,onSubmit:r?u:D,...x,"data-discover":!w&&t==="render"?"true":void 0})});oI.displayName="Form";function aI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $1(t){let e=k.useContext(Ai);return ve(e,aI(t)),e}function lI(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let d=Bn(),h=Yn(),m=Ta(t,{relative:i});return k.useCallback(g=>{if(UT(g,e)){g.preventDefault();let x=n!==void 0?n:aa(h)===aa(m),b=()=>d(t,{replace:x,state:r,preventScrollReset:s,relative:i,viewTransition:a,unstable_defaultShouldRevalidate:c});u?k.startTransition(()=>b()):b()}},[h,d,m,n,r,e,t,s,i,a,c,u])}var cI=0,uI=()=>`__${String(++cI)}__`;function dI(){let{router:t}=$1("useSubmit"),{basename:e}=k.useContext(At),n=kT(),r=t.fetch,s=t.navigate;return k.useCallback(async(i,a={})=>{let{action:c,method:u,encType:d,formData:h,body:m}=BT(i,e);if(a.navigate===!1){let g=a.fetcherKey||uI();await r(g,n,a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await s(a.action||c,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,s,e,n])}function hI(t,{relative:e}={}){let{basename:n}=k.useContext(At),r=k.useContext(on);ve(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ta(t||".",{relative:e})},a=Yn();if(t==null){i.search=a.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let h=c.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Pn([n,i.pathname])),aa(i)}function fI(t,{relative:e}={}){let n=k.useContext(C1);ve(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$1("useViewTransitionState"),s=Ta(t,{relative:e});if(!n.isTransitioning)return!1;let i=$n(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=$n(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wc(s.pathname,a)!=null||wc(s.pathname,i)!=null}const mI=()=>{};var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},H1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,a||(g=64)),r.push(n[h],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new gI;const g=i<<2|c>>4;if(r.push(g),d!==64){const x=c<<4&240|d>>2;if(r.push(x),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yI=function(t){const e=B1(t);return H1.encodeByteArray(e,!0)},Ec=function(t){return yI(t).replace(/\./g,"")},q1=function(t){try{return H1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=()=>xI().__FIREBASE_DEFAULTS__,_I=()=>{if(typeof process>"u"||typeof C0>"u")return;const t=C0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q1(t[1]);return e&&JSON.parse(e)},uu=()=>{try{return mI()||vI()||_I()||wI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W1=t=>{var e,n;return(n=(e=uu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},EI=t=>{const e=W1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G1=()=>{var t;return(t=uu())==null?void 0:t.config},K1=t=>{var e;return(e=uu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ec(JSON.stringify(n)),Ec(JSON.stringify(a)),""].join(".")}const Vo={};function TI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vo))Vo[e]?t.emulator.push(e):t.prod.push(e);return t}function II(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let k0=!1;function Y1(t,e){if(typeof window>"u"||typeof document>"u"||!Di(window.location.host)||Vo[t]===e||Vo[t]||k0)return;Vo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=TI().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{k0=!0,a()},g}function h(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=II(r),x=n("text"),b=document.getElementById(x)||document.createElement("span"),I=n("learnmore"),A=document.getElementById(I)||document.createElement("a"),E=n("preprendIcon"),_=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;c(w),h(A,I);const D=d();u(_,E),w.append(_,b,A,D),document.body.appendChild(w)}i?(b.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function SI(){var e;const t=(e=uu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AI(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PI(){return!SI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DI(){try{return typeof indexedDB=="object"}catch{return!1}}function LI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MI,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?VI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Jn(s,c,r)}}function VI(t,e){return t.replace(OI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OI=/\{\$([^}]+)}/g;function FI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(R0(i)&&R0(a)){if(!vs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function R0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function bo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UI(t,e){const n=new zI(t,e);return n.subscribe.bind(n)}class zI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$I(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rd),s.error===void 0&&(s.error=Rd),s.complete===void 0&&(s.complete=Rd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $I(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qI(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HI(t){return t===is?void 0:t}function qI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const GI={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},KI=re.INFO,QI={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},YI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=KI,this._logHandler=YI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const JI=(t,e)=>e.some(n=>t instanceof n);let A0,P0;function XI(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZI(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J1=new WeakMap,Vh=new WeakMap,X1=new WeakMap,Ad=new WeakMap,gm=new WeakMap;function ej(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Sr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&J1.set(n,t)}).catch(()=>{}),gm.set(e,t),e}function tj(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Vh.set(t,e)}let Oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nj(t){Oh=t(Oh)}function rj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pd(this),e,...n);return X1.set(r,e.sort?e.sort():[e]),Sr(r)}:ZI().includes(t)?function(...e){return t.apply(Pd(this),e),Sr(J1.get(this))}:function(...e){return Sr(t.apply(Pd(this),e))}}function sj(t){return typeof t=="function"?rj(t):(t instanceof IDBTransaction&&tj(t),JI(t,XI())?new Proxy(t,Oh):t)}function Sr(t){if(t instanceof IDBRequest)return ej(t);if(Ad.has(t))return Ad.get(t);const e=sj(t);return e!==t&&(Ad.set(t,e),gm.set(e,t)),e}const Pd=t=>gm.get(t);function ij(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Sr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Sr(a.result),u.oldVersion,u.newVersion,Sr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const oj=["get","getKey","getAll","getAllKeys","count"],aj=["put","add","delete","clear"],Dd=new Map;function D0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oj.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Dd.set(e,i),i}nj(t=>({...t,get:(e,n,r)=>D0(e,n)||t.get(e,n,r),has:(e,n)=>!!D0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fh="@firebase/app",L0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new pm("@firebase/app"),uj="@firebase/app-compat",dj="@firebase/analytics-compat",hj="@firebase/analytics",fj="@firebase/app-check-compat",mj="@firebase/app-check",pj="@firebase/auth",gj="@firebase/auth-compat",yj="@firebase/database",xj="@firebase/data-connect",vj="@firebase/database-compat",_j="@firebase/functions",wj="@firebase/functions-compat",Ej="@firebase/installations",bj="@firebase/installations-compat",Nj="@firebase/messaging",Tj="@firebase/messaging-compat",Ij="@firebase/performance",jj="@firebase/performance-compat",Sj="@firebase/remote-config",Cj="@firebase/remote-config-compat",kj="@firebase/storage",Rj="@firebase/storage-compat",Aj="@firebase/firestore",Pj="@firebase/ai",Dj="@firebase/firestore-compat",Lj="firebase",Mj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",Vj={[Fh]:"fire-core",[uj]:"fire-core-compat",[hj]:"fire-analytics",[dj]:"fire-analytics-compat",[mj]:"fire-app-check",[fj]:"fire-app-check-compat",[pj]:"fire-auth",[gj]:"fire-auth-compat",[yj]:"fire-rtdb",[xj]:"fire-data-connect",[vj]:"fire-rtdb-compat",[_j]:"fire-fn",[wj]:"fire-fn-compat",[Ej]:"fire-iid",[bj]:"fire-iid-compat",[Nj]:"fire-fcm",[Tj]:"fire-fcm-compat",[Ij]:"fire-perf",[jj]:"fire-perf-compat",[Sj]:"fire-rc",[Cj]:"fire-rc-compat",[kj]:"fire-gcs",[Rj]:"fire-gcs-compat",[Aj]:"fire-fst",[Dj]:"fire-fst-compat",[Pj]:"fire-vertex","fire-js":"fire-js",[Lj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,Oj=new Map,zh=new Map;function M0(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _i(t){const e=t.name;if(zh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;zh.set(e,t);for(const n of bc.values())M0(n,t);for(const n of Oj.values())M0(n,t);return!0}function ym(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Ia("app","Firebase",Fj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=Mj;function Z1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Uh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(n||(n=G1()),!n)throw Cr.create("no-options");const i=bc.get(s);if(i){if(vs(n,i.options)&&vs(r,i.config))return i;throw Cr.create("duplicate-app",{appName:s})}const a=new WI(s);for(const u of zh.values())a.addComponent(u);const c=new Uj(n,r,a);return bc.set(s,c),c}function e_(t=Uh){const e=bc.get(t);if(!e&&t===Uh&&G1())return Z1();if(!e)throw Cr.create("no-app",{appName:t});return e}function kr(t,e,n){let r=Vj[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}_i(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="firebase-heartbeat-database",$j=1,la="firebase-heartbeat-store";let Ld=null;function t_(){return Ld||(Ld=ij(zj,$j,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(la)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function Bj(t){try{const n=(await t_()).transaction(la),r=await n.objectStore(la).get(n_(t));return await n.done,r}catch(e){if(e instanceof Jn)Hn.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function V0(t,e){try{const r=(await t_()).transaction(la,"readwrite");await r.objectStore(la).put(e,n_(t)),await r.done}catch(n){if(n instanceof Jn)Hn.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function n_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=1024,qj=30;class Wj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=O0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qj){const a=Qj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=O0(),{heartbeatsToSend:r,unsentEntries:s}=Gj(this._heartbeatsCache.heartbeats),i=Ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function O0(){return new Date().toISOString().substring(0,10)}function Gj(t,e=Hj){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),F0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),F0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DI()?LI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function F0(t){return Ec(JSON.stringify({version:2,heartbeats:t})).length}function Qj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){_i(new _s("platform-logger",e=>new lj(e),"PRIVATE")),_i(new _s("heartbeat",e=>new Wj(e),"PRIVATE")),kr(Fh,L0,t),kr(Fh,L0,"esm2020"),kr("fire-js","")}Yj("");function r_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jj=r_,s_=new Ia("auth","Firebase",r_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new pm("@firebase/auth");function Xj(t,...e){Nc.logLevel<=re.WARN&&Nc.warn(`Auth (${Li}): ${t}`,...e)}function Fl(t,...e){Nc.logLevel<=re.ERROR&&Nc.error(`Auth (${Li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,...e){throw xm(t,...e)}function gn(t,...e){return xm(t,...e)}function i_(t,e,n){const r={...Jj(),[e]:n};return new Ia("auth","Firebase",r).create(e,{appName:t.name})}function Dn(t){return i_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return s_.create(t,...e)}function K(t,e,...n){if(!t)throw xm(e,...n)}function kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fl(e),new Error(e)}function qn(t,e){t||kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Zj(){return U0()==="http:"||U0()==="https:"}function U0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zj()||kI()||"connection"in navigator)?navigator.onLine:!0}function tS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=jI()||RI()}get(){return eS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sS=new Sa(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wr(t,e,n,r,s={}){return a_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=ja({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return CI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Di(t.emulatorConfig.host)&&(d.credentials="include"),o_.fetch()(await l_(t,t.config.apiHost,n,c),d)})}async function a_(t,e,n){t._canInitEmulator=!1;const r={...nS,...e};try{const s=new oS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw yl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw yl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw yl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw yl(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw i_(t,h,d);rn(t,h)}}catch(s){if(s instanceof Jn)throw s;rn(t,"network-request-failed",{message:String(s)})}}async function Ca(t,e,n,r,s={}){const i=await Wr(t,e,n,r,s);return"mfaPendingCredential"in i&&rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function l_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?vm(t.config,s):`${t.config.apiScheme}://${s}`;return rS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function iS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),sS.get())})}}function yl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gn(t,e,r);return s.customData._tokenResponse=n,s}function z0(t){return t!==void 0&&t.enterprise!==void 0}class aS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lS(t,e){return Wr(t,"GET","/v2/recaptchaConfig",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e){return Wr(t,"POST","/v1/accounts:delete",e)}async function Tc(t,e){return Wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uS(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),s=_m(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Oo(Md(s.auth_time)),issuedAtTime:Oo(Md(s.iat)),expirationTime:Oo(Md(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Md(t){return Number(t)*1e3}function _m(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fl("JWT malformed, contained fewer than 3 sections"),null;try{const s=q1(n);return s?JSON.parse(s):(Fl("Failed to decode base64 JWT payload"),null)}catch(s){return Fl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $0(t){const e=_m(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&dS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oo(this.lastLoginAt),this.creationTime=Oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t){var m;const e=t.auth,n=await t.getIdToken(),r=await ca(t,Tc(e,{idToken:n}));K(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?c_(s.providerUserInfo):[],a=mS(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function fS(t){const e=Ue(t);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function c_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e){const n=await a_(t,{},async()=>{const r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await l_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Di(t.emulatorConfig.host)&&(u.credentials="include"),o_.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gS(t,e){return Wr(t,"POST","/v2/accounts:revokeToken",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=$0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await pS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new oi;return r&&(K(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oi,this.toJSON())}_performRefresh(){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new hS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Bh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ca(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uS(this,e)}reload(){return fS(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Dn(this.auth));const e=await this.getIdToken();return await ca(this,cS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:x,providerData:b,stsTokenManager:I}=n;K(m&&I,e,"internal-error");const A=oi.fromJSON(this.name,I);K(typeof m=="string",e,"internal-error"),ar(r,e.name),ar(s,e.name),K(typeof g=="boolean",e,"internal-error"),K(typeof x=="boolean",e,"internal-error"),ar(i,e.name),ar(a,e.name),ar(c,e.name),ar(u,e.name),ar(d,e.name),ar(h,e.name);const E=new Xt({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:A,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(E.providerData=b.map(_=>({..._}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new oi;s.updateFromServerResponse(n);const i=new Xt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ic(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?c_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new oi;c.updateFromIdToken(r);const u=new Xt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;function Rn(t){qn(t instanceof Function,"Expected a class definition");let e=B0.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,B0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u_.type="NONE";const H0=u_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){return`firebase:${t}:${e}:${n}`}class ai{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ul(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ul("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Tc(this.auth,{idToken:e}).catch(()=>{});return n?Xt._fromGetAccountInfoResponse(this.auth,n,e):null}return Xt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ai(Rn(H0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Rn(H0);const a=Ul(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(a);if(h){let m;if(typeof h=="string"){const g=await Tc(e,{idToken:h}).catch(()=>{});if(!g)break;m=await Xt._fromGetAccountInfoResponse(e,g,h)}else m=Xt._fromJSON(e,h);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ai(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ai(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(g_(e))return"Blackberry";if(y_(e))return"Webos";if(h_(e))return"Safari";if((e.includes("chrome/")||f_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function d_(t=ut()){return/firefox\//i.test(t)}function h_(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f_(t=ut()){return/crios\//i.test(t)}function m_(t=ut()){return/iemobile/i.test(t)}function p_(t=ut()){return/android/i.test(t)}function g_(t=ut()){return/blackberry/i.test(t)}function y_(t=ut()){return/webos/i.test(t)}function wm(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yS(t=ut()){var e;return wm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xS(){return AI()&&document.documentMode===10}function x_(t=ut()){return wm(t)||p_(t)||y_(t)||g_(t)||/windows phone/i.test(t)||m_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e=[]){let n;switch(t){case"Browser":n=q0(ut());break;case"Worker":n=`${q0(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e={}){return Wr(t,"GET","/v2/passwordPolicy",qr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=6;class ES{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W0(this),this.idTokenSubscription=new W0(this),this.beforeStateQueue=new vS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ai.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tc(this,{idToken:e}),r=await Xt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Dn(this));const n=e?Ue(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Dn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Dn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _S(this),n=new ES(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await ai.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Xj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Cs(t){return Ue(t)}class W0{constructor(e){this.auth=e,this.observer=null,this.addObserver=UI(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NS(t){du=t}function __(t){return du.loadJS(t)}function TS(){return du.recaptchaEnterpriseScript}function IS(){return du.gapiScript}function jS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SS{constructor(){this.enterprise=new CS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const kS="recaptcha-enterprise",w_="NO_RECAPTCHA";class RS{constructor(e){this.type=kS,this.auth=Cs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{lS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new aS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;z0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(w_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SS().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&z0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=TS();u.length!==0&&(u+=c),__(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function G0(t,e,n,r=!1,s=!1){const i=new RS(t);let a;if(s)a=w_;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Hh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await G0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await G0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e){const n=ym(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(vs(i,e??{}))return s;rn(s,"already-initialized")}return n.initialize({options:e})}function PS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DS(t,e,n){const r=Cs(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=E_(e),{host:a,port:c}=LS(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},h=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(vs(d,r.config.emulator)&&vs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Di(a)?(Q1(`${i}//${a}${u}`),Y1("Auth",!0)):MS()}function E_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LS(t){const e=E_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:K0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:K0(a)}}}function K0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,n){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}}async function VS(t,e){return Wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e){return Ca(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(t,e){return Ca(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}async function US(t,e){return Ca(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ua(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ua(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,n,"signInWithPassword",OS);case"emailLink":return FS(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hh(e,r,"signUpPassword",VS);case"emailLink":return US(e,{idToken:n,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function li(t,e){return Ca(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="http://localhost";class ws extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new ws(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return li(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,li(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,li(e,n)}buildRequest(){const e={requestUri:zS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BS(t){const e=Eo(bo(t)).link,n=e?Eo(bo(e)).deep_link_id:null,r=Eo(bo(t)).deep_link_id;return(r?Eo(bo(r)).link:null)||r||n||e||t}class bm{constructor(e){const n=Eo(bo(e)),r=n.apiKey??null,s=n.oobCode??null,i=$S(n.mode??null);K(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BS(e);try{return new bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.providerId=Mi.PROVIDER_ID}static credential(e,n){return ua._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bm.parseLink(n);return K(r,"argument-error"),ua._fromEmailAndCode(e,r.code,r.tenantId)}}Mi.PROVIDER_ID="password";Mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends b_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ka{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.GOOGLE_SIGN_IN_METHOD="google.com";fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends ka{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends ka{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e){return Ca(t,"POST","/v1/accounts:signUp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xt._fromIdTokenResponse(e,r,s),a=Q0(r);return new Es({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Q0(r);return new Es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Q0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Jn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jc(e,n,r,s)}}function N_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(t,i,e,r):i})}async function qS(t,e,n=!1){const r=await ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e,n=!1){const{auth:r}=t;if(Mt(r.app))return Promise.reject(Dn(r));const s="reauthenticate";try{const i=await ca(t,N_(r,s,e,t),n);K(i.idToken,r,"internal-error");const a=_m(i.idToken);K(a,r,"internal-error");const{sub:c}=a;return K(t.uid===c,r,"user-mismatch"),Es._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(t,e,n=!1){if(Mt(t.app))return Promise.reject(Dn(t));const r="signIn",s=await N_(t,r,e),i=await Es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function GS(t,e){return T_(Cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(t){const e=Cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KS(t,e,n){if(Mt(t.app))return Promise.reject(Dn(t));const r=Cs(t),a=await Hh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&I_(t),u}),c=await Es._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function QS(t,e,n){return Mt(t.app)?Promise.reject(Dn(t)):GS(Ue(t),Mi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&I_(t),r})}function YS(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function JS(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function XS(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}function Y0(t){return Ue(t).signOut()}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=1e3,eC=10;class S_ extends j_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);xS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S_.type="LOCAL";const tC=S_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends j_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C_.type="SESSION";const k_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new hu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await nC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Nm("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function sC(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aC(){return R_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="firebaseLocalStorageDb",lC=1,Cc="firebaseLocalStorage",P_="fbase_key";class Ra{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fu(t,e){return t.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function cC(){const t=indexedDB.deleteDatabase(A_);return new Ra(t).toPromise()}function qh(){const t=indexedDB.open(A_,lC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cc,{keyPath:P_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cc)?e(r):(r.close(),await cC(),e(await qh()))})})}async function J0(t,e,n){const r=fu(t,!0).put({[P_]:e,value:n});return new Ra(r).toPromise()}async function uC(t,e){const n=fu(t,!1).get(e),r=await new Ra(n).toPromise();return r===void 0?null:r.value}function X0(t,e){const n=fu(t,!0).delete(e);return new Ra(n).toPromise()}const dC=800,hC=3;class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hu._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new rC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qh();return await J0(e,Sc,"1"),await X0(e,Sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=fu(s,!1).getAll();return new Ra(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D_.type="LOCAL";const fC=D_;new Sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){return e?Rn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return li(e,this._buildIdpRequest())}_linkToIdToken(e,n){return li(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return li(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return T_(t.auth,new Tm(t),t.bypassAuthState)}function gC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),WS(n,new Tm(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),qS(n,new Tm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:rn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Sa(2e3,1e4);class Zs extends L_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zs.currentPopupAction&&Zs.currentPopupAction.cancel(),Zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}Zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",zl=new Map;class _C extends L_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zl.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=NC(e),r=bC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function EC(t,e){zl.set(t._key(),e)}function bC(t){return Rn(t._redirectPersistence)}function NC(t){return Ul(vC,t.config.apiKey,t.name)}async function TC(t,e,n=!1){if(Mt(t.app))return Promise.reject(Dn(t));const r=Cs(t),s=mC(r,e),a=await new _C(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!M_(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z0(e))}saveEventToCache(e){this.cachedEventUids.add(Z0(e)),this.lastProcessedEventTime=Date.now()}}function Z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function M_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e={}){return Wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function AC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CC(t);for(const n of e)try{if(PC(n))return}catch{}rn(t,"unauthorized-domain")}function PC(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!RC.test(n))return!1;if(kC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Sa(3e4,6e4);function ey(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LC(t){return new Promise((e,n)=>{var s,i,a;function r(){ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ey(),n(gn(t,"network-request-failed"))},timeout:DC.get()})}if((i=(s=yn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=yn().gapi)!=null&&a.load)r();else{const c=jS("iframefcb");return yn()[c]=()=>{gapi.load?r():n(gn(t,"network-request-failed"))},__(`${IS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw $l=null,e})}let $l=null;function MC(t){return $l=$l||LC(t),$l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new Sa(5e3,15e3),OC="__/auth/iframe",FC="emulator/auth/iframe",UC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $C(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vm(e,FC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:Li},s=zC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ja(r).slice(1)}`}async function BC(t){const e=await MC(t),n=yn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:$C(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=gn(t,"network-request-failed"),c=yn().setTimeout(()=>{i(a)},VC.get());function u(){yn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,WC=600,GC="_blank",KC="http://localhost";class ty{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QC(t,e,n,r=qC,s=WC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...HC,width:r.toString(),height:s.toString(),top:i,left:a},d=ut().toLowerCase();n&&(c=f_(d)?GC:n),d_(d)&&(e=e||KC,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[x,b])=>`${g}${x}=${b},`,"");if(yS(d)&&c!=="_self")return YC(e||"",c),new ty(null);const m=window.open(e||"",c,h);K(m,t,"popup-blocked");try{m.focus()}catch{}return new ty(m)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",XC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function ny(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Li,eventId:s};if(e instanceof b_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",FI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof ka){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${ZC}=${encodeURIComponent(u)}`:"";return`${ek(t)}?${ja(c).slice(1)}${d}`}function ek({config:t}){return t.emulator?vm(t,XC):`https://${t.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k_,this._completeRedirectFn=TC,this._overrideRedirectResult=EC}async _openPopup(e,n,r,s){var a;qn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await ny(e,n,r,$h(),s);return QC(e,i,Nm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ny(e,n,r,$h(),s);return sC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BC(e),r=new jC(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vd,{type:Vd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Vd];i!==void 0&&n(!!i),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x_()||h_()||wm()}}const nk=tk;var ry="@firebase/auth",sy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(t){_i(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;K(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v_(t)},d=new bS(r,s,i,u);return PS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_i(new _s("auth-internal",e=>{const n=Cs(e.getProvider("auth").getImmediate());return(r=>new rk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(ry,sy,sk(t)),kr(ry,sy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=5*60,ak=K1("authIdTokenMaxAge")||ok;let iy=null;const lk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ak)return;const s=n==null?void 0:n.token;iy!==s&&(iy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ck(t=e_()){const e=ym(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AS(t,{popupRedirectResolver:nk,persistence:[fC,tC,k_]}),r=K1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=lk(i.toString());JS(n,a,()=>a(n.currentUser)),YS(n,c=>a(c))}}const s=W1("auth");return s&&DS(n,`http://${s}`),n}function uk(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}NS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=gn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");var oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,V_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,v){function T(){}T.prototype=v.prototype,N.F=v.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(S,R,C){for(var j=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)j[qe-2]=arguments[qe];return v.prototype[R].apply(S,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,v,T){T||(T=0);const S=Array(16);if(typeof v=="string")for(var R=0;R<16;++R)S[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;R<16;++R)S[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=N.g[0],T=N.g[1],R=N.g[2];let C=N.g[3],j;j=v+(C^T&(R^C))+S[0]+3614090360&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[1]+3905402710&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[2]+606105819&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[3]+3250441966&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[4]+4118548399&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[5]+1200080426&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[6]+2821735955&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[7]+4249261313&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[8]+1770035416&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[9]+2336552879&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[10]+4294925233&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[11]+2304563134&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(C^T&(R^C))+S[12]+1804603682&4294967295,v=T+(j<<7&4294967295|j>>>25),j=C+(R^v&(T^R))+S[13]+4254626195&4294967295,C=v+(j<<12&4294967295|j>>>20),j=R+(T^C&(v^T))+S[14]+2792965006&4294967295,R=C+(j<<17&4294967295|j>>>15),j=T+(v^R&(C^v))+S[15]+1236535329&4294967295,T=R+(j<<22&4294967295|j>>>10),j=v+(R^C&(T^R))+S[1]+4129170786&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[6]+3225465664&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[11]+643717713&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[0]+3921069994&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[5]+3593408605&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[10]+38016083&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[15]+3634488961&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[4]+3889429448&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[9]+568446438&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[14]+3275163606&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[3]+4107603335&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[8]+1163531501&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(R^C&(T^R))+S[13]+2850285829&4294967295,v=T+(j<<5&4294967295|j>>>27),j=C+(T^R&(v^T))+S[2]+4243563512&4294967295,C=v+(j<<9&4294967295|j>>>23),j=R+(v^T&(C^v))+S[7]+1735328473&4294967295,R=C+(j<<14&4294967295|j>>>18),j=T+(C^v&(R^C))+S[12]+2368359562&4294967295,T=R+(j<<20&4294967295|j>>>12),j=v+(T^R^C)+S[5]+4294588738&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[8]+2272392833&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[11]+1839030562&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[14]+4259657740&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[1]+2763975236&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[4]+1272893353&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[7]+4139469664&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[10]+3200236656&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[13]+681279174&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[0]+3936430074&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[3]+3572445317&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[6]+76029189&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(T^R^C)+S[9]+3654602809&4294967295,v=T+(j<<4&4294967295|j>>>28),j=C+(v^T^R)+S[12]+3873151461&4294967295,C=v+(j<<11&4294967295|j>>>21),j=R+(C^v^T)+S[15]+530742520&4294967295,R=C+(j<<16&4294967295|j>>>16),j=T+(R^C^v)+S[2]+3299628645&4294967295,T=R+(j<<23&4294967295|j>>>9),j=v+(R^(T|~C))+S[0]+4096336452&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[7]+1126891415&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[14]+2878612391&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[5]+4237533241&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[12]+1700485571&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[3]+2399980690&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[10]+4293915773&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[1]+2240044497&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[8]+1873313359&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[15]+4264355552&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[6]+2734768916&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[13]+1309151649&4294967295,T=R+(j<<21&4294967295|j>>>11),j=v+(R^(T|~C))+S[4]+4149444226&4294967295,v=T+(j<<6&4294967295|j>>>26),j=C+(T^(v|~R))+S[11]+3174756917&4294967295,C=v+(j<<10&4294967295|j>>>22),j=R+(v^(C|~T))+S[2]+718787259&4294967295,R=C+(j<<15&4294967295|j>>>17),j=T+(C^(R|~v))+S[9]+3951481745&4294967295,N.g[0]=N.g[0]+v&4294967295,N.g[1]=N.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+R&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.v=function(N,v){v===void 0&&(v=N.length);const T=v-this.blockSize,S=this.C;let R=this.h,C=0;for(;C<v;){if(R==0)for(;C<=T;)s(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<v;)if(S[R++]=N.charCodeAt(C++),R==this.blockSize){s(this,S),R=0;break}}else for(;C<v;)if(S[R++]=N[C++],R==this.blockSize){s(this,S),R=0;break}}this.h=R,this.o+=v},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var v=1;v<N.length-8;++v)N[v]=0;v=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=v&255,v/=256;for(this.v(N),N=Array(16),v=0,T=0;T<4;++T)for(let S=0;S<32;S+=8)N[v++]=this.g[T]>>>S&255;return N};function i(N,v){var T=c;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=v(N)}function a(N,v){this.h=v;const T=[];let S=!0;for(let R=N.length-1;R>=0;R--){const C=N[R]|0;S&&C==v||(T[R]=C,S=!1)}this.g=T}var c={};function u(N){return-128<=N&&N<128?i(N,function(v){return new a([v|0],v<0?-1:0)}):new a([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(N<0)return A(d(-N));const v=[];let T=1;for(let S=0;N>=T;S++)v[S]=N/T|0,T*=4294967296;return new a(v,0)}function h(N,v){if(N.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(N.charAt(0)=="-")return A(h(N.substring(1),v));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(v,8));let S=m;for(let C=0;C<N.length;C+=8){var R=Math.min(8,N.length-C);const j=parseInt(N.substring(C,C+R),v);R<8?(R=d(Math.pow(v,R)),S=S.j(R).add(d(j))):(S=S.j(T),S=S.add(d(j)))}return S}var m=u(0),g=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(I(this))return-A(this).m();let N=0,v=1;for(let T=0;T<this.g.length;T++){const S=this.i(T);N+=(S>=0?S:4294967296+S)*v,v*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(b(this))return"0";if(I(this))return"-"+A(this).toString(N);const v=d(Math.pow(N,6));var T=this;let S="";for(;;){const R=D(T,v).g;T=E(T,R.j(v));let C=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=R,b(T))return C+S;for(;C.length<6;)C="0"+C;S=C+S}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function b(N){if(N.h!=0)return!1;for(let v=0;v<N.g.length;v++)if(N.g[v]!=0)return!1;return!0}function I(N){return N.h==-1}t.l=function(N){return N=E(this,N),I(N)?-1:b(N)?0:1};function A(N){const v=N.g.length,T=[];for(let S=0;S<v;S++)T[S]=~N.g[S];return new a(T,~N.h).add(g)}t.abs=function(){return I(this)?A(this):this},t.add=function(N){const v=Math.max(this.g.length,N.g.length),T=[];let S=0;for(let R=0;R<=v;R++){let C=S+(this.i(R)&65535)+(N.i(R)&65535),j=(C>>>16)+(this.i(R)>>>16)+(N.i(R)>>>16);S=j>>>16,C&=65535,j&=65535,T[R]=j<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function E(N,v){return N.add(A(v))}t.j=function(N){if(b(this)||b(N))return m;if(I(this))return I(N)?A(this).j(A(N)):A(A(this).j(N));if(I(N))return A(this.j(A(N)));if(this.l(x)<0&&N.l(x)<0)return d(this.m()*N.m());const v=this.g.length+N.g.length,T=[];for(var S=0;S<2*v;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(let R=0;R<N.g.length;R++){const C=this.i(S)>>>16,j=this.i(S)&65535,qe=N.i(R)>>>16,bn=N.i(R)&65535;T[2*S+2*R]+=j*bn,_(T,2*S+2*R),T[2*S+2*R+1]+=C*bn,_(T,2*S+2*R+1),T[2*S+2*R+1]+=j*qe,_(T,2*S+2*R+1),T[2*S+2*R+2]+=C*qe,_(T,2*S+2*R+2)}for(N=0;N<v;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=v;N<2*v;N++)T[N]=0;return new a(T,0)};function _(N,v){for(;(N[v]&65535)!=N[v];)N[v+1]+=N[v]>>>16,N[v]&=65535,v++}function w(N,v){this.g=N,this.h=v}function D(N,v){if(b(v))throw Error("division by zero");if(b(N))return new w(m,m);if(I(N))return v=D(A(N),v),new w(A(v.g),A(v.h));if(I(v))return v=D(N,A(v)),new w(A(v.g),v.h);if(N.g.length>30){if(I(N)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,S=v;S.l(N)<=0;)T=M(T),S=M(S);var R=F(T,1),C=F(S,1);for(S=F(S,2),T=F(T,2);!b(S);){var j=C.add(S);j.l(N)<=0&&(R=R.add(T),C=j),S=F(S,1),T=F(T,1)}return v=E(N,R.j(v)),new w(R,v)}for(R=m;N.l(v)>=0;){for(T=Math.max(1,Math.floor(N.m()/v.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),C=d(T),j=C.j(v);I(j)||j.l(N)>0;)T-=S,C=d(T),j=C.j(v);b(C)&&(C=g),R=R.add(C),N=E(N,j)}return new w(R,N)}t.B=function(N){return D(this,N).h},t.and=function(N){const v=Math.max(this.g.length,N.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)&N.i(S);return new a(T,this.h&N.h)},t.or=function(N){const v=Math.max(this.g.length,N.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)|N.i(S);return new a(T,this.h|N.h)},t.xor=function(N){const v=Math.max(this.g.length,N.g.length),T=[];for(let S=0;S<v;S++)T[S]=this.i(S)^N.i(S);return new a(T,this.h^N.h)};function M(N){const v=N.g.length+1,T=[];for(let S=0;S<v;S++)T[S]=N.i(S)<<1|N.i(S-1)>>>31;return new a(T,N.h)}function F(N,v){const T=v>>5;v%=32;const S=N.g.length-T,R=[];for(let C=0;C<S;C++)R[C]=v>0?N.i(C+T)>>>v|N.i(C+T+1)<<32-v:N.i(C+T);return new a(R,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,V_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Rr=a}).apply(typeof oy<"u"?oy:typeof self<"u"?self:typeof window<"u"?window:{});var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,No,F_,Bl,Wh,U_,z_,$_;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof xl=="object"&&xl];for(var f=0;f<l.length;++f){var p=l[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var p=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in p))break e;p=p[P]}l=l[l.length-1],y=p[l],f=f(y),f!=y&&f!=null&&e(p,l,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(f){var p=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&p.push([y,f[y]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function u(l,f,p){return l.call.apply(l.bind,arguments)}function d(l,f,p){return d=u,d.apply(null,arguments)}function h(l,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function m(l,f){function p(){}p.prototype=f.prototype,l.Z=f.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(y,P,L){for(var z=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)z[ee-2]=arguments[ee];return f.prototype[P].apply(y,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function x(l){const f=l.length;if(f>0){const p=Array(f);for(let y=0;y<f;y++)p[y]=l[y];return p}return[]}function b(l,f){for(let y=1;y<arguments.length;y++){const P=arguments[y];var p=typeof P;if(p=p!="object"?p:P?Array.isArray(P)?"array":p:"null",p=="array"||p=="object"&&typeof P.length=="number"){p=l.length||0;const L=P.length||0;l.length=p+L;for(let z=0;z<L;z++)l[p+z]=P[z]}else l.push(P)}}class I{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(l){a.setTimeout(()=>{throw l},0)}function E(){var l=N;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class _{constructor(){this.h=this.g=null}add(f,p){const y=w.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var w=new I(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,N=new _,v=()=>{const l=Promise.resolve(void 0);M=()=>{l.then(T)}};function T(){for(var l;l=E();){try{l.h.call(l.g)}catch(p){A(p)}var f=w;f.j(l),f.h<100&&(f.h++,l.next=f.g,f.g=l)}F=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return l}();function j(l){return/^[\s\xa0]*$/.test(l)}function qe(l,f){R.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,f)}m(qe,R),qe.prototype.init=function(l,f){const p=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget,f||(p=="mouseover"?f=l.fromElement:p=="mouseout"&&(f=l.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&qe.Z.h.call(this)},qe.prototype.h=function(){qe.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var bn="closure_listenable_"+(Math.random()*1e6|0),$i=0;function Bi(l,f,p,y,P){this.listener=l,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=P,this.key=++$i,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Y(l,f,p){for(const y in l)f.call(p,l[y],y,l)}function Z(l,f){for(const p in l)f.call(void 0,l[p],p,l)}function ye(l){const f={};for(const p in l)f[p]=l[p];return f}const je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yr(l,f){let p,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(p in y)l[p]=y[p];for(let L=0;L<je.length;L++)p=je[L],Object.prototype.hasOwnProperty.call(y,p)&&(l[p]=y[p])}}function Pt(l){this.src=l,this.g={},this.h=0}Pt.prototype.add=function(l,f,p,y,P){const L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);const z=qt(l,f,y,P);return z>-1?(f=l[z],p||(f.fa=!1)):(f=new Bi(f,this.src,L,!!y,P),f.fa=p,l.push(f)),f};function Jr(l,f){const p=f.type;if(p in l.g){var y=l.g[p],P=Array.prototype.indexOf.call(y,f,void 0),L;(L=P>=0)&&Array.prototype.splice.call(y,P,1),L&&(B(f),l.g[p].length==0&&(delete l.g[p],l.h--))}}function qt(l,f,p,y){for(let P=0;P<l.length;++P){const L=l[P];if(!L.da&&L.listener==f&&L.capture==!!p&&L.ha==y)return P}return-1}var Zn="closure_lm_"+(Math.random()*1e6|0),Lu={};function gp(l,f,p,y,P){if(Array.isArray(f)){for(let L=0;L<f.length;L++)gp(l,f[L],p,y,P);return null}return p=vp(p),l&&l[bn]?l.J(f,p,c(y)?!!y.capture:!!y,P):LE(l,f,p,!1,y,P)}function LE(l,f,p,y,P,L){if(!f)throw Error("Invalid event type");const z=c(P)?!!P.capture:!!P;let ee=Vu(l);if(ee||(l[Zn]=ee=new Pt(l)),p=ee.add(f,p,y,z,L),p.proxy)return p;if(y=ME(),p.proxy=y,y.src=l,y.listener=p,l.addEventListener)C||(P=z),P===void 0&&(P=!1),l.addEventListener(f.toString(),y,P);else if(l.attachEvent)l.attachEvent(xp(f.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ME(){function l(p){return f.call(l.src,l.listener,p)}const f=VE;return l}function yp(l,f,p,y,P){if(Array.isArray(f))for(var L=0;L<f.length;L++)yp(l,f[L],p,y,P);else y=c(y)?!!y.capture:!!y,p=vp(p),l&&l[bn]?(l=l.i,L=String(f).toString(),L in l.g&&(f=l.g[L],p=qt(f,p,y,P),p>-1&&(B(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete l.g[L],l.h--)))):l&&(l=Vu(l))&&(f=l.g[f.toString()],l=-1,f&&(l=qt(f,p,y,P)),(p=l>-1?f[l]:null)&&Mu(p))}function Mu(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[bn])Jr(f.i,l);else{var p=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(p,y,l.capture):f.detachEvent?f.detachEvent(xp(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=Vu(f))?(Jr(p,l),p.h==0&&(p.src=null,f[Zn]=null)):B(l)}}}function xp(l){return l in Lu?Lu[l]:Lu[l]="on"+l}function VE(l,f){if(l.da)l=!0;else{f=new qe(f,this);const p=l.listener,y=l.ha||l.src;l.fa&&Mu(l),l=p.call(y,f)}return l}function Vu(l){return l=l[Zn],l instanceof Pt?l:null}var Ou="__closure_events_fn_"+(Math.random()*1e9>>>0);function vp(l){return typeof l=="function"?l:(l[Ou]||(l[Ou]=function(f){return l.handleEvent(f)}),l[Ou])}function tt(){S.call(this),this.i=new Pt(this),this.M=this,this.G=null}m(tt,S),tt.prototype[bn]=!0,tt.prototype.removeEventListener=function(l,f,p,y){yp(this,l,f,p,y)};function dt(l,f){var p,y=l.G;if(y)for(p=[];y;y=y.G)p.push(y);if(l=l.M,y=f.type||f,typeof f=="string")f=new R(f,l);else if(f instanceof R)f.target=f.target||l;else{var P=f;f=new R(y,l),Yr(f,P)}P=!0;let L,z;if(p)for(z=p.length-1;z>=0;z--)L=f.g=p[z],P=za(L,y,!0,f)&&P;if(L=f.g=l,P=za(L,y,!0,f)&&P,P=za(L,y,!1,f)&&P,p)for(z=0;z<p.length;z++)L=f.g=p[z],P=za(L,y,!1,f)&&P}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var l=this.i;for(const f in l.g){const p=l.g[f];for(let y=0;y<p.length;y++)B(p[y]);delete l.g[f],l.h--}}this.G=null},tt.prototype.J=function(l,f,p,y){return this.i.add(String(l),f,!1,p,y)},tt.prototype.K=function(l,f,p,y){return this.i.add(String(l),f,!0,p,y)};function za(l,f,p,y){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();let P=!0;for(let L=0;L<f.length;++L){const z=f[L];if(z&&!z.da&&z.capture==p){const ee=z.listener,De=z.ha||z.src;z.fa&&Jr(l.i,z),P=ee.call(De,y)!==!1&&P}}return P&&!y.defaultPrevented}function OE(l,f){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:a.setTimeout(l,f||0)}function _p(l){l.g=OE(()=>{l.g=null,l.i&&(l.i=!1,_p(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class FE extends S{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:_p(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(l){S.call(this),this.h=l,this.g={}}m(Hi,S);var wp=[];function Ep(l){Y(l.g,function(f,p){this.g.hasOwnProperty(p)&&Mu(f)},l),l.g={}}Hi.prototype.N=function(){Hi.Z.N.call(this),Ep(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fu=a.JSON.stringify,UE=a.JSON.parse,zE=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function bp(){}function Np(){}var qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Uu(){R.call(this,"d")}m(Uu,R);function zu(){R.call(this,"c")}m(zu,R);var Xr={},Tp=null;function $a(){return Tp=Tp||new tt}Xr.Ia="serverreachability";function Ip(l){R.call(this,Xr.Ia,l)}m(Ip,R);function Wi(l){const f=$a();dt(f,new Ip(f))}Xr.STAT_EVENT="statevent";function jp(l,f){R.call(this,Xr.STAT_EVENT,l),this.stat=f}m(jp,R);function ht(l){const f=$a();dt(f,new jp(f,l))}Xr.Ja="timingevent";function Sp(l,f){R.call(this,Xr.Ja,l),this.size=f}m(Sp,R);function Gi(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function $E(l,f,p,y,P,L){l.info(function(){if(l.g)if(L){var z="",ee=L.split("&");for(let ue=0;ue<ee.length;ue++){var De=ee[ue].split("=");if(De.length>1){const ze=De[0];De=De[1];const ln=ze.split("_");z=ln.length>=2&&ln[1]=="type"?z+(ze+"="+De+"&"):z+(ze+"=redacted&")}}}else z=null;else z=L;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+f+`
`+p+`
`+z})}function BE(l,f,p,y,P,L,z){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+f+`
`+p+`
`+L+" "+z})}function As(l,f,p,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+qE(l,p)+(y?" "+y:"")})}function HE(l,f){l.info(function(){return"TIMEOUT: "+f})}Ki.prototype.info=function(){};function qE(l,f){if(!l.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(l=0;l<L.length;l++)if(Array.isArray(L[l])){var p=L[l];if(!(p.length<2)){var y=p[1];if(Array.isArray(y)&&!(y.length<1)){var P=y[0];if(P!="noop"&&P!="stop"&&P!="close")for(let z=1;z<y.length;z++)y[z]=""}}}}return Fu(L)}catch{return f}}var Ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kp;function $u(){}m($u,bp),$u.prototype.g=function(){return new XMLHttpRequest},kp=new $u;function Qi(l){return encodeURIComponent(String(l))}function WE(l){var f=1;l=l.split(":");const p=[];for(;f>0&&l.length;)p.push(l.shift()),f--;return l.length&&p.push(l.join(":")),p}function er(l,f,p,y){this.j=l,this.i=f,this.l=p,this.S=y||1,this.V=new Hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}var Ap={},Bu={};function Hu(l,f,p){l.M=1,l.A=qa(an(f)),l.u=p,l.R=!0,Pp(l,null)}function Pp(l,f){l.F=Date.now(),Ha(l),l.B=an(l.A);var p=l.B,y=l.S;Array.isArray(y)||(y=[String(y)]),Wp(p.i,"t",y),l.C=0,p=l.j.L,l.h=new Rp,l.g=ug(l.j,p?f:null,!l.u),l.P>0&&(l.O=new FE(d(l.Y,l,l.g),l.P)),f=l.V,p=l.g,y=l.ba;var P="readystatechange";Array.isArray(P)||(P&&(wp[0]=P.toString()),P=wp);for(let L=0;L<P.length;L++){const z=gp(p,P[L],y||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.J?ye(l.J):{},l.u?(l.v||(l.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,f)):(l.v="GET",l.g.ea(l.B,l.v,null,f)),Wi(),$E(l.i,l.v,l.B,l.l,l.S,l.u)}er.prototype.ba=function(l){l=l.target;const f=this.O;f&&rr(l)==3?f.j():this.Y(l)},er.prototype.Y=function(l){try{if(l==this.g)e:{const ee=rr(this.g),De=this.g.ya(),ue=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||Zp(this.g)))){this.K||ee!=4||De==7||(De==8||ue<=0?Wi(3):Wi(2)),qu(this);var f=this.g.ca();this.X=f;var p=GE(this);if(this.o=f==200,BE(this.i,this.v,this.B,this.l,this.S,ee,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,P=this.g;if((y=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(y)){var L=y;break t}}L=null}if(l=L)As(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wu(this,l);else{this.o=!1,this.m=3,ht(12),Zr(this),Yi(this);break e}}if(this.R){l=!0;let ze;for(;!this.K&&this.C<p.length;)if(ze=KE(this,p),ze==Bu){ee==4&&(this.m=4,ht(14),l=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==Ap){this.m=4,ht(15),As(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else As(this.i,this.l,ze,null),Wu(this,ze);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||p.length!=0||this.h.h||(this.m=1,ht(16),l=!1),this.o=this.o&&l,!l)As(this.i,this.l,p,"[Invalid Chunked Response]"),Zr(this),Yi(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),ed(z),z.P=!0,ht(11))}}else As(this.i,this.l,p,null),Wu(this,p);ee==4&&Zr(this),this.o&&!this.K&&(ee==4?og(this.j,this):(this.o=!1,Ha(this)))}else lb(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Zr(this),Yi(this)}}}catch{}finally{}};function GE(l){if(!Dp(l))return l.g.la();const f=Zp(l.g);if(f==="")return"";let p="";const y=f.length,P=rr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Zr(l),Yi(l),"";l.h.i=new a.TextDecoder}for(let L=0;L<y;L++)l.h.h=!0,p+=l.h.i.decode(f[L],{stream:!(P&&L==y-1)});return f.length=0,l.h.g+=p,l.C=0,l.h.g}function Dp(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function KE(l,f){var p=l.C,y=f.indexOf(`
`,p);return y==-1?Bu:(p=Number(f.substring(p,y)),isNaN(p)?Ap:(y+=1,y+p>f.length?Bu:(f=f.slice(y,y+p),l.C=y+p,f)))}er.prototype.cancel=function(){this.K=!0,Zr(this)};function Ha(l){l.T=Date.now()+l.H,Lp(l,l.H)}function Lp(l,f){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Gi(d(l.aa,l),f)}function qu(l){l.D&&(a.clearTimeout(l.D),l.D=null)}er.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(HE(this.i,this.B),this.M!=2&&(Wi(),ht(17)),Zr(this),this.m=2,Yi(this)):Lp(this,this.T-l)};function Yi(l){l.j.I==0||l.K||og(l.j,l)}function Zr(l){qu(l);var f=l.O;f&&typeof f.dispose=="function"&&f.dispose(),l.O=null,Ep(l.V),l.g&&(f=l.g,l.g=null,f.abort(),f.dispose())}function Wu(l,f){try{var p=l.j;if(p.I!=0&&(p.g==l||Gu(p.h,l))){if(!l.L&&Gu(p.h,l)&&p.I==3){try{var y=p.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)Ya(p),Ka(p);else break e;Zu(p),ht(18)}}else p.xa=P[1],0<p.xa-p.K&&P[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Gi(d(p.Va,p),6e3));Op(p.h)<=1&&p.ta&&(p.ta=void 0)}else ts(p,11)}else if((l.L||p.g==l)&&Ya(p),!j(f))for(P=p.Ba.g.parse(f),f=0;f<P.length;f++){let ue=P[f];const ze=ue[0];if(!(ze<=p.K))if(p.K=ze,ue=ue[1],p.I==2)if(ue[0]=="c"){p.M=ue[1],p.ba=ue[2];const ln=ue[3];ln!=null&&(p.ka=ln,p.j.info("VER="+p.ka));const ns=ue[4];ns!=null&&(p.za=ns,p.j.info("SVER="+p.za));const sr=ue[5];sr!=null&&typeof sr=="number"&&sr>0&&(y=1.5*sr,p.O=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const ir=l.g;if(ir){const Xa=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var L=y.h;L.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ku(L,L.h),L.h=null))}if(y.G){const td=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;td&&(y.wa=td,me(y.J,y.G,td))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),y=p;var z=l;if(y.na=cg(y,y.L?y.ba:null,y.W),z.L){Fp(y.h,z);var ee=z,De=y.O;De&&(ee.H=De),ee.D&&(qu(ee),Ha(ee)),y.g=z}else sg(y);p.i.length>0&&Qa(p)}else ue[0]!="stop"&&ue[0]!="close"||ts(p,7);else p.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?ts(p,7):Xu(p):ue[0]!="noop"&&p.l&&p.l.qa(ue),p.A=0)}}Wi(4)}catch{}}var QE=class{constructor(l,f){this.g=l,this.map=f}};function Mp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Op(l){return l.h?1:l.g?l.g.size:0}function Gu(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Ku(l,f){l.g?l.g.add(f):l.h=f}function Fp(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Mp.prototype.cancel=function(){if(this.i=Up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Up(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const p of l.g.values())f=f.concat(p.G);return f}return x(l.i)}var zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YE(l,f){if(l){l=l.split("&");for(let p=0;p<l.length;p++){const y=l[p].indexOf("=");let P,L=null;y>=0?(P=l[p].substring(0,y),L=l[p].substring(y+1)):P=l[p],f(P,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function tr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;l instanceof tr?(this.l=l.l,Ji(this,l.j),this.o=l.o,this.g=l.g,Xi(this,l.u),this.h=l.h,Qu(this,Gp(l.i)),this.m=l.m):l&&(f=String(l).match(zp))?(this.l=!1,Ji(this,f[1]||"",!0),this.o=Zi(f[2]||""),this.g=Zi(f[3]||"",!0),Xi(this,f[4]),this.h=Zi(f[5]||"",!0),Qu(this,f[6]||"",!0),this.m=Zi(f[7]||"")):(this.l=!1,this.i=new to(null,this.l))}tr.prototype.toString=function(){const l=[];var f=this.j;f&&l.push(eo(f,$p,!0),":");var p=this.g;return(p||f=="file")&&(l.push("//"),(f=this.o)&&l.push(eo(f,$p,!0),"@"),l.push(Qi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(eo(p,p.charAt(0)=="/"?ZE:XE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",eo(p,tb)),l.join("")},tr.prototype.resolve=function(l){const f=an(this);let p=!!l.j;p?Ji(f,l.j):p=!!l.o,p?f.o=l.o:p=!!l.g,p?f.g=l.g:p=l.u!=null;var y=l.h;if(p)Xi(f,l.u);else if(p=!!l.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var P=f.h.lastIndexOf("/");P!=-1&&(y=f.h.slice(0,P+1)+y)}if(P=y,P==".."||P==".")y="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){y=P.lastIndexOf("/",0)==0,P=P.split("/");const L=[];for(let z=0;z<P.length;){const ee=P[z++];ee=="."?y&&z==P.length&&L.push(""):ee==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),y&&z==P.length&&L.push("")):(L.push(ee),y=!0)}y=L.join("/")}else y=P}return p?f.h=y:p=l.i.toString()!=="",p?Qu(f,Gp(l.i)):p=!!l.m,p&&(f.m=l.m),f};function an(l){return new tr(l)}function Ji(l,f,p){l.j=p?Zi(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Xi(l,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);l.u=f}else l.u=null}function Qu(l,f,p){f instanceof to?(l.i=f,nb(l.i,l.l)):(p||(f=eo(f,eb)),l.i=new to(f,l.l))}function me(l,f,p){l.i.set(f,p)}function qa(l){return me(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Zi(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function eo(l,f,p){return typeof l=="string"?(l=encodeURI(l).replace(f,JE),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function JE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var $p=/[#\/\?@]/g,XE=/[#\?:]/g,ZE=/[#\?]/g,eb=/[#\?@]/g,tb=/#/g;function to(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function es(l){l.g||(l.g=new Map,l.h=0,l.i&&YE(l.i,function(f,p){l.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=to.prototype,t.add=function(l,f){es(this),this.i=null,l=Ps(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(f),this.h+=1,this};function Bp(l,f){es(l),f=Ps(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Hp(l,f){return es(l),f=Ps(l,f),l.g.has(f)}t.forEach=function(l,f){es(this),this.g.forEach(function(p,y){p.forEach(function(P){l.call(f,P,y,this)},this)},this)};function qp(l,f){es(l);let p=[];if(typeof f=="string")Hp(l,f)&&(p=p.concat(l.g.get(Ps(l,f))));else for(l=Array.from(l.g.values()),f=0;f<l.length;f++)p=p.concat(l[f]);return p}t.set=function(l,f){return es(this),this.i=null,l=Ps(this,l),Hp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=qp(this,l),l.length>0?String(l[0]):f):f};function Wp(l,f,p){Bp(l,f),p.length>0&&(l.i=null,l.g.set(Ps(l,f),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var p=f[y];const P=Qi(p);p=qp(this,p);for(let L=0;L<p.length;L++){let z=P;p[L]!==""&&(z+="="+Qi(p[L])),l.push(z)}}return this.i=l.join("&")};function Gp(l){const f=new to;return f.i=l.i,l.g&&(f.g=new Map(l.g),f.h=l.h),f}function Ps(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function nb(l,f){f&&!l.j&&(es(l),l.i=null,l.g.forEach(function(p,y){const P=y.toLowerCase();y!=P&&(Bp(this,y),Wp(this,P,p))},l)),l.j=f}function rb(l,f){const p=new Ki;if(a.Image){const y=new Image;y.onload=h(nr,p,"TestLoadImage: loaded",!0,f,y),y.onerror=h(nr,p,"TestLoadImage: error",!1,f,y),y.onabort=h(nr,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(nr,p,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}function sb(l,f){const p=new Ki,y=new AbortController,P=setTimeout(()=>{y.abort(),nr(p,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:y.signal}).then(L=>{clearTimeout(P),L.ok?nr(p,"TestPingServer: ok",!0,f):nr(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),nr(p,"TestPingServer: error",!1,f)})}function nr(l,f,p,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(p)}catch{}}function ib(){this.g=new zE}function Yu(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Yu,bp),Yu.prototype.g=function(){return new Wa(this.i,this.h)};function Wa(l,f){tt.call(this),this.H=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Wa,tt),t=Wa.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=f,this.readyState=1,ro(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(f.body=l),(this.H||a).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?no(this):ro(this),this.readyState==3&&Kp(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,no(this))},t.Na=function(l){this.g&&(this.response=l,no(this))},t.ga=function(){this.g&&no(this)};function no(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ro(l)}t.setRequestHeader=function(l,f){this.A.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=f.next();return l.join(`\r
`)};function ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qp(l){let f="";return Y(l,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function Ju(l,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Qp(p),typeof l=="string"?p!=null&&Qi(p):me(l,f,p))}function Ne(l){tt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ne,tt);var ob=/^https?$/i,ab=["POST","PUT"];t=Ne.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kp.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(L){Yp(this,L);return}if(l=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)p.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())p.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(Array.prototype.indexOf.call(ab,f,void 0)>=0)||y||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of p)this.g.setRequestHeader(L,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(L){Yp(this,L)}};function Yp(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.o=5,Jp(l),Ga(l)}function Jp(l){l.A||(l.A=!0,dt(l,"complete"),dt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,dt(this,"complete"),dt(this,"abort"),Ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xp(this):this.Xa())},t.Xa=function(){Xp(this)};function Xp(l){if(l.h&&typeof i<"u"){if(l.v&&rr(l)==4)setTimeout(l.Ca.bind(l),0);else if(dt(l,"readystatechange"),rr(l)==4){l.h=!1;try{const L=l.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=L===0){let z=String(l.D).match(zp)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),y=!ob.test(z?z.toLowerCase():"")}p=y}if(p)dt(l,"complete"),dt(l,"success");else{l.o=6;try{var P=rr(l)>2?l.g.statusText:""}catch{P=""}l.l=P+" ["+l.ca()+"]",Jp(l)}}finally{Ga(l)}}}}function Ga(l,f){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const p=l.g;l.g=null,f||dt(l,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return rr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),UE(f)}};function Zp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function lb(l){const f={};l=(l.g&&rr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(j(l[y]))continue;var p=WE(l[y]);const P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=f[P]||[];f[P]=L,L.push(p)}Z(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(l,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||f}function eg(l){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=so("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=so("baseRetryDelayMs",5e3,l),this.Za=so("retryDelaySeedMs",1e4,l),this.Ta=so("forwardChannelMaxRetries",2,l),this.va=so("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Mp(l&&l.concurrentRequestLimit),this.Ba=new ib,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=eg.prototype,t.ka=8,t.I=1,t.connect=function(l,f,p,y){ht(0),this.W=l,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.J=cg(this,null,this.W),Qa(this)};function Xu(l){if(tg(l),l.I==3){var f=l.V++,p=an(l.J);if(me(p,"SID",l.M),me(p,"RID",f),me(p,"TYPE","terminate"),io(l,p),f=new er(l,l.j,f),f.M=2,f.A=qa(an(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.A,p=!0),p||(f.g=ug(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Ha(f)}lg(l)}function Ka(l){l.g&&(ed(l),l.g.cancel(),l.g=null)}function tg(l){Ka(l),l.v&&(a.clearTimeout(l.v),l.v=null),Ya(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&a.clearTimeout(l.m),l.m=null)}function Qa(l){if(!Vp(l.h)&&!l.m){l.m=!0;var f=l.Ea;M||v(),F||(M(),F=!0),N.add(f,l),l.D=0}}function cb(l,f){return Op(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=f.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Gi(d(l.Ea,l,f),ag(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const P=new er(this,this.j,l);let L=this.o;if(this.U&&(L?(L=ye(L),Yr(L,this.U)):L=this.U),this.u!==null||this.R||(P.J=L,L=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=rg(this,P,f),p=an(this.J),me(p,"RID",l),me(p,"CVER",22),this.G&&me(p,"X-HTTP-Session-Id",this.G),io(this,p),L&&(this.R?f="headers="+Qi(Qp(L))+"&"+f:this.u&&Ju(p,this.u,L)),Ku(this.h,P),this.Ra&&me(p,"TYPE","init"),this.S?(me(p,"$req",f),me(p,"SID","null"),P.U=!0,Hu(P,p,null)):Hu(P,p,f),this.I=2}}else this.I==3&&(l?ng(this,l):this.i.length==0||Vp(this.h)||ng(this))};function ng(l,f){var p;f?p=f.l:p=l.V++;const y=an(l.J);me(y,"SID",l.M),me(y,"RID",p),me(y,"AID",l.K),io(l,y),l.u&&l.o&&Ju(y,l.u,l.o),p=new er(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),f&&(l.i=f.G.concat(l.i)),f=rg(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Ku(l.h,p),Hu(p,y,f)}function io(l,f){l.H&&Y(l.H,function(p,y){me(f,y,p)}),l.l&&Y({},function(p,y){me(f,y,p)})}function rg(l,f,p){p=Math.min(l.i.length,p);const y=l.l?d(l.l.Ka,l.l,l):null;e:{var P=l.i;let ee=-1;for(;;){const De=["count="+p];ee==-1?p>0?(ee=P[0].g,De.push("ofs="+ee)):ee=0:De.push("ofs="+ee);let ue=!0;for(let ze=0;ze<p;ze++){var L=P[ze].g;const ln=P[ze].map;if(L-=ee,L<0)ee=Math.max(0,P[ze].g-100),ue=!1;else try{L="req"+L+"_"||"";try{var z=ln instanceof Map?ln:Object.entries(ln);for(const[ns,sr]of z){let ir=sr;c(sr)&&(ir=Fu(sr)),De.push(L+ns+"="+encodeURIComponent(ir))}}catch(ns){throw De.push(L+"type="+encodeURIComponent("_badmap")),ns}}catch{y&&y(ln)}}if(ue){z=De.join("&");break e}}z=void 0}return l=l.i.splice(0,p),f.G=l,z}function sg(l){if(!l.g&&!l.v){l.Y=1;var f=l.Da;M||v(),F||(M(),F=!0),N.add(f,l),l.A=0}}function Zu(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Gi(d(l.Da,l),ag(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,ig(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Gi(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Ka(this),ig(this))};function ed(l){l.B!=null&&(a.clearTimeout(l.B),l.B=null)}function ig(l){l.g=new er(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var f=an(l.na);me(f,"RID","rpc"),me(f,"SID",l.M),me(f,"AID",l.K),me(f,"CI",l.F?"0":"1"),!l.F&&l.ia&&me(f,"TO",l.ia),me(f,"TYPE","xmlhttp"),io(l,f),l.u&&l.o&&Ju(f,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=qa(an(f)),p.u=null,p.R=!0,Pp(p,l)}t.Va=function(){this.C!=null&&(this.C=null,Ka(this),Zu(this),ht(19))};function Ya(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function og(l,f){var p=null;if(l.g==f){Ya(l),ed(l),l.g=null;var y=2}else if(Gu(l.h,f))p=f.G,Fp(l.h,f),y=1;else return;if(l.I!=0){if(f.o)if(y==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var P=l.D;y=$a(),dt(y,new Sp(y,p)),Qa(l)}else sg(l);else if(P=f.m,P==3||P==0&&f.X>0||!(y==1&&cb(l,f)||y==2&&Zu(l)))switch(p&&p.length>0&&(f=l.h,f.i=f.i.concat(p)),P){case 1:ts(l,5);break;case 4:ts(l,10);break;case 3:ts(l,6);break;default:ts(l,2)}}}function ag(l,f){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*f}function ts(l,f){if(l.j.info("Error code "+f),f==2){var p=d(l.bb,l),y=l.Ua;const P=!y;y=new tr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ji(y,"https"),qa(y),P?rb(y.toString(),p):sb(y.toString(),p)}else ht(2);l.I=0,l.l&&l.l.pa(f),lg(l),tg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function lg(l){if(l.I=0,l.ja=[],l.l){const f=Up(l.h);(f.length!=0||l.i.length!=0)&&(b(l.ja,f),b(l.ja,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.oa()}}function cg(l,f,p){var y=p instanceof tr?an(p):new tr(p);if(y.g!="")f&&(y.g=f+"."+y.g),Xi(y,y.u);else{var P=a.location;y=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;const L=new tr(null);y&&Ji(L,y),f&&(L.g=f),P&&Xi(L,P),p&&(L.h=p),y=L}return p=l.G,f=l.wa,p&&f&&me(y,p,f),me(y,"VER",l.ka),io(l,y),y}function ug(l,f,p){if(f&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Aa&&!l.ma?new Ne(new Yu({ab:p})):new Ne(l.ma),f.Fa(l.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dg(){}t=dg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ja(){}Ja.prototype.g=function(l,f){return new Nt(l,f)};function Nt(l,f){tt.call(this),this.g=new eg(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(l?l["X-WebChannel-Client-Profile"]=f.sa:l={"X-WebChannel-Client-Profile":f.sa}),this.g.U=l,(l=f&&f.Qb)&&!j(l)&&(this.g.u=l),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!j(f)&&(this.g.G=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Ds(this)}m(Nt,tt),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Xu(this.g)},Nt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=Fu(l),l=p);f.i.push(new QE(f.Ya++,l)),f.I==3&&Qa(f)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Xu(this.g),delete this.g,Nt.Z.N.call(this)};function hg(l){Uu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const p in f){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}m(hg,Uu);function fg(){zu.call(this),this.status=1}m(fg,zu);function Ds(l){this.g=l}m(Ds,dg),Ds.prototype.ra=function(){dt(this.g,"a")},Ds.prototype.qa=function(l){dt(this.g,new hg(l))},Ds.prototype.pa=function(l){dt(this.g,new fg)},Ds.prototype.oa=function(){dt(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,$_=function(){return new Ja},z_=function(){return $a()},U_=Xr,Wh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,Bl=Ba,Cp.COMPLETE="complete",F_=Cp,Np.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",tt.prototype.listen=tt.prototype.J,No=Np,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,O_=Ne}).apply(typeof xl<"u"?xl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vi="12.8.0";function dk(t){Vi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new pm("@firebase/firestore");function Vs(){return bs.logLevel}function H(t,...e){if(bs.logLevel<=re.DEBUG){const n=e.map(Im);bs.debug(`Firestore (${Vi}): ${t}`,...n)}}function Wn(t,...e){if(bs.logLevel<=re.ERROR){const n=e.map(Im);bs.error(`Firestore (${Vi}): ${t}`,...n)}}function wi(t,...e){if(bs.logLevel<=re.WARN){const n=e.map(Im);bs.warn(`Firestore (${Vi}): ${t}`,...n)}}function Im(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,B_(t,r,n)}function B_(t,e,n){let r=`FIRESTORE (${Vi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wn(r),new Error(r)}function le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||B_(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class fk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mk{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Ln;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ln,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ln)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new H_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new ot(e)}}class pk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class gk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ay(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=xk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Gh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Od(s)===Od(i)?se(s,i):Od(s)?1:-1}return se(t.length,e.length)}const vk=55296,_k=57343;function Od(t){const e=t.charCodeAt(0);return e>=vk&&e<=_k}function Ei(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="__name__";class dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return se(e.length,n.length)}static compareSegments(e,n){const r=dn.isNumericId(e),s=dn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dn.extractNumericId(e).compare(dn.extractNumericId(n)):Gh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class de extends dn{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const wk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends dn{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return wk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ly}static keyField(){return new Ye([ly])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(de.fromString(e))}static fromName(e){return new W(de.fromString(e).popFirst(5))}static empty(){return new W(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new de(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ek(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cy(t){if(!W.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uy(t){if(W.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function W_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mu(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Aa(t,e){if(!W_(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=-62135596800,hy=1e6;class he{static now(){return he.fromMillis(Date.now())}static fromDate(e){return he.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hy);return new he(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dy)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hy}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:he._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Aa(e,he._jsonSchema))return new he(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}he._jsonSchemaVersion="firestore/timestamp/1.0",he._jsonSchema={type:Pe("string",he._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new he(0,0))}static max(){return new J(new he(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=-1;function bk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new he(n+1,0):new he(n,r));return new Mr(s,W.empty(),e)}function Nk(t){return new Mr(t.readTime,t.key,da)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(J.min(),W.empty(),da)}static max(){return new Mr(J.max(),W.empty(),da)}}function Tk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Ik)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{a[d]=h,++c,c===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Sk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function gu(t){return t==null}function kc(t){return t===0&&1/t==-1/0}function Ck(t){return typeof t=="number"&&Number.isInteger(t)&&!kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="";function kk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fy(e)),e=Rk(t.get(n),e);return fy(e)}function Rk(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case G_:n+="";break;default:n+=i}}return n}function fy(t){return t+G_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vl(this.root,e,this.comparator,!0)}}class vl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Fe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ei(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Q_("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const Ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(le(!!t,39018),typeof t=="string"){let e=0;const n=Ak.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="server_timestamp",J_="__type__",X_="__previous_value__",Z_="__local_write_time__";function Cm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J_])==null?void 0:r.stringValue)===Y_}function yu(t){const e=t.mapValue.fields[X_];return Cm(e)?yu(e):e}function ha(t){const e=Vr(t.mapValue.fields[Z_].timestampValue);return new he(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,s,i,a,c,u,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}}const Rc="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||Rc}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===Rc}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function Dk(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="__type__",tw="__max__",_l={mapValue:{fields:{__type__:{stringValue:tw}}}},nw="__vector__",Ac="value";function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:Mk(t)?9007199254740991:Lk(t)?10:11:Q(28295,{value:t})}function En(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ha(t).isEqual(ha(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Vr(s.timestampValue),c=Vr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Or(s.bytesValue).isEqual(Or(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Se(s.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(s.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Se(s.integerValue)===Se(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Se(s.doubleValue),c=Se(i.doubleValue);return a===c?kc(a)===kc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ei(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(my(a)!==my(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!En(a[u],c[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function ma(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=Fr(t),r=Fr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Se(i.integerValue||i.doubleValue),u=Se(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gy(t.timestampValue,e.timestampValue);case 4:return gy(ha(t),ha(e));case 5:return Gh(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Or(i),u=Or(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=se(c[d],u[d]);if(h!==0)return h}return se(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=se(Se(i.latitude),Se(a.latitude));return c!==0?c:se(Se(i.longitude),Se(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,x,b,I;const c=i.fields||{},u=a.fields||{},d=(g=c[Ac])==null?void 0:g.arrayValue,h=(x=u[Ac])==null?void 0:x.arrayValue,m=se(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return m!==0?m:yy(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===_l.mapValue&&a===_l.mapValue)return 0;if(i===_l.mapValue)return 1;if(a===_l.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=Gh(u[m],h[m]);if(g!==0)return g;const x=bi(c[u[m]],d[h[m]]);if(x!==0)return x}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function gy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Vr(t),r=Vr(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function yy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bi(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function Ni(t){return Kh(t)}function Kh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Kh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Kh(n.fields[a])}`;return s+"}"}(t.mapValue):Q(61005,{value:t})}function Hl(t){switch(Fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yu(t);return e?16+Hl(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Hl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Gr(r.fields,(i,a)=>{s+=i.length+Hl(a)}),s}(t.mapValue);default:throw Q(13486,{value:t})}}function xy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qh(t){return!!t&&"integerValue"in t}function km(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function _y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ql(t){return!!t&&"mapValue"in t}function Lk(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ew])==null?void 0:r.stringValue)===nw}function Fo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fo(t.arrayValue.values[n]);return e}return{...t}}function Mk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ql(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fo(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Fo(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ql(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt(Fo(this.value))}}function rw(t){const e=[];return Gr(t.fields,(n,r)=>{const s=new Ye([n]);if(ql(r)){const i=rw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new lt(e,0,J.min(),J.min(),J.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new lt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new lt(e,2,n,J.min(),J.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,J.min(),J.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.position=e,this.inclusive=n}}function wy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=bi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ey(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sw=class{};class Ae extends sw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fk(e,n,r):n==="array-contains"?new $k(e,r):n==="in"?new Bk(e,r):n==="not-in"?new Hk(e,r):n==="array-contains-any"?new qk(e,r):new Ae(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uk(e,r):new zk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends sw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sn(e,n)}matches(e){return iw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iw(t){return t.op==="and"}function ow(t){return Ok(t)&&iw(t)}function Ok(t){for(const e of t.filters)if(e instanceof sn)return!1;return!0}function Yh(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+Ni(t.value);if(ow(t))return t.filters.map(e=>Yh(e)).join(",");{const e=t.filters.map(n=>Yh(n)).join(",");return`${t.op}(${e})`}}function aw(t,e){return t instanceof Ae?function(r,s){return s instanceof Ae&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof sn?function(r,s){return s instanceof sn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&aw(a,s.filters[c]),!0):!1}(t,e):void Q(19439)}function lw(t){return t instanceof Ae?function(n){return`${n.field.canonicalString()} ${n.op} ${Ni(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(lw).join(" ,")+"}"}(t):"Filter"}class Fk extends Ae{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Uk extends Ae{constructor(e,n){super(e,"in",n),this.keys=cw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zk extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=cw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class $k extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return km(n)&&ma(n.arrayValue,this.value)}}class Bk extends Ae{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class Hk extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ma(this.value.arrayValue,n)}}class qk extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function by(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Wk(t,e,n,r,s,i,a)}function Rm(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ni(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ni(r)).join(",")),e.Te=n}return e.Te}function Am(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ey(t.startAt,e.startAt)&&Ey(t.endAt,e.endAt)}function Jh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Gk(t,e,n,r,s,i,a,c){return new Ui(t,e,n,r,s,i,a,c)}function xu(t){return new Ui(t)}function Ny(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kk(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function uw(t){return t.collectionGroup!==null}function Uo(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Fe(Ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new pa(i,r))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new pa(Ye.keyField(),r))}return e.Ie}function xn(t){const e=X(t);return e.Ee||(e.Ee=Qk(e,Uo(t))),e.Ee}function Qk(t,e){if(t.limitType==="F")return by(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new pa(s.field,i)});const n=t.endAt?new Pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pc(t.startAt.position,t.startAt.inclusive):null;return by(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xh(t,e){const n=t.filters.concat([e]);return new Ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yk(t,e){const n=t.explicitOrderBy.concat([e]);return new Ui(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Dc(t,e,n){return new Ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vu(t,e){return Am(xn(t),xn(e))&&t.limitType===e.limitType}function dw(t){return`${Rm(xn(t))}|lt:${t.limitType}`}function Os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>lw(s)).join(", ")}]`),gu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ni(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ni(s)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Uo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=wy(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Uo(r),s)||r.endAt&&!function(a,c,u){const d=wy(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Uo(r),s))}(t,e)}function Jk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hw(t){return(e,n)=>{let r=!1;for(const s of Uo(t)){const i=Xk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Xk(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?bi(u,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=new be(W.comparator);function Gn(){return Zk}const fw=new be(W.comparator);function To(...t){let e=fw;for(const n of t)e=e.insert(n.key,n);return e}function mw(t){let e=fw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cs(){return zo()}function pw(){return zo()}function zo(){return new ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const eR=new be(W.comparator),tR=new Fe(W.comparator);function ie(...t){let e=tR;for(const n of t)e=e.add(n);return e}const nR=new Fe(se);function rR(){return nR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function gw(t){return{integerValue:""+t}}function sR(t,e){return Ck(e)?gw(e):Pm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function iR(t,e,n){return t instanceof Lc?function(s,i){const a={fields:{[J_]:{stringValue:Y_},[Z_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cm(i)&&(i=yu(i)),i&&(a.fields[X_]=i),{mapValue:a}}(n,e):t instanceof ga?xw(t,e):t instanceof ya?vw(t,e):function(s,i){const a=yw(s,i),c=Ty(a)+Ty(s.Ae);return Qh(a)&&Qh(s.Ae)?gw(c):Pm(s.serializer,c)}(t,e)}function oR(t,e,n){return t instanceof ga?xw(t,e):t instanceof ya?vw(t,e):n}function yw(t,e){return t instanceof Mc?function(r){return Qh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Lc extends wu{}class ga extends wu{constructor(e){super(),this.elements=e}}function xw(t,e){const n=_w(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class ya extends wu{constructor(e){super(),this.elements=e}}function vw(t,e){let n=_w(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class Mc extends wu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ty(t){return Se(t.integerValue||t.doubleValue)}function _w(t){return km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ga&&s instanceof ga||r instanceof ya&&s instanceof ya?Ei(r.elements,s.elements,En):r instanceof Mc&&s instanceof Mc?En(r.Ae,s.Ae):r instanceof Lc&&s instanceof Lc}(t.transform,e.transform)}class lR{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eu{}function ww(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bw(t.key,vn.none()):new Pa(t.key,t.data,vn.none());{const n=t.data,r=vt.empty();let s=new Fe(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Kr(t.key,r,new jt(s.toArray()),vn.none())}}function cR(t,e,n){t instanceof Pa?function(s,i,a){const c=s.value.clone(),u=jy(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(s,i,a){if(!Wl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=jy(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Ew(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function $o(t,e,n,r){return t instanceof Pa?function(i,a,c,u){if(!Wl(i.precondition,a))return c;const d=i.value.clone(),h=Sy(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kr?function(i,a,c,u){if(!Wl(i.precondition,a))return c;const d=Sy(i.fieldTransforms,u,a),h=a.data;return h.setAll(Ew(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Wl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function uR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yw(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function Iy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ei(r,s,(i,a)=>aR(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pa extends Eu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kr extends Eu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jy(t,e,n){const r=new Map;le(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,oR(a,c,n[s]))}return r}function Sy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,iR(i,a,e))}return r}class bw extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dR extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$o(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$o(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pw();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=ww(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ei(this.mutations,e.mutations,(n,r)=>Iy(n,r))&&Ei(this.baseMutations,e.baseMutations,(n,r)=>Iy(n,r))}}class Dm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return eR}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Dm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,oe;function pR(t){switch(t){case V.OK:return Q(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function Nw(t){if(t===void 0)return Wn("GRPC error has no .code"),V.UNKNOWN;switch(t){case ke.OK:return V.OK;case ke.CANCELLED:return V.CANCELLED;case ke.UNKNOWN:return V.UNKNOWN;case ke.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case ke.INTERNAL:return V.INTERNAL;case ke.UNAVAILABLE:return V.UNAVAILABLE;case ke.UNAUTHENTICATED:return V.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case ke.NOT_FOUND:return V.NOT_FOUND;case ke.ALREADY_EXISTS:return V.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return V.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case ke.ABORTED:return V.ABORTED;case ke.OUT_OF_RANGE:return V.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return V.UNIMPLEMENTED;case ke.DATA_LOSS:return V.DATA_LOSS;default:return Q(39323,{code:t})}}(oe=ke||(ke={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Rr([4294967295,4294967295],0);function Cy(t){const e=gR().encode(t),n=new V_;return n.update(e),new Uint8Array(n.digest())}function ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([s,i],0)]}class Lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Io(`Invalid padding: ${n}`);if(r<0)throw new Io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Io(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Rr.fromNumber(r)));return s.compare(yR)===1&&(s=new Rr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cy(e),[r,s]=ky(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Lm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=Cy(e),[r,s]=ky(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bu(J.min(),s,new be(se),Gn(),ie())}}class Da{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Da(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Tw{constructor(e,n){this.targetId=e,this.Ce=n}}class Iw{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ry{constructor(){this.ve=0,this.Fe=Ay(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q(38017,{changeType:i})}}),new Da(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Ay()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class xR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.He=wl(),this.Je=wl(),this.Ze=new be(se)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Jh(i))if(r===0){const a=new W(i.path);this.et(n,a,lt.newNoDocument(a,J.min()))}else le(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Or(r).toUint8Array()}catch(u){if(u instanceof Q_)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Lm(a,s,i)}catch(u){return wi(u instanceof Io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Jh(c.target)){const u=new W(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,lt.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}});let r=ie();this.Je.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new bu(e,n,this.Ze,this.je,r);return this.je=Gn(),this.He=wl(),this.Je=wl(),this.Ze=new be(se),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ry,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Fe(se),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Fe(se),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ry),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wl(){return new be(W.comparator)}function Ay(){return new be(W.comparator)}const vR={asc:"ASCENDING",desc:"DESCENDING"},_R={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wR={and:"AND",or:"OR"};class ER{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zh(t,e){return t.useProto3Json||gu(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bR(t,e){return Vc(t,e.toTimestamp())}function _n(t){return le(!!t,49232),J.fromTimestamp(function(n){const r=Vr(n);return new he(r.seconds,r.nanos)}(t))}function Mm(t,e){return ef(t,e).canonicalString()}function ef(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Sw(t){const e=de.fromString(t);return le(Pw(e),10190,{key:e.toString()}),e}function tf(t,e){return Mm(t.databaseId,e.path)}function Fd(t,e){const n=Sw(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(kw(n))}function Cw(t,e){return Mm(t.databaseId,e)}function NR(t){const e=Sw(t);return e.length===4?de.emptyPath():kw(e)}function nf(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kw(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Py(t,e,n){return{name:tf(t,e),fields:n.value.mapValue.fields}}function TR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(le(h===void 0||typeof h=="string",58123),et.fromBase64String(h||"")):(le(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const h=d.code===void 0?V.UNKNOWN:Nw(d.code);return new $(h,d.message||"")}(a);n=new Iw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fd(t,r.document.name),i=_n(r.document.updateTime),a=r.document.createTime?_n(r.document.createTime):J.min(),c=new vt({mapValue:{fields:r.document.fields}}),u=lt.newFoundDocument(s,i,a,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Gl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fd(t,r.document),i=r.readTime?_n(r.readTime):J.min(),a=lt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Gl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fd(t,r.document),i=r.removedTargetIds||[];n=new Gl([],i,s,null)}else{if(!("filter"in e))return Q(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new mR(s,i),c=r.targetId;n=new Tw(c,a)}}return n}function IR(t,e){let n;if(e instanceof Pa)n={update:Py(t,e.key,e.value)};else if(e instanceof bw)n={delete:tf(t,e.key)};else if(e instanceof Kr)n={update:Py(t,e.key,e.data),updateMask:LR(e.fieldMask)};else{if(!(e instanceof dR))return Q(16599,{dt:e.type});n={verify:tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Lc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ga)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ya)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw Q(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q(27497)}(t,e.precondition)),n}function jR(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?_n(s.updateTime):_n(i);return a.isEqual(J.min())&&(a=_n(i)),new lR(a,s.transformResults||[])}(n,e))):[]}function SR(t,e){return{documents:[Cw(t,e.path)]}}function CR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cw(t,s);const i=function(d){if(d.length!==0)return Aw(sn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:Fs(g.field),direction:AR(g.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Zh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function kR(t){let e=NR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const g=Rw(m);return g instanceof sn&&ow(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(b){return new pa(Us(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,gu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Pc(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Pc(x,g)}(n.endAt)),Gk(e,s,a,i,c,"F",u,d)}function RR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Us(n.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Us(n.unaryFilter.field);return Ae.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Us(n.unaryFilter.field);return Ae.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Us(n.unaryFilter.field);return Ae.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ae.create(Us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(r=>Rw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function AR(t){return vR[t]}function PR(t){return _R[t]}function DR(t){return wR[t]}function Fs(t){return{fieldPath:t.canonicalString()}}function Us(t){return Ye.fromServerFormat(t.fieldPath)}function Aw(t){return t instanceof Ae?function(n){if(n.op==="=="){if(_y(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_y(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:PR(n.op),value:n.value}}}(t):t instanceof sn?function(n){const r=n.getFilters().map(s=>Aw(s));return r.length===1?r[0]:{compositeFilter:{op:DR(n.op),filters:r}}}(t):Q(54877,{filter:t})}function LR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Pw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Dw(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,i=J.min(),a=J.min(),c=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.yt=e}}function VR(t){const e=kR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.Sn=new FR}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Mr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class FR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Fe(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Fe(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lw=41943040;class yt{static withCacheSize(e){return new yt(e,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(Lw,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ti(0)}static ar(){return new Ti(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="LruGarbageCollector",UR=1048576;function My([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class zR{constructor(e){this.Pr=e,this.buffer=new Fe(My),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();My(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $R{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(Ly,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?H(Ly,"Ignoring IndexedDB error during garbage collection: ",n):await Oi(n)}await this.Ar(3e5)})}}class BR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(pu.ce);const r=new zR(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Dy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Vs()<=re.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function HR(t,e){return new BR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.changes=new ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&$o(r.mutation,s,jt.empty(),he.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=To();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Gn();const a=zo(),c=function(){return zo()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Kr)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),$o(h.mutation,d,h.mutation.getFieldMask(),he.now())):a.set(d.key,jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>c.set(d,new WR(h,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=zo();let s=new be((a,c)=>a-c),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||jt.empty();h=c.applyToLocalView(d,h),r.set(u,h);const m=(s.get(c.batchId)||ie()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=pw();h.forEach(g=>{if(!i.has(g)){const x=ww(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return Kk(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(cs());let c=da,u=i;return a.next(d=>O.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(h=>({batchId:c,changes:mw(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=To();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=To();return this.indexManager.getCollectionParents(e,i).next(c=>O.forEach(c,u=>{const d=function(m,g){return new Ui(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,lt.newInvalidDocument(h)))});let c=To();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&$o(h.mutation,d,jt.empty(),he.now()),_u(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:VR(s.bundledQuery),readTime:_n(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.overlays=new be(W.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cs();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=cs(),i=n.length+1,a=new W(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=cs(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=cs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=s)););return O.resolve(c)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fR(n,r));let i=this.Lr.get(n);i===void 0&&(i=ie(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.kr=new Fe($e.Kr),this.qr=new Fe($e.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new $e(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new W(new de([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new W(new de([])),r=new $e(n,e),s=new $e(n,e+1);let i=ie();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new $e(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return W.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Fe($e.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hR(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Jr=this.Jr.add(new $e(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Sm:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const c=this.Zr(a.Hr);i.push(c)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(se);return n.forEach(s=>{const i=new $e(s,0),a=new $e(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],c=>{r=r.add(c.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new $e(new W(i),0);let c=new Fe(se);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Hr)),!0)},a),O.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new $e(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.ti=e,this.docs=function(){return new be(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():lt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const a=n.path,c=new W(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Tk(Nk(h),r)<=0||(s.has(h.key)||_u(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZR(this)}getSize(e){return O.resolve(this.size)}}class ZR extends qR{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.persistence=e,this.ri=new ks(n=>Rm(n),Am),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ii=0,this.si=new Vm,this.targetCount=0,this.oi=Ti._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ti(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this._i={},this.overlays={},this.ai=new pu(0),this.ui=!1,this.ui=!0,this.ci=new YR,this.referenceDelegate=e(this),this.li=new eA(this),this.indexManager=new OR,this.remoteDocumentCache=function(s){return new XR(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new MR(n),this.Pi=new KR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new JR(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new tA(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class tA extends jk{constructor(e){super(),this.currentSequenceNumber=e}}class Om{constructor(e){this.persistence=e,this.Ri=new Vm,this.Ai=null}static Vi(e){return new Om(e)}get di(){if(this.Ai)return this.Ai;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const s=W.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Oc{constructor(e,n){this.persistence=e,this.fi=new ks(r=>kk(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=HR(this,n)}static Vi(e,n){return new Oc(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?O.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,n).next(c=>{c||(r++,i.removeEntry(a,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hl(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return PI()?8:Sk(ut())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new nA;return this.ys(e,n,a).next(c=>{if(i.result=c,this.As)return this.ws(e,n,a,c.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Vs()<=re.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Vs()<=re.DEBUG&&H("QueryEngine","Query:",Os(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Vs()<=re.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):O.resolve())}gs(e,n){if(Ny(n))return O.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dc(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ie(...i);return this.fs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ss(n,d,a,u.readTime)?this.gs(e,Dc(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return Ny(n)||s.isEqual(J.min())?O.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?O.resolve(null):(Vs()<=re.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Os(n)),this.Ds(e,a,n,bk(s,da)).next(c=>c))})}bs(e,n){let r=new Fe(hw(e));return n.forEach((s,i)=>{_u(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Vs()<=re.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Os(n)),this.fs.getDocumentsMatchingQuery(e,n,Mr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="LocalStore",sA=3e8;class iA{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new be(se),this.Fs=new ks(i=>Rm(i),Am),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function oA(t,e,n,r){return new iA(t,e,n,r)}async function Vw(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ie();for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:c}))})})}function aA(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,g=m.keys();let x=O.resolve();return g.forEach(b=>{x=x.next(()=>h.getEntry(u,b)).next(I=>{const A=d.docVersions.get(b);le(A!==null,48541),I.version.compareTo(A)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),h.addEntry(I)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ow(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function lA(t,e){const n=X(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const c=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;c.push(n.li.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(et.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(m,x),function(I,A,E){return I.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=sA?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,x,h)&&c.push(n.li.updateTargetData(i,x))});let u=Gn(),d=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),c.push(cA(i,a,e.documentUpdates).next(h=>{u=h.Bs,d=h.Ls})),!r.isEqual(J.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(h)}return O.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function cA(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Gn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):H(Um,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function uA(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Sm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dA(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next(a=>(s=new vr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function rf(t,e,n){const r=X(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Fi(a))throw a;H(Um,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Vy(t,e,n){const r=X(t);let s=J.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const m=X(u),g=m.Fs.get(h);return g!==void 0?O.resolve(m.vs.get(g)):m.li.getTargetData(d,h)}(r,a,xn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?i:ie())).next(c=>(hA(r,Jk(e),c),{documents:c,ks:i})))}function hA(t,e,n){let r=t.Ms.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Oy{constructor(){this.activeTargetIds=rR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fA{constructor(){this.vo=new Oy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="ConnectivityMonitor";class Uy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(Fy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(Fy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=null;function sf(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="RestConnection",pA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class gA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Rc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=sf(),c=this.Qo(e,n.toUriEncodedString());H(Ud,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(c),h=Di(d);return this.zo(e,c,u,r,h).then(m=>(H(Ud,`Received RPC '${e}' ${a}: `,m),m),m=>{throw wi(Ud,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=pA[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection",go=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class ci extends gA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ci.c_){const e=z_();go(e,U_.STAT_EVENT,n=>{n.stat===Wh.PROXY?H(st,"STAT_EVENT: detected buffering proxy"):n.stat===Wh.NOPROXY&&H(st,"STAT_EVENT: detected no buffering proxy")}),ci.c_=!0}}zo(e,n,r,s,i){const a=sf();return new Promise((c,u)=>{const d=new O_;d.setWithCredentials(!0),d.listenOnce(F_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bl.NO_ERROR:const m=d.getResponseJson();H(st,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case Bl.TIMEOUT:H(st,`RPC '${e}' ${a} timed out`),u(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Bl.HTTP_ERROR:const g=d.getStatus();if(H(st,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const I=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(b.status);u(new $(I,b.message))}else u(new $(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(V.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(st,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);H(st,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=sf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(st,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=a.createWebChannel(d,c);this.I_(h);let m=!1,g=!1;const x=new yA({Ho:b=>{g?H(st,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(H(st,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),H(st,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Jo:()=>h.close()});return go(h,No.EventType.OPEN,()=>{g||(H(st,`RPC '${e}' stream ${s} transport opened.`),x.i_())}),go(h,No.EventType.CLOSE,()=>{g||(g=!0,H(st,`RPC '${e}' stream ${s} transport closed`),x.o_(),this.E_(h))}),go(h,No.EventType.ERROR,b=>{g||(g=!0,wi(st,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.o_(new $(V.UNAVAILABLE,"The operation could not be completed")))}),go(h,No.EventType.MESSAGE,b=>{var I;if(!g){const A=b.data[0];le(!!A,16349);const E=A,_=(E==null?void 0:E.error)||((I=E[0])==null?void 0:I.error);if(_){H(st,`RPC '${e}' stream ${s} received error:`,_);const w=_.status;let D=function(N){const v=ke[N];if(v!==void 0)return Nw(v)}(w),M=_.message;D===void 0&&(D=V.INTERNAL,M="Unknown error status: "+w+" with message "+_.message),g=!0,x.o_(new $(D,M)),h.close()}else H(st,`RPC '${e}' stream ${s} received:`,A),x.__(A)}}),ci.u_(),setTimeout(()=>{x.s_()},0),x}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return $_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){return new ci(t)}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){return new ER(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci.c_=!1;class Fw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="PersistentStream";class Uw{constructor(e,n,r,s,i,a,c,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vA extends Uw{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=TR(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?_n(a.readTime):J.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=nf(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Jh(u)?{documents:SR(i,u)}:{query:CR(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=jw(i,a.resumeToken);const d=Zh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(J.min())>0){c.readTime=Vc(i,a.snapshotVersion.toTimestamp());const d=Zh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=RR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=nf(this.serializer),n.removeTarget=e,this.K_(n)}}class _A extends Uw{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jR(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=nf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IR(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{}class EA extends wA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,ef(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.jo(e,ef(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(V.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function bA(t,e,n,r){return new EA(t,e,n,r)}class NA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class TA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Rs(this)&&(H(Ns,"Restarting streams for network reachability change."),await async function(u){const d=X(u);d.Ea.add(4),await La(d),d.Va.set("Unknown"),d.Ea.delete(4),await Tu(d)}(this))})}),this.Va=new NA(r,s)}}async function Tu(t){if(Rs(t))for(const e of t.Ra)await e(!0)}async function La(t){for(const e of t.Ra)await e(!1)}function zw(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hm(n)?Bm(n):zi(n).O_()&&$m(n,e))}function zm(t,e){const n=X(t),r=zi(n);n.Ia.delete(e),r.O_()&&$w(n,e),n.Ia.size===0&&(r.O_()?r.L_():Rs(n)&&n.Va.set("Unknown"))}function $m(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zi(t).Z_(e)}function $w(t,e){t.da.$e(e),zi(t).X_(e)}function Bm(t){t.da=new xR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zi(t).start(),t.Va.ua()}function Hm(t){return Rs(t)&&!zi(t).x_()&&t.Ia.size>0}function Rs(t){return X(t).Ea.size===0}function Bw(t){t.da=void 0}async function IA(t){t.Va.set("Online")}async function jA(t){t.Ia.forEach((e,n)=>{$m(t,e)})}async function SA(t,e){Bw(t),Hm(t)?(t.Va.ha(e),Bm(t)):t.Va.set("Unknown")}async function CA(t,e,n){if(t.Va.set("Online"),e instanceof Iw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.da.removeTarget(c))}(t,e)}catch(r){H(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(t,r)}else if(e instanceof Gl?t.da.Xe(e):e instanceof Tw?t.da.st(e):t.da.tt(e),!n.isEqual(J.min()))try{const r=await Ow(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.da.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),$w(i,u);const m=new vr(h.target,u,d,h.sequenceNumber);$m(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H(Ns,"Failed to raise snapshot:",r),await Fc(t,r)}}async function Fc(t,e,n){if(!Fi(e))throw e;t.Ea.add(1),await La(t),t.Va.set("Offline"),n||(n=()=>Ow(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ns,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tu(t)})}function Hw(t,e){return e().catch(n=>Fc(t,n,e))}async function Iu(t){const e=X(t),n=Ur(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sm;for(;kA(e);)try{const s=await uA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,RA(e,s)}catch(s){await Fc(e,s)}qw(e)&&Ww(e)}function kA(t){return Rs(t)&&t.Ta.length<10}function RA(t,e){t.Ta.push(e);const n=Ur(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function qw(t){return Rs(t)&&!Ur(t).x_()&&t.Ta.length>0}function Ww(t){Ur(t).start()}async function AA(t){Ur(t).ra()}async function PA(t){const e=Ur(t);for(const n of t.Ta)e.ea(n.mutations)}async function DA(t,e,n){const r=t.Ta.shift(),s=Dm.from(r,e,n);await Hw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Iu(t)}async function LA(t,e){e&&Ur(t).Y_&&await async function(r,s){if(function(a){return pR(a)&&a!==V.ABORTED}(s.code)){const i=r.Ta.shift();Ur(r).B_(),await Hw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Iu(r)}}(t,e),qw(t)&&Ww(t)}async function $y(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H(Ns,"RemoteStore received new credentials");const r=Rs(n);n.Ea.add(3),await La(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tu(n)}async function MA(t,e){const n=X(t);e?(n.Ea.delete(2),await Tu(n)):e||(n.Ea.add(2),await La(n),n.Va.set("Unknown"))}function zi(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new vA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:IA.bind(null,t),Yo:jA.bind(null,t),t_:SA.bind(null,t),J_:CA.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Hm(t)?Bm(t):t.Va.set("Unknown")):(await t.ma.stop(),Bw(t))})),t.ma}function Ur(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new _A(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:AA.bind(null,t),t_:LA.bind(null,t),ta:PA.bind(null,t),na:DA.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Iu(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Ns,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new qm(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),Fi(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{static emptySet(e){return new ui(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ui)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ui;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.ga=new be(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ii{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ii(e,n,ui.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class OA{constructor(){this.queries=Hy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=Hy(),i.forEach((a,c)=>{for(const u of c.ba)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function Hy(){return new ks(t=>dw(t),vu)}async function Gm(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new VA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Wm(a,`Initialization of query '${Os(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Qm(n)}async function Km(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FA(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.ba)c.Fa(s)&&(r=!0);a.wa=s}}r&&Qm(n)}function UA(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Qm(t){t.Ca.forEach(e=>{e.next()})}var of,qy;(qy=of||(of={})).Ma="default",qy.Cache="cache";class Ym{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.key=e}}class Kw{constructor(e){this.key=e}}class zA{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ie(),this.mutatedKeys=ie(),this.eu=hw(e),this.tu=new ui(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new By,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),x=_u(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?b!==I&&(r.track({type:3,doc:x}),A=!0):this.su(g,x)||(r.track({type:2,doc:x}),A=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!g&&x?(r.track({type:0,doc:x}),A=!0):g&&!x&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(c=!0)),A&&(x?(a=a.add(x),i=I?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(x,b){const I=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Vt:A})}};return I(x)-I(b)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new Ii(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new By,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Kw(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Gw(r))}),n}cu(e){this.Za=e.ks,this.Ya=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ii.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Jm="SyncEngine";class $A{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BA{constructor(e){this.key=e,this.hu=!1}}class HA{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ks(c=>dw(c),vu),this.Iu=new Map,this.Eu=new Set,this.Ru=new be(W.comparator),this.Au=new Map,this.Vu=new Vm,this.du={},this.mu=new Map,this.fu=Ti.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qA(t,e,n=!0){const r=eE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Qw(r,e,n,!0),s}async function WA(t,e){const n=eE(t);await Qw(n,e,!0,!1)}async function Qw(t,e,n,r){const s=await dA(t.localStore,xn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await GA(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&zw(t.remoteStore,s),c}async function GA(t,e,n,r,s){t.pu=(m,g,x)=>async function(I,A,E,_){let w=A.view.ru(E);w.Ss&&(w=await Vy(I.localStore,A.query,!1).then(({documents:N})=>A.view.ru(N,w)));const D=_&&_.targetChanges.get(A.targetId),M=_&&_.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(w,I.isPrimaryClient,D,M);return Gy(I,A.targetId,F.au),F.snapshot}(t,m,g,x);const i=await Vy(t.localStore,e,!0),a=new zA(e,i.ks),c=a.ru(i.documents),u=Da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Gy(t,n,d.au);const h=new $A(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function KA(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!vu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zm(r.remoteStore,s.targetId),af(r,s.targetId)}).catch(Oi)):(af(r,s.targetId),await rf(r.localStore,s.targetId,!0))}async function QA(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zm(n.remoteStore,r.targetId))}async function YA(t,e,n){const r=rP(t);try{const s=await function(a,c){const u=X(a),d=he.now(),h=c.reduce((x,b)=>x.add(b.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let b=Gn(),I=ie();return u.xs.getEntries(x,h).next(A=>{b=A,b.forEach((E,_)=>{_.isValidDocument()||(I=I.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,b)).next(A=>{m=A;const E=[];for(const _ of c){const w=uR(_,m.get(_.key).overlayedDocument);w!=null&&E.push(new Kr(_.key,w,rw(w.value.mapValue),vn.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,E,c)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(x,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:mw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.du[a.currentUser.toKey()];d||(d=new be(se)),d=d.insert(c,u),a.du[a.currentUser.toKey()]=d}(r,s.batchId,n),await Ma(r,s.changes),await Iu(r.remoteStore)}catch(s){const i=Wm(s,"Failed to persist write");n.reject(i)}}async function Yw(t,e){const n=X(t);try{const r=await lA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?le(a.hu,14607):s.removedDocuments.size>0&&(le(a.hu,42227),a.hu=!1))}),await Ma(n,r,e)}catch(r){await Oi(r)}}function Wy(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=X(a);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const g of m.ba)g.va(c)&&(d=!0)}),d&&Qm(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JA(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new be(W.comparator);a=a.insert(i,lt.newNoDocument(i,J.min()));const c=ie().add(i),u=new bu(J.min(),new Map,new be(se),a,c);await Yw(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),Xm(r)}else await rf(r.localStore,e,!1).then(()=>af(r,e,n)).catch(Oi)}async function XA(t,e){const n=X(t),r=e.batch.batchId;try{const s=await aA(n.localStore,e);Xw(n,r,null),Jw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ma(n,s)}catch(s){await Oi(s)}}async function ZA(t,e,n){const r=X(t);try{const s=await function(a,c){const u=X(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(le(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Xw(r,e,n),Jw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ma(r,s)}catch(s){await Oi(s)}}function Jw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Xw(t,e,n){const r=X(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function af(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||Zw(t,r)})}function Zw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(zm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Xm(t))}function Gy(t,e,n){for(const r of n)r instanceof Gw?(t.Vu.addReference(r.key,e),eP(t,r)):r instanceof Kw?(H(Jm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||Zw(t,r.key)):Q(19791,{wu:r})}function eP(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Jm,"New document in limbo: "+n),t.Eu.add(r),Xm(t))}function Xm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(de.fromString(e)),r=t.fu.next();t.Au.set(r,new BA(n)),t.Ru=t.Ru.insert(n,r),zw(t.remoteStore,new vr(xn(xu(n.path)),r,"TargetPurposeLimboResolution",pu.ce))}}async function Ma(t,e,n){const r=X(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Fm.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(u,d){const h=X(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(d,g=>O.forEach(g.Ts,x=>h.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>O.forEach(g.Is,x=>h.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Fi(m))throw m;H(Um,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=h.vs.get(g),b=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(b);h.vs=h.vs.insert(g,I)}}}(r.localStore,i))}async function tP(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H(Jm,"User change. New user:",e.toKey());const r=await Vw(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new $(V.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ma(n,r.Ns)}}function nP(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let s=ie();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function eE(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JA.bind(null,e),e.Pu.J_=FA.bind(null,e.eventManager),e.Pu.yu=UA.bind(null,e.eventManager),e}function rP(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZA.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oA(this.persistence,new rA,e.initialUser,this.serializer)}Cu(e){return new Mw(Om.Vi,this.serializer)}Du(e){return new fA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class sP extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){le(this.persistence.referenceDelegate instanceof Oc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $R(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yt.withCacheSize(this.cacheSizeBytes):yt.DEFAULT;return new Mw(r=>Oc.Vi(r,n),this.serializer)}}class lf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tP.bind(null,this.syncEngine),await MA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OA}()}createDatastore(e){const n=Nu(e.databaseInfo.databaseId),r=xA(e.databaseInfo);return bA(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new TA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Wy(this.syncEngine,n,0),function(){return Uy.v()?new Uy:new mA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,h){const m=new HA(s,i,a,c,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H(Ns,"RemoteStore shutting down."),i.Ea.add(5),await La(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class iP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ot.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(zr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(zr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $d(t,e){t.asyncQueue.verifyOperationInProgress(),H(zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Vw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ky(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oP(t);H(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$y(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$y(e.remoteStore,s)),t._onlineComponents=e}async function oP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(zr,"Using user provided OfflineComponentProvider");try{await $d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;wi("Error using user provided cache. Falling back to memory cache: "+n),await $d(t,new Uc)}}else H(zr,"Using default OfflineComponentProvider"),await $d(t,new sP(void 0));return t._offlineComponents}async function tE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(zr,"Using user provided OnlineComponentProvider"),await Ky(t,t._uninitializedComponentsProvider._online)):(H(zr,"Using default OnlineComponentProvider"),await Ky(t,new lf))),t._onlineComponents}function aP(t){return tE(t).then(e=>e.syncEngine)}async function zc(t){const e=await tE(t),n=e.eventManager;return n.onListen=qA.bind(null,e.syncEngine),n.onUnlisten=KA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QA.bind(null,e.syncEngine),n}function lP(t,e,n,r){const s=new Zm(r),i=new Ym(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Gm(await zc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Km(await zc(t),i))}}function cP(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new Zm({next:g=>{h.Nu(),a.enqueueAndForget(()=>Km(i,m));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new $(V.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Ym(xu(c.path),h,{includeMetadataChanges:!0,Ka:!0});return Gm(i,m)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}function uP(t,e,n={}){const r=new Ln;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const h=new Zm({next:g=>{h.Nu(),a.enqueueAndForget(()=>Km(i,m)),g.fromCache&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Ym(c,h,{includeMetadataChanges:!0,Ka:!0});return Gm(i,m)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}function dP(t,e){const n=new Ln;return t.asyncQueue.enqueueAndForget(async()=>YA(await aP(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="ComponentProvider",Qy=new Map;function fP(t,e,n,r,s){return new Pk(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,nE(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="firestore.googleapis.com",Yy=!0;class Jy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rE,this.ssl=Yy}else this.host=e.host,this.ssl=e.ssl??Yy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UR)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ek("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ju{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hk;switch(r.type){case"firstParty":return new gk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qy.get(n);r&&(H(hP,"Removing Datastore"),Qy.delete(n),r.terminate())}(this),Promise.resolve()}}function mP(t,e,n,r={}){var d;t=Ut(t,ju);const s=Di(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Q1(`https://${c}`),Y1("Firestore",!0)),i.host!==rE&&i.host!==c&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!vs(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=ot.MOCK_USER;else{h=NI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ot(g)}t._authCredentials=new fk(new H_(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xn(this.firestore,e,this._query)}}class Ie{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ie(this.firestore,e,this._key)}toJSON(){return{type:Ie._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Aa(n,Ie._jsonSchema))return new Ie(e,r||null,new W(de.fromString(n.referencePath)))}}Ie._jsonSchemaVersion="firestore/documentReference/1.0",Ie._jsonSchema={type:Pe("string",Ie._jsonSchemaVersion),referencePath:Pe("string")};class Ar extends Xn{constructor(e,n,r){super(e,n,xu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ie(this.firestore,null,new W(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Yt(t,e,...n){if(t=Ue(t),q_("collection","path",e),t instanceof ju){const r=de.fromString(e,...n);return uy(r),new Ar(t,null,r)}{if(!(t instanceof Ie||t instanceof Ar))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return uy(r),new Ar(t.firestore,null,r)}}function di(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=jm.newId()),q_("doc","path",e),t instanceof ju){const r=de.fromString(e,...n);return cy(r),new Ie(t,null,new W(r))}{if(!(t instanceof Ie||t instanceof Ar))throw new $(V.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return cy(r),new Ie(t.firestore,t instanceof Ar?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="AsyncQueue";class Zy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fw(this,"async_queue_retry"),this._c=()=>{const r=zd();r&&H(Xy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ln;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Fi(e))throw e;H(Xy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Wn("INTERNAL UNHANDLED ERROR: ",ex(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=qm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Q(47125,{Pc:ex(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ex(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ts extends ju{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zy(e),this._firestoreClient=void 0,await e}}}function pP(t,e){const n=typeof t=="object"?t:e_(),r=typeof t=="string"?t:Rc,s=ym(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=EI("firestore");i&&mP(s,...i)}return s}function Su(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gP(t),t._firestoreClient}function gP(t){var r,s,i,a;const e=t._freezeSettings(),n=fP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new iP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(et.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Aa(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Pe("string",Vt._jsonSchemaVersion),bytes:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(Aa(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Pe("string",wn._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Aa(e,tn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new tn(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tn._jsonSchemaVersion="firestore/vectorValue/1.0",tn._jsonSchema={type:Pe("string",tn._jsonSchemaVersion),vectorValues:Pe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=/^__.*__$/;class xP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pa(e,this.data,n,this.fieldTransforms)}}class sE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{dataSource:t})}}class np{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new np({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $c(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(iE(this.dataSource)&&yP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class vP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nu(e)}createContext(e,n,r,s=!1){return new np({dataSource:e,methodName:n,targetDoc:r,path:Ye.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rp(t){const e=t._freezeSettings(),n=Nu(t._databaseId);return new vP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _P(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);sp("Data must be an object, but it was:",a,r);const c=oE(r,a);let u,d;if(i.merge)u=new jt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=Is(e,m,n);if(!a.contains(g))throw new $(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);cE(h,g)||h.push(g)}u=new jt(h),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new xP(new vt(c),u,d)}class Cu extends tp{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cu}}function wP(t,e,n,r){const s=t.createContext(1,e,n);sp("Data must be an object, but it was:",s,r);const i=[],a=vt.empty();Gr(r,(u,d)=>{const h=lE(e,u,n);d=Ue(d);const m=s.childContextForFieldPath(h);if(d instanceof Cu)i.push(h);else{const g=Va(d,m);g!=null&&(i.push(h),a.set(h,g))}});const c=new jt(i);return new sE(a,c,s.fieldTransforms)}function EP(t,e,n,r,s,i){const a=t.createContext(1,e,n),c=[Is(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Is(e,i[g])),u.push(i[g+1]);const d=[],h=vt.empty();for(let g=c.length-1;g>=0;--g)if(!cE(d,c[g])){const x=c[g];let b=u[g];b=Ue(b);const I=a.childContextForFieldPath(x);if(b instanceof Cu)d.push(x);else{const A=Va(b,I);A!=null&&(d.push(x),h.set(x,A))}}const m=new jt(d);return new sE(h,m,a.fieldTransforms)}function bP(t,e,n,r=!1){return Va(n,t.createContext(r?4:3,e))}function Va(t,e){if(aE(t=Ue(t)))return sp("Unsupported field value:",e,t),oE(t,e);if(t instanceof tp)return function(r,s){if(!iE(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Va(c,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=he.fromDate(r);return{timestampValue:Vc(s.serializer,i)}}if(r instanceof he){const i=new he(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vc(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:jw(s.serializer,r._byteString)};if(r instanceof Ie){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof tn)return function(a,c){const u=a instanceof tn?a.toArray():a;return{mapValue:{fields:{[ew]:{stringValue:nw},[Ac]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return Pm(c.serializer,h)})}}}}}}(r,s);if(Dw(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${mu(r)}`)}(t,e)}function oE(t,e){const n={};return K_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(r,s)=>{const i=Va(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof he||t instanceof wn||t instanceof Vt||t instanceof Ie||t instanceof tp||t instanceof tn||Dw(t))}function sp(t,e,n){if(!aE(n)||!W_(n)){const r=mu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Is(t,e,n){if((e=Ue(e))instanceof ep)return e._internalPath;if(typeof e=="string")return lE(t,e);throw $c("Field path arguments must be of type string or ",t,!1,void 0,n)}const NP=new RegExp("[~\\*/\\[\\]]");function lE(t,e,n){if(e.search(NP)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ep(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $c(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,c+t+u)}function cE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ac].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Se(a.doubleValue));return new tn(n)}convertGeoPoint(e){return new wn(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ha(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new he(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);le(Pw(r),9688,{name:e});const s=new fa(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends TP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ie(this.firestore,null,n)}}const tx="@firebase/firestore",nx="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ie(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Is("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IP extends uE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class ap extends op{}function hi(t,e,...n){let r=[];e instanceof op&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof lp).length,c=i.filter(u=>u instanceof ku).length;if(a>1||a>0&&c>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ku extends ap{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ku(e,n,r)}_apply(e){const n=this._parse(e);return hE(e._query,n),new Xn(e.firestore,e.converter,Xh(e._query,n))}_parse(e){const n=rp(e.firestore);return function(i,a,c,u,d,h,m){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ix(m,h);const b=[];for(const I of m)b.push(sx(u,i,I));g={arrayValue:{values:b}}}else g=sx(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ix(m,h),g=bP(c,a,m,h==="in"||h==="not-in");return Ae.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jP(t,e,n){const r=e,s=Is("where",t);return ku._create(s,r,n)}class lp extends op{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)hE(a,u),a=Xh(a,u)}(e._query,n),new Xn(e.firestore,e.converter,Xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends ap{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(i,a)}(e._query,this._field,this._direction);return new Xn(e.firestore,e.converter,Yk(e._query,n))}}function Bo(t,e="asc"){const n=e,r=Is("orderBy",t);return cp._create(r,n)}class up extends ap{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new up(e,n,r)}_apply(e){return new Xn(e.firestore,e.converter,Dc(e._query,this._limit,this._limitType))}}function Kl(t){return up._create("limit",t,"F")}function sx(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uw(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!W.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xy(t,new W(r))}if(n instanceof Ie)return xy(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mu(n)}.`)}function ix(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hE(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function SP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hs extends uE{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Is("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",hs._jsonSchema={type:Pe("string",hs._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class Ql extends hs{data(e={}){return super.data(e)}}class fs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new jo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ql(this._firestore,this._userDataWriter,r.key,r,new jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Ql(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ql(s._firestore,s._userDataWriter,c.doc.key,c.doc,new jo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:CP(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs._jsonSchemaVersion="firestore/querySnapshot/1.0",fs._jsonSchema={type:Pe("string",fs._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){t=Ut(t,Ie);const e=Ut(t.firestore,Ts),n=Su(e);return cP(n,t._key).then(r=>mE(e,t,r))}function Jt(t){t=Ut(t,Xn);const e=Ut(t.firestore,Ts),n=Su(e),r=new ip(e);return dE(t._query),uP(n,t._query).then(s=>new fs(e,r,t,s))}function RP(t,e,n){t=Ut(t,Ie);const r=Ut(t.firestore,Ts),s=SP(t.converter,e),i=rp(r);return fE(r,[_P(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vn.none())])}function cf(t,e,n,...r){t=Ut(t,Ie);const s=Ut(t.firestore,Ts),i=rp(s);let a;return a=typeof(e=Ue(e))=="string"||e instanceof ep?EP(i,"updateDoc",t._key,e,n,r):wP(i,"updateDoc",t._key,e),fE(s,[a.toMutation(t._key,vn.exists(!0))])}function AP(t,...e){var d,h,m;t=Ue(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rx(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(rx(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(h=g.error)==null?void 0:h.bind(g),e[r+2]=(m=g.complete)==null?void 0:m.bind(g)}let i,a,c;if(t instanceof Ie)a=Ut(t.firestore,Ts),c=xu(t._key.path),i={next:g=>{e[r]&&e[r](mE(a,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Ut(t,Xn);a=Ut(g.firestore,Ts),c=g._query;const x=new ip(a);i={next:b=>{e[r]&&e[r](new fs(a,x,g,b))},error:e[r+1],complete:e[r+2]},dE(t._query)}const u=Su(a);return lP(u,c,s,i)}function fE(t,e){const n=Su(t);return dP(n,e)}function mE(t,e,n){const r=n.docs.get(e._key),s=new ip(t);return new hs(t,s,e._key,r,new jo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){dk(Li),_i(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Ts(new mk(r.getProvider("auth-internal")),new yk(a,r.getProvider("app-check-internal")),Dk(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),kr(tx,nx,e),kr(tx,nx,"esm2020")})();var PP="firebase",DP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(PP,DP,"app");const LP={apiKey:"AIzaSyCeciuTykJTnWZvTHVqdSMdNg8n7u0jHQY",authDomain:"fahis-doctor-portal.firebaseapp.com",projectId:"fahis-doctor-portal",storageBucket:"fahis-doctor-portal.firebasestorage.app",messagingSenderId:"604602847104",appId:"1:604602847104:web:1ffb35858c2d7bcb393b65",measurementId:"G-57BK5SKSN6"},pE=Z1(LP),yo=ck(pE),Qe=pP(pE),gE=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(null),[s,i]=k.useState(null);return k.useEffect(()=>{let d=null;const h=XS(yo,m=>{if(d&&(d(),d=null),!m){r(null),e(!1);return}const g=di(Qe,"doctors",m.uid);d=AP(g,x=>{if(!x.exists()){r(null),e(!1);return}const b={id:x.id,...x.data()};b.status==="Active"?(r(b),e(!0)):(console.warn("Doctor profile not active"),r(null),e(!1))},x=>{console.error("Doctor snapshot error:",x),r(null),e(!1)})});return()=>{h(),d&&d()}},[]),{isAuthenticated:t,currentDoctor:n,authError:s,login:async(d,h)=>{i(null);try{const g=(await QS(yo,d,h)).user,x=di(Qe,"doctors",g.uid),b=await kP(x);if(!b.exists())return i("Doctor profile not found"),!1;const I=b.data();return I.status!=="Active"?(i("No active profile found. Please contact admin."),await Y0(yo),!1):(r(I),e(!0),!0)}catch(m){return console.error("Login error:",m),i(m instanceof Error?m.message:"Login failed. Please try again."),!1}},register:async(d,h)=>{i(null);try{const g=(await KS(yo,d.email,h)).user,x={...d,id:g.uid,joinedDate:new Date().toISOString(),status:"Active"};return await RP(di(Qe,"doctors",g.uid),x),r(x),e(!0),console.log("Registration successful:",x),!0}catch(m){return console.error("Registration error:",m),i(m instanceof Error?m.message:"Registration failed. Please try again."),!1}},logout:async()=>{await Y0(yo),r(null),e(!1),i(null)}}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},h)=>k.createElement("svg",{ref:h,...MP,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${VP(t)}`,c].join(" "),...d},[...e.map(([m,g])=>k.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=G("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=G("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=G("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=G("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=G("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=G("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=G("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=G("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=G("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=G("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=G("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=G("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=G("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=G("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=G("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=G("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=G("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),d4=({type:t,onClose:e})=>{const n=()=>{switch(t){case"privacy":return{title:"Privacy Policy for Medical Professionals",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Ge,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Last Updated: January 2025 | Version 2.1"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"Data Protection & Medical Privacy"}),o.jsx("p",{className:"mb-4",children:"FAHM BioTech is committed to protecting the privacy and confidentiality of all medical professionals using the Fahis thermography platform. This policy outlines our comprehensive approach to data protection in compliance with Saudi Personal Data Protection Law (PDPL)."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Information We Collect:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Professional Credentials:"})," Medical license numbers, certifications, institutional affiliations"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Contact Information:"})," Email, phone, professional address for platform communication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Platform Usage:"})," Login times, feature usage, performance analytics (anonymized)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Medical Data:"})," Thermography analysis, reports, consultation records"]})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Data Protection Measures:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"AES-256 encryption for all data in transit and at rest"}),o.jsx("li",{children:"Multi-factor authentication and role-based access controls"}),o.jsx("li",{children:"Regular security audits and penetration testing"}),o.jsx("li",{children:"PDPL compliant data handling and storage procedures"}),o.jsx("li",{children:"Secure data centers with 24/7 monitoring"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Your Rights:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Access and review your personal data"}),o.jsx("li",{children:"Request corrections to inaccurate information"}),o.jsx("li",{children:"Data portability and export capabilities"}),o.jsx("li",{children:"Account deletion and data removal (subject to medical record requirements)"})]}),o.jsx("div",{className:"bg-purple-50 p-4 rounded-lg mt-6",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Contact our Privacy Officer:"}),o.jsx("br",{}),"Email: privacy@fahmbiotech.com",o.jsx("br",{}),"Phone: +966 55 710 1103",o.jsx("br",{}),"Address: FAHM BioTech, Riyadh, Saudi Arabia"]})})]})]})};case"terms":return{title:"Terms of Service - Medical Platform",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Xe,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Effective Date: January 2025 | Governing Law: Kingdom of Saudi Arabia"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"Professional Usage Agreement"}),o.jsx("p",{className:"mb-4",children:"By accessing the Fahis thermography platform, you agree to these terms of service and commit to professional, ethical usage in compliance with medical standards and Saudi healthcare regulations."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Medical Professional Requirements:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Valid medical license in Saudi Arabia or internationally recognized jurisdiction"}),o.jsx("li",{children:"Current professional liability insurance coverage"}),o.jsx("li",{children:"Specialized training in medical imaging interpretation (recommended)"}),o.jsx("li",{children:"Compliance with local medical ethics and regulations"}),o.jsx("li",{children:"Commitment to patient confidentiality and HIPAA-equivalent standards"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Platform Usage Guidelines:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Use exclusively for legitimate medical diagnostic purposes"}),o.jsx("li",{children:"No sharing of login credentials with unauthorized personnel"}),o.jsx("li",{children:"Immediate reporting of security incidents or breaches"}),o.jsx("li",{children:"Compliance with data protection and privacy requirements"}),o.jsx("li",{children:"Professional conduct in all platform interactions"})]}),o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Important Medical Disclaimer:"}),o.jsx("p",{className:"text-red-800 text-sm",children:"Thermography is an adjunctive screening tool and should not replace standard mammography or clinical examination. Platform recommendations are advisory only. Medical professionals retain full responsibility for all clinical decisions and patient care."})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Liability and Limitations:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"FAHM BioTech provides technology platform only, not medical advice"}),o.jsx("li",{children:"Healthcare providers responsible for clinical interpretation"}),o.jsx("li",{children:"Professional indemnity insurance required for platform users"}),o.jsx("li",{children:"Disputes resolved through Saudi Arabian arbitration"})]})]})]})};case"pdpl":return{title:"Saudi PDPL Compliance Information",content:o.jsxs("div",{className:"space-y-6 text-sm text-purple-800",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Ge,{size:24,className:"text-purple-600"})}),o.jsx("p",{className:"text-xs text-purple-600",children:"Saudi Personal Data Protection Law Compliance | Updated January 2025"})]}),o.jsxs("div",{className:"prose prose-sm max-w-none",children:[o.jsx("h3",{className:"font-semibold text-purple-900 text-lg mb-3",children:"PDPL Compliance Framework"}),o.jsx("p",{className:"mb-4",children:"The Fahis thermography platform is fully compliant with the Saudi Personal Data Protection Law (PDPL), ensuring the highest standards of data protection for medical professionals and patient information."}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Compliance Measures:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Data Minimization:"})," We collect only necessary data for medical purposes"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Consent Management:"})," Clear consent mechanisms for all data processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Data Subject Rights:"})," Full support for access, correction, and deletion rights"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Security Measures:"})," Advanced encryption and security protocols"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Data Localization:"})," Medical data stored within Saudi Arabia when required"]})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Your Rights Under PDPL:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsx("li",{children:"Right to be informed about data processing"}),o.jsx("li",{children:"Right to access your personal data"}),o.jsx("li",{children:"Right to rectification of inaccurate data"}),o.jsx("li",{children:"Right to erasure (right to be forgotten)"}),o.jsx("li",{children:"Right to restrict processing"}),o.jsx("li",{children:"Right to data portability"}),o.jsx("li",{children:"Right to object to processing"})]}),o.jsx("h4",{className:"font-semibold text-purple-900 mt-6 mb-2",children:"Data Processing Legal Basis:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-2 mb-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Legitimate Interest:"})," Platform security and medical service provision"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Contractual Necessity:"})," Service delivery and platform functionality"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Legal Compliance:"})," Meeting regulatory and medical record requirements"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vital Interests:"})," Emergency medical situations and patient safety"]})]}),o.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Contact Data Protection Officer:"}),o.jsxs("p",{className:"text-purple-800 text-sm",children:["For PDPL-related inquiries or to exercise your rights:",o.jsx("br",{}),"Email: dpo@fahmbiotech.com",o.jsx("br",{}),"Phone: +966 55 710 1103",o.jsx("br",{}),"Address: FAHM BioTech, Riyadh, Saudi Arabia"]})]}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-6",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"External Resources:"}),o.jsxs("p",{className:"text-blue-800 text-sm",children:["Learn more about Saudi PDPL: ",o.jsx("br",{}),o.jsx("a",{href:"https://sdaia.gov.sa/en/PDPL/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"Official PDPL Information (SDAIA)"})]})]})]})]})};default:return{title:"",content:null}}},{title:r,content:s}=n();return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-bold text-purple-900",children:r}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none transition-colors cursor-pointer active:scale-95","aria-label":"Close modal",children:o.jsx(fp,{size:24})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 180px)"},children:s}),o.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0",children:[o.jsx("div",{className:"text-sm text-gray-500 text-center sm:text-left",children:" 2025 FAHM BioTech LLC | Licensed Medical Technology"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("a",{href:"https://fahmbiotech.com/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-purple-600 hover:text-purple-700 underline transition-colors cursor-pointer",children:"Visit FAHM BioTech Website"}),o.jsx("button",{onClick:e,className:"bg-purple-600 text-white px-6 py-2 rounded-lg text-sm hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:"Close"})]})]})})]})})},bE=({variant:t})=>{const[e,n]=k.useState(null),r=a=>{n(a)},s=()=>{window.open("/medical-guidelines","_blank")},i=()=>{window.location.href="/contact-support"};return o.jsxs(o.Fragment,{children:[o.jsxs("footer",{className:"bg-purple-50 border-t border-purple-200 mt-auto relative z-50",children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(Ru,{size:20,className:"mr-2"}),"Resources"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:s,className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base cursor-pointer hover:underline active:scale-95",title:"Thermography Standards (Saudi MOH)",children:[o.jsx(Xe,{size:16,className:"mr-2"}),"Medical Guidelines"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>window.open("/training-materials","_blank"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95",title:"Interactive Case Library",children:[o.jsx(yE,{size:16,className:"mr-2"}),"Interactive Case Library"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>window.open("/scan-interpretation-help","_blank"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95",title:"Quick Reference + Recent Research",children:[o.jsx(Vn,{size:16,className:"mr-2"}),"Scan Interpretation Help"]})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(GP,{size:20,className:"mr-2"}),"Support"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:i,className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Mn,{size:16,className:"mr-2"}),"Contact Support"]})}),o.jsxs("li",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[o.jsxs("div",{className:"flex items-center text-red-800",children:[o.jsx(Me,{size:16,className:"mr-2 text-red-600"}),o.jsx("span",{className:"font-semibold text-base",children:"Emergency Protocol:"})]}),o.jsxs("p",{className:"text-red-700 text-sm mt-1 ml-6",children:["In case of emergency, call ",o.jsx("strong",{children:"997"})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold mb-6 text-purple-900 flex items-center",children:[o.jsx(Ge,{size:20,className:"mr-2"}),"Legal"]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("privacy"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Xe,{size:16,className:"mr-2"}),"Privacy Policy for Medical Professionals"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("terms"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Xe,{size:16,className:"mr-2"}),"Terms of Service"]})}),o.jsx("li",{children:o.jsxs("button",{onClick:()=>r("pdpl"),className:"text-purple-700 hover:text-purple-800 transition-colors flex items-center text-base text-left cursor-pointer hover:underline active:scale-95 min-h-[44px]",children:[o.jsx(Ge,{size:16,className:"mr-2"}),"Saudi PDPL Compliance Info"]})})]})]})]})}),o.jsx("div",{className:"bg-purple-900 text-white",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-base font-medium",children:" 2025 Fahis Thermography Platform  Compliant with Saudi MOH & PDPL"})})})})]}),e&&o.jsx(d4,{type:e,onClose:()=>n(null)})]})},h4=({onLogin:t,onSwitchToRegister:e,authError:n})=>{const[r,s]=k.useState(""),[i,a]=k.useState(""),[c,u]=k.useState(!1),[d,h]=k.useState(!1),[m,g]=k.useState(""),x=async b=>{b.preventDefault(),h(!0),g("");try{await t(r,i)||g(n||"Invalid email, password, or inactive profile")}catch(I){g(I instanceof Error?I.message:"Login failed. Please try again.")}finally{h(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white flex flex-col relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:o.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("defs",{children:o.jsxs("pattern",{id:"thermography-pattern",x:"0",y:"0",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:[o.jsx("circle",{cx:"30",cy:"30",r:"2",fill:"#7c3aed"}),o.jsx("circle",{cx:"15",cy:"15",r:"1.5",fill:"#5b21b6"}),o.jsx("circle",{cx:"45",cy:"45",r:"1",fill:"#a855f7"})]})}),o.jsx("rect",{width:"100%",height:"100%",fill:"url(#thermography-pattern)"})]})}),o.jsx("header",{className:"bg-white/80 backdrop-blur-sm shadow-sm border-b border-gray-100 relative z-10",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"flex items-center py-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl flex items-center justify-center shadow-sm",children:o.jsx(Vn,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Thermography Platform"})]})]})})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4 relative z-10",children:o.jsxs("div",{className:"max-w-7xl w-full flex items-center justify-center gap-16",children:[o.jsx("div",{className:"hidden lg:block max-w-md",children:o.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-8 border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:o.jsx(Vn,{size:24,className:"text-purple-600"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Medical Services"}),o.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Comprehensive healthcare solutions"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Thermography Review"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Advanced thermal imaging analysis for early detection"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Patient Management"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Comprehensive patient records and history tracking"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Risk Assessment"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Professional risk evaluation and classification"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl border border-purple-200",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:"Medical Reports"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Detailed diagnostic reports and documentation"})]})]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 text-center",children:o.jsx("p",{className:"text-xs text-gray-500",children:"Trusted by healthcare professionals"})})]})}),o.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-8 border border-gray-100",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm",children:o.jsx(Vn,{size:32,className:"text-purple-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doctor Portal"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your medical account"})]}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",required:!0,value:r,onChange:b=>s(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-lg",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Hc,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:c?"text":"password",required:!0,value:i,onChange:b=>a(b.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-lg",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3  top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?o.jsx(uf,{size:20}):o.jsx(Ht,{size:20})})]})]}),(m||n)&&o.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-3",children:o.jsx("p",{className:"text-red-600 text-sm",children:m||n})}),o.jsx("button",{type:"submit",disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-xl font-medium focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl",children:d?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",o.jsx("button",{onClick:e,className:"font-medium text-purple-600 hover:text-purple-700 transition-colors duration-200",children:"Register"})]})})]})]})}),o.jsx("div",{className:"relative z-10",children:o.jsx(bE,{variant:"login"})})]})},ox=[{id:"1",patientId:"1",visitDate:"2024-12-15",greyScaleImage:"/thermography/85-1.txt.jpg",colorScaleImage:"/thermography/case1.jpeg",thRiskLevel:2,decision:"Normal/Low Risk",vascularPattern:"Minimal vessel patterns observed",thermalSymmetry:"Excellent bilateral thermal symmetry",hotSpots:"No significant hot spots identified",nippleTemperature:"Normal temperature differential",estrogenDominance:"No signs of estrogen dominance",detailedFindings:"Thermographic examination shows normal thermal patterns with excellent bilateral symmetry. No areas of concern identified. Minimal vascular activity consistent with normal breast tissue.",doctorId:"1",reviewedDate:"2024-12-15",status:"Completed"},{id:"4",patientId:"1",visitDate:"2024-11-20",greyScaleImage:"/thermography/85-1.txt.jpg",colorScaleImage:"/thermography/case1.jpeg",thRiskLevel:1,decision:"Normal/Low Risk",vascularPattern:"Minimal vascular patterns",thermalSymmetry:"Excellent bilateral thermal symmetry",hotSpots:"No hot spots identified",nippleTemperature:"Normal temperature range",estrogenDominance:"No estrogen dominance indicators",detailedFindings:"Follow-up thermographic examination continues to show normal thermal patterns. Excellent bilateral symmetry maintained. No concerning changes from previous visit.",doctorId:"1",reviewedDate:"2024-11-20",status:"Completed"},{id:"5",patientId:"1",visitDate:"2024-10-15",greyScaleImage:"/thermography/85-1.txt.jpg",colorScaleImage:"/thermography/case1.jpeg",thRiskLevel:1,decision:"Normal/Low Risk",vascularPattern:"Minimal vascular activity",thermalSymmetry:"Excellent thermal symmetry",hotSpots:"No areas of concern",nippleTemperature:"Normal bilateral temperature",estrogenDominance:"No signs present",detailedFindings:"Initial thermographic screening shows normal thermal patterns with excellent symmetry. Baseline study for future comparison. No areas of concern identified.",doctorId:"1",reviewedDate:"2024-10-15",status:"Completed"},{id:"2",patientId:"2",visitDate:"2024-12-10",greyScaleImage:"/thermography/72-1.txt.jpg",colorScaleImage:"/thermography/case2.jpeg",thRiskLevel:3,decision:"Requires Further Medical Evaluation",vascularPattern:"Moderate vascular patterns with some asymmetry",thermalSymmetry:"Mild thermal asymmetry noted in upper outer quadrant",hotSpots:"Localized warm area in left breast",nippleTemperature:"Slight temperature elevation on left side",estrogenDominance:"Possible estrogen dominance patterns",detailedFindings:"Thermographic examination reveals moderate vascular activity with thermal asymmetry. Recommend clinical correlation and possible ultrasound evaluation.",doctorId:"1",reviewedDate:"2024-12-10",status:"Completed"},{id:"6",patientId:"2",visitDate:"2024-09-25",greyScaleImage:"/thermography/72-1.txt.jpg",colorScaleImage:"/thermography/case2.jpeg",thRiskLevel:2,decision:"Normal/Low Risk",vascularPattern:"Mild vascular patterns observed",thermalSymmetry:"Good bilateral thermal symmetry",hotSpots:"No significant hot spots",nippleTemperature:"Normal temperature differential",estrogenDominance:"Minimal estrogen indicators",detailedFindings:"Initial thermographic examination shows mild vascular activity with good symmetry. Some minor thermal variations noted but within normal limits. Recommend follow-up in 3 months.",doctorId:"1",reviewedDate:"2024-09-25",status:"Completed"},{id:"3",patientId:"3",visitDate:"2024-12-08",greyScaleImage:"/thermography/245-1.txt.jpg",colorScaleImage:"/thermography/case3.jpeg",thRiskLevel:5,decision:"Requires Further Medical Evaluation",vascularPattern:"Highly vascular patterns with significant asymmetry",thermalSymmetry:"Marked thermal asymmetry with leopard-spotted patterns",hotSpots:"Multiple hot spots with red patch formation",nippleTemperature:"Significant temperature elevation bilaterally",estrogenDominance:"Strong estrogen dominance indicators",detailedFindings:"High-risk thermographic findings with leopard-spotted patterns and significant vascular activity. Immediate clinical evaluation and imaging correlation strongly recommended.",doctorId:"1",reviewedDate:"2024-12-08",status:"Completed"},{id:"7",patientId:"3",visitDate:"2024-11-15",greyScaleImage:"/thermography/245-1.txt.jpg",colorScaleImage:"/thermography/case3.jpeg",thRiskLevel:4,decision:"Requires Further Medical Evaluation",vascularPattern:"Increased vascular patterns with asymmetry",thermalSymmetry:"Moderate thermal asymmetry developing",hotSpots:"Several warm areas identified",nippleTemperature:"Elevated temperature patterns",estrogenDominance:"Moderate estrogen dominance signs",detailedFindings:"Progressive changes noted from previous study. Increased vascular activity and thermal asymmetry. Clinical correlation recommended with possible imaging studies.",doctorId:"1",reviewedDate:"2024-11-15",status:"Completed"},{id:"8",patientId:"3",visitDate:"2024-10-20",greyScaleImage:"/thermography/245-1.txt.jpg",colorScaleImage:"/thermography/case3.jpeg",thRiskLevel:3,decision:"Requires Further Medical Evaluation",vascularPattern:"Moderate vascular patterns emerging",thermalSymmetry:"Mild asymmetry in upper quadrants",hotSpots:"Few warm spots noted",nippleTemperature:"Slight temperature variations",estrogenDominance:"Early estrogen dominance patterns",detailedFindings:"Follow-up study shows developing thermal changes. Moderate vascular activity with emerging asymmetry patterns. Recommend closer monitoring and clinical evaluation.",doctorId:"1",reviewedDate:"2024-10-20",status:"Completed"},{id:"9",patientId:"3",visitDate:"2024-09-10",greyScaleImage:"/thermography/245-1.txt.jpg",colorScaleImage:"/thermography/case3.jpeg",thRiskLevel:2,decision:"Normal/Low Risk",vascularPattern:"Mild vascular patterns",thermalSymmetry:"Good bilateral symmetry",hotSpots:"No significant hot spots",nippleTemperature:"Normal temperature range",estrogenDominance:"Minimal indicators",detailedFindings:"Baseline thermographic study shows normal thermal patterns with good symmetry. Mild vascular activity within normal limits. Establish baseline for future comparison.",doctorId:"1",reviewedDate:"2024-09-10",status:"Completed"}],NE={totalPatientsReviewed:127,totalReportsProcessed:284,pendingReviews:8,monthlyEarnings:14200,reportPaymentRate:50},TE=["Breast Surgical Oncology","Medical Oncology (Breast Cancer)","Radiation Oncology (Breast Cancer)","Breast Radiology","Thermography Specialist","Breast Imaging Specialist","Gynecologic Oncology","Plastic & Reconstructive Surgery (Breast)","Pathology (Breast Cancer)","General Surgery (Breast)"],IE=["King Faisal Specialist Hospital","King Abdulaziz Medical City","National Guard Health Affairs","King Khalid University Hospital","King Abdulaziz University Hospital","Prince Sultan Military Medical City","Dr. Sulaiman Al Habib Medical Group","Mouwasat Hospital","Dallah Healthcare","Saudi German Hospital","International Medical Center","Al-Hammadi Hospital","Other"];let f4={data:""},m4=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||f4},p4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,g4=/\/\*[^]*?\*\/|  +/g,ax=/\n+/g,gr=(t,e)=>{let n="",r="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?gr(a,i):i+"{"+gr(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=gr(a,e?e.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=gr.p?gr.p(i,a):i+":"+a+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Nn={},jE=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+jE(t[n]);return e}return t},y4=(t,e,n,r,s)=>{let i=jE(t),a=Nn[i]||(Nn[i]=(u=>{let d=0,h=11;for(;d<u.length;)h=101*h+u.charCodeAt(d++)>>>0;return"go"+h})(i));if(!Nn[a]){let u=i!==t?t:(d=>{let h,m,g=[{}];for(;h=p4.exec(d.replace(g4,""));)h[4]?g.shift():h[3]?(m=h[3].replace(ax," ").trim(),g.unshift(g[0][m]=g[0][m]||{})):g[0][h[1]]=h[2].replace(ax," ").trim();return g[0]})(t);Nn[a]=gr(s?{["@keyframes "+a]:u}:u,n?"":"."+a)}let c=n&&Nn.g?Nn.g:null;return n&&(Nn.g=Nn[a]),((u,d,h,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=h?u+d.data:d.data+u)})(Nn[a],e,r,c),a},x4=(t,e,n)=>t.reduce((r,s,i)=>{let a=e[i];if(a&&a.call){let c=a(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;a=u?"."+u:c&&typeof c=="object"?c.props?"":gr(c,""):c===!1?"":c}return r+s+(a??"")},"");function Pu(t){let e=this||{},n=t.call?t(e.p):t;return y4(n.unshift?n.raw?x4(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,m4(e.target),e.g,e.o,e.k)}let SE,hf,ff;Pu.bind({g:1});let Kn=Pu.bind({k:1});function v4(t,e,n,r){gr.p=e,SE=t,hf=n,ff=r}function Qr(t,e){let n=this||{};return function(){let r=arguments;function s(i,a){let c=Object.assign({},i),u=c.className||s.className;n.p=Object.assign({theme:hf&&hf()},c),n.o=/ *go\d+/.test(u),c.className=Pu.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),ff&&d[0]&&ff(c),SE(d,c)}return s}}var _4=t=>typeof t=="function",qc=(t,e)=>_4(t)?t(e):t,w4=(()=>{let t=0;return()=>(++t).toString()})(),CE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),E4=20,mp="default",kE=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return kE(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Yl=[],RE={toasts:[],pausedAt:void 0,settings:{toastLimit:E4}},fn={},AE=(t,e=mp)=>{fn[e]=kE(fn[e]||RE,t),Yl.forEach(([n,r])=>{n===e&&r(fn[e])})},PE=t=>Object.keys(fn).forEach(e=>AE(t,e)),b4=t=>Object.keys(fn).find(e=>fn[e].toasts.some(n=>n.id===t)),Du=(t=mp)=>e=>{AE(e,t)},N4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},T4=(t={},e=mp)=>{let[n,r]=k.useState(fn[e]||RE),s=k.useRef(fn[e]);k.useEffect(()=>(s.current!==fn[e]&&r(fn[e]),Yl.push([e,r]),()=>{let a=Yl.findIndex(([c])=>c===e);a>-1&&Yl.splice(a,1)}),[e]);let i=n.toasts.map(a=>{var c,u,d;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((c=t[a.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((u=t[a.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||N4[a.type],style:{...t.style,...(d=t[a.type])==null?void 0:d.style,...a.style}}});return{...n,toasts:i}},I4=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||w4()}),Ua=t=>(e,n)=>{let r=I4(e,t,n);return Du(r.toasterId||b4(r.id))({type:2,toast:r}),r.id},Ve=(t,e)=>Ua("blank")(t,e);Ve.error=Ua("error");Ve.success=Ua("success");Ve.loading=Ua("loading");Ve.custom=Ua("custom");Ve.dismiss=(t,e)=>{let n={type:3,toastId:t};e?Du(e)(n):PE(n)};Ve.dismissAll=t=>Ve.dismiss(void 0,t);Ve.remove=(t,e)=>{let n={type:4,toastId:t};e?Du(e)(n):PE(n)};Ve.removeAll=t=>Ve.remove(void 0,t);Ve.promise=(t,e,n)=>{let r=Ve.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?qc(e.success,s):void 0;return i?Ve.success(i,{id:r,...n,...n==null?void 0:n.success}):Ve.dismiss(r),s}).catch(s=>{let i=e.error?qc(e.error,s):void 0;i?Ve.error(i,{id:r,...n,...n==null?void 0:n.error}):Ve.dismiss(r)}),t};var j4=1e3,S4=(t,e="default")=>{let{toasts:n,pausedAt:r}=T4(t,e),s=k.useRef(new Map).current,i=k.useCallback((m,g=j4)=>{if(s.has(m))return;let x=setTimeout(()=>{s.delete(m),a({type:4,toastId:m})},g);s.set(m,x)},[]);k.useEffect(()=>{if(r)return;let m=Date.now(),g=n.map(x=>{if(x.duration===1/0)return;let b=(x.duration||0)+x.pauseDuration-(m-x.createdAt);if(b<0){x.visible&&Ve.dismiss(x.id);return}return setTimeout(()=>Ve.dismiss(x.id,e),b)});return()=>{g.forEach(x=>x&&clearTimeout(x))}},[n,r,e]);let a=k.useCallback(Du(e),[e]),c=k.useCallback(()=>{a({type:5,time:Date.now()})},[a]),u=k.useCallback((m,g)=>{a({type:1,toast:{id:m,height:g}})},[a]),d=k.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),h=k.useCallback((m,g)=>{let{reverseOrder:x=!1,gutter:b=8,defaultPosition:I}=g||{},A=n.filter(w=>(w.position||I)===(m.position||I)&&w.height),E=A.findIndex(w=>w.id===m.id),_=A.filter((w,D)=>D<E&&w.visible).length;return A.filter(w=>w.visible).slice(...x?[_+1]:[0,_]).reduce((w,D)=>w+(D.height||0)+b,0)},[n]);return k.useEffect(()=>{n.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let g=s.get(m.id);g&&(clearTimeout(g),s.delete(m.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:u,startPause:c,endPause:d,calculateOffset:h}}},C4=Kn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,k4=Kn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,R4=Kn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,A4=Qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${C4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${k4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${R4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,P4=Kn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,D4=Qr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${P4} 1s linear infinite;
`,L4=Kn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,M4=Kn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,V4=Qr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${L4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${M4} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,O4=Qr("div")`
  position: absolute;
`,F4=Qr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,U4=Kn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z4=Qr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${U4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$4=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?k.createElement(z4,null,e):e:n==="blank"?null:k.createElement(F4,null,k.createElement(D4,{...r}),n!=="loading"&&k.createElement(O4,null,n==="error"?k.createElement(A4,{...r}):k.createElement(V4,{...r})))},B4=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,H4=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,q4="0%{opacity:0;} 100%{opacity:1;}",W4="0%{opacity:1;} 100%{opacity:0;}",G4=Qr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,K4=Qr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Q4=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=CE()?[q4,W4]:[B4(n),H4(n)];return{animation:e?`${Kn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Kn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Y4=k.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?Q4(t.position||e||"top-center",t.visible):{opacity:0},i=k.createElement($4,{toast:t}),a=k.createElement(K4,{...t.ariaProps},qc(t.message,t));return k.createElement(G4,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:a}):k.createElement(k.Fragment,null,i,a))});v4(k.createElement);var J4=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=k.useCallback(a=>{if(a){let c=()=>{let u=a.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return k.createElement("div",{ref:i,className:e,style:n},s)},X4=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:CE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},Z4=Pu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bl=16,e6=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:a,containerClassName:c})=>{let{toasts:u,handlers:d}=S4(n,i);return k.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:bl,left:bl,right:bl,bottom:bl,pointerEvents:"none",...a},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(h=>{let m=h.position||e,g=d.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),x=X4(m,g);return k.createElement(J4,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?Z4:"",style:x},h.type==="custom"?qc(h.message,h):s?s(h):k.createElement(Y4,{toast:h,position:m}))}))},Pr=Ve;const t6=({onRegister:t,onSwitchToLogin:e})=>{const[n,r]=k.useState({fullName:"",email:"",password:"",confirmPassword:"",medicalLicenseNumber:"",medicalSpecialty:"",hospitalAffiliation:"",ibanNumber:"",phoneNumber:"",yearsOfExperience:"",status:"",role:""}),[s,i]=k.useState(!1),[a,c]=k.useState(!1),[u,d]=k.useState(!1),[h,m]=k.useState(""),g=/^\+[1-9]\d{6,14}$/,x=async I=>{if(I.preventDefault(),console.log("FORM SUBMITTED"),m(""),n.password!==n.confirmPassword){m("Passwords do not match");return}if(!n.yearsOfExperience||parseFloat(n.yearsOfExperience)<1){m("Years of experience must be at least 1");return}if(n.password.length<6){m("Password must be at least 6 characters"),d(!1);return}if(!g.test(n.phoneNumber)){m("Please enter a valid phone number (e.g. +966501234567)");return}d(!0);try{const A={fullName:n.fullName,email:n.email,medicalLicenseNumber:n.medicalLicenseNumber,medicalSpecialty:n.medicalSpecialty,hospitalAffiliation:n.hospitalAffiliation,ibanNumber:n.ibanNumber,phoneNumber:n.phoneNumber,yearsOfExperience:n.yearsOfExperience,status:"active",role:"doctor"};await t(A,n.password)?Pr.success("Registration Successfull."):(Pr.error("Registration failed. Please try again."),m("Registration failed. Please try again."))}catch(A){Pr.error("Registration failed. Please try again."),m(A instanceof Error?A.message:"Registration failed. Please try again.")}finally{d(!1)}},b=I=>{const{name:A,value:E}=I.target;r(_=>({..._,[A]:A==="yearsOfExperience"?parseInt(E)||0:E}))};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-2xl w-full",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:o.jsx(Vn,{size:32,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Doctor Registration"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Join the Fahis medical network"})]}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fa,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"fullName",required:!0,value:n.fullName,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"Dr. John Smith"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Mn,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",name:"email",required:!0,value:n.email,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Hc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:s?"text":"password",name:"password",required:!0,value:n.password,onChange:b,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:s?o.jsx(uf,{size:20}):o.jsx(Ht,{size:20})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Hc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:a?"text":"password",name:"confirmPassword",required:!0,value:n.confirmPassword,onChange:b,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:""}),o.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:a?o.jsx(uf,{size:20}):o.jsx(Ht,{size:20})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical License Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Xe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"medicalLicenseNumber",required:!0,value:n.medicalLicenseNumber,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"SAU-MD-YYYY-XXXX"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Specialty"}),o.jsxs("select",{name:"medicalSpecialty",required:!0,value:n.medicalSpecialty,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",children:[o.jsx("option",{value:"",children:"Select your specialty"}),TE.map(I=>o.jsx("option",{value:I,children:I},I))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hospital Affiliation"}),o.jsxs("div",{className:"relative",children:[o.jsx(zP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsxs("select",{name:"hospitalAffiliation",required:!0,value:n.hospitalAffiliation,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",children:[o.jsx("option",{value:"",children:"Select hospital"}),IE.map(I=>o.jsx("option",{value:I,children:I},I))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(HP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",name:"ibanNumber",required:!0,value:n.ibanNumber,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"SA44 2000 0001 2345 6789 1234"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(xa,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",name:"phoneNumber",required:!0,value:n.phoneNumber,onChange:b,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 transition-colors
                      ${n.phoneNumber.length===0||g.test(n.phoneNumber)?"border-gray-300 focus:ring-violet-500":"border-red-300 focus:ring-red-500"}
                    `,placeholder:"+966 50 123 4567"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Experience"}),o.jsx("input",{type:"number",name:"yearsOfExperience",required:!0,min:"1",value:n.yearsOfExperience,onChange:b,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-violet-500 transition-colors",placeholder:"5"})]})]}),h&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsx("p",{className:"text-red-600 text-sm",children:h})}),o.jsx("button",{type:"submit",disabled:u,className:"w-full bg-violet-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-violet-700 focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",o.jsx("button",{onClick:e,className:"text-violet-600 hover:text-violet-700 font-medium",children:"Sign in here"})]})})]})})})},n6=({doctor:t,onLogout:e})=>o.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-50 shadow-lg relative",children:[o.jsx("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-purple-500 to-purple-600 text-white px-3 py-1 rounded-lg text-xs font-medium shadow-sm",children:"Fahis Doctor Portal  v1.2  Demo for Stakeholders"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Vn,{className:"w-8 h-8 text-purple-600"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Fahis"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Medical Portal"})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-purple-600 transition-colors",children:[o.jsx(UP,{size:20}),o.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:o.jsx(Fa,{size:16,className:"text-purple-600"})}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"font-medium text-gray-800",children:t.fullName}),o.jsx("p",{className:"text-gray-600",children:t.medicalSpecialty})]})]}),o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200",children:[o.jsx(YP,{size:16}),o.jsx("span",{className:"text-sm",children:"Logout"})]})]})]})]})]}),r6=[{name:"Dashboard",href:"/dashboard",icon:QP},{name:"Patients",href:"/patients",icon:jn},{name:"Profile",href:"/profile",icon:Fa},{name:"Payments",href:"/payments",icon:xE},{name:"Risk Scale Reference",href:"/risk-scale",icon:Xe}],s6=()=>o.jsx("div",{className:"w-64 bg-white border-r border-gray-100 min-h-screen",children:o.jsx("nav",{className:"mt-8 px-4",children:o.jsx("ul",{className:"space-y-2",children:r6.map(t=>o.jsx("li",{children:o.jsxs(z1,{to:t.href,className:({isActive:e})=>`group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-colors ${e?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx(t.icon,{size:18,className:"mr-3 flex-shrink-0"}),t.name]})},t.name))})})}),i6=({doctor:t,onLogout:e,children:n})=>o.jsxs("div",{className:"min-h-screen bg-purple-50 flex flex-col",children:[o.jsx(n6,{doctor:t,onLogout:e}),o.jsxs("div",{className:"flex flex-1",children:[o.jsx(s6,{}),o.jsx("main",{className:"flex-1 p-6",children:n})]}),o.jsx(bE,{variant:"dashboard"})]}),o6={purple:"bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600"},Nl=({title:t,value:e,icon:n,trend:r,color:s})=>o.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl hover:border-purple-200 hover:-translate-y-1 transition-all duration-200 group",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-medium text-gray-600 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t}),o.jsx("p",{className:"text-4xl font-bold text-gray-900 group-hover:text-purple-600 transition-colors duration-200",style:{fontFamily:"Inter, system-ui, sans-serif"},children:e}),r&&o.jsx("p",{className:"text-base text-purple-600 mt-2 font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r})]}),o.jsx("div",{className:`p-3 rounded-2xl transition-all duration-200 group-hover:scale-110 shadow-sm ${o6[s]}`,children:o.jsx(n,{size:24})})]})}),a6=()=>{const t=NE,e=ox.slice(0,5),n=ox.filter(s=>s.thRiskLevel>=4).slice(0,3),{currentDoctor:r}=gE();return o.jsxs("div",{className:"space-y-8",children:[o.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:o.jsx("ol",{className:"flex items-center space-x-2",children:o.jsx("li",{children:o.jsx("span",{className:"text-gray-900 text-sm font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Dashboard"})})})}),o.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-white rounded-2xl p-6 border border-gray-100",children:o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-white rounded-2xl p-6 border border-purple-200",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Dashboard"}),o.jsxs("p",{className:"text-xl text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Welcome back, ",r==null?void 0:r.fullName]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(Nl,{title:"Patients Reviewed",value:t.totalPatientsReviewed,icon:wE,trend:"+12 this month",color:"purple"}),o.jsx(Nl,{title:"Reports Processed",value:t.totalReportsProcessed,icon:OP,trend:"+28 this month",color:"purple"}),o.jsx(Nl,{title:"Pending Reviews",value:t.pendingReviews,icon:Au,color:"purple"}),o.jsx(Nl,{title:"Monthly Earnings",value:`SAR ${t.monthlyEarnings.toLocaleString()}`,icon:Ge,trend:"+18% vs last month",color:"purple"})]}),n.length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-2xl shadow-sm border border-red-100 p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Me,{className:"text-red-600",size:20}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Urgent Flags"})]}),o.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-3 py-1 rounded-full shadow-sm",children:[n.length," urgent"]})]}),o.jsx("div",{className:"space-y-4",children:n.map(s=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-red-200 hover:bg-white hover:shadow-sm transition-all duration-200 cursor-pointer group",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Patient ",s.patientId]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-lg",children:["TH:",s.thRiskLevel]}),o.jsx("p",{className:"text-sm text-gray-500",children:s.decision})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("button",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 shadow-sm hover:shadow-md hover:from-purple-600 hover:to-purple-700 group-hover:scale-105",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx(Ht,{size:14}),o.jsx("span",{children:"Review Scan"}),o.jsx(Bc,{size:14})]})})]},s.id))})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Recent Cases"}),o.jsx(EE,{className:"text-purple-500",size:20})]}),o.jsx("div",{className:"space-y-4",children:e.map(s=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl hover:from-purple-100 hover:to-purple-200 transition-all duration-200 cursor-pointer border border-transparent hover:border-purple-300 group",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Patient ",s.patientId]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${s.thRiskLevel<=2?"bg-green-100 text-green-800":s.thRiskLevel===3?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["TH:",s.thRiskLevel]}),o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${s.status==="Completed"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:s.visitDate}),o.jsx("p",{className:"text-xs text-gray-500",children:s.decision}),o.jsx(Bc,{size:16,className:"text-gray-400 group-hover:text-purple-600 transition-colors duration-200 mt-1 ml-auto"})]})]},s.id))})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Monthly Progress"}),o.jsx(Oa,{className:"text-purple-600",size:20})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Report Reviews"}),o.jsx("span",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"28/30 Target"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:o.jsx("div",{className:"h-3 rounded-full transition-all duration-500 ease-out bg-gradient-to-r from-purple-500 to-purple-600",style:{width:"93%"}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Payment Goal"}),o.jsx("span",{className:"font-medium text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"SAR 14,200/15,000"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"95%"}})})]})]})]})]})]})},l6=({patient:t,onSelectPatient:e})=>{const n=i=>{if(!i)return"-";const a=i.toDate?i.toDate():new Date(i),c=a.getFullYear(),u=(a.getMonth()+1).toString().padStart(2,"0"),d=a.getDate().toString().padStart(2,"0");return`${c}-${u}-${d}`},r=i=>{let a="";switch(i>-1&&i<2?a="Low":i>1&&i<4?a="Medium":a="High",a){case"Low":return["text-green-700 bg-green-100",a];case"Medium":return["text-yellow-700 bg-yellow-100",a];case"High":return["text-red-700 bg-red-100",a];default:return["text-gray-700 bg-gray-100",a]}},s=i=>{if(!i)return 0;const a=new Date(i),c=new Date;let u=c.getFullYear()-a.getFullYear();const d=c.getMonth()-a.getMonth();return(d<0||d===0&&c.getDate()<a.getDate())&&u--,u};return o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl hover:border-purple-300 hover:-translate-y-1 transition-all duration-200 cursor-pointer group",onClick:()=>e(t.id),children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-purple-600 transition-colors duration-200",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName}),o.jsxs("p",{className:"text-base text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["ID: ",t.patientId]})]}),o.jsxs("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${r(t.thRiskLevel)[0]}`,children:[r(t.thRiskLevel)[1]," Risk"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-base mb-4",children:[o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(Oa,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Age: ",s(t.dateOfBirth)]})]}),o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(Xe,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:[t.totalVisits," visits"]})]}),o.jsxs("div",{className:"flex items-center text-gray-600",children:[o.jsx(dp,{size:16,className:"mr-2"}),o.jsxs("span",{style:{fontFamily:"Inter, system-ui, sans-serif"},children:["Last: ",n(t.lastVisit)]})]}),o.jsx("div",{className:"flex items-center text-gray-600",children:o.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${t.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsxs("button",{className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-base font-medium transition-all duration-200 group-hover:shadow-lg group-hover:scale-105 shadow-md",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx(Ht,{size:16}),o.jsx("span",{children:"View Patient"})]})})]})},c6=()=>{const[t,e]=k.useState([]),[n]=k.useState([]),[r,s]=k.useState(!0),[i,a]=k.useState(null),[c,u]=k.useState(""),[d,h]=k.useState("All");k.useEffect(()=>{let b=!0;return(async()=>{try{s(!0);const A=hi(Yt(Qe,"patients"),jP("status","==","Active")),[E]=await Promise.all([Jt(A)]);if(!b)return;const _=E.docs.map(w=>{const D=w.data();return{id:w.id,patientId:D.patientId||"",fullName:D.fullName||"",age:D.age||0,gender:D.gender==="Male"?"Male":"Female",dateOfBirth:D.dateOfBirth||"",contactNumber:D.contactNumber||"",lastVisit:D.lastVisit||"",totalVisits:D.totalVisits||0,thRiskLevel:D.thRiskLevel||0,status:D.status||"Active",role:"Patient"}});e(_)}catch(A){b&&(console.error(A),a(A instanceof Error?A.message:"Failed to fetch data"))}finally{b&&s(!1)}})(),()=>{b=!1}},[]);const m=k.useMemo(()=>{const b={};for(const I of n)b[I.scanId]=I;return b},[n]),g=b=>{let I="";return b>-1&&b<2?I="Low":b>1&&b<4?I="Medium":I="High",I};return{patients:k.useMemo(()=>{const b=c.toLowerCase();return t.filter(I=>{const A=I.fullName.toLowerCase().includes(b)||I.patientId.toLowerCase().includes(b),E=d==="All"||g(I.thRiskLevel)===d;return A&&E})},[t,c,d]),allPatients:t,reports:n,loading:r,error:i,searchTerm:c,setSearchTerm:u,filterRisk:d,setFilterRisk:h,getReportById:b=>m[b]}},pp=({items:t})=>{const e=Bn(),n=r=>{r.onClick?r.onClick():r.href&&e(r.href,{replace:!0})};return o.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:o.jsx("ol",{className:"flex items-center space-x-2",children:t.map((r,s)=>o.jsxs(Ib.Fragment,{children:[o.jsx("li",{children:r.isActive||!r.href&&!r.onClick?o.jsx("span",{className:"text-gray-900 text-lg font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r.label}):o.jsx("button",{onClick:()=>n(r),className:"text-gray-500 hover:text-purple-600 text-lg transition-colors",style:{fontFamily:"Inter, system-ui, sans-serif"},children:r.label})}),s<t.length-1&&o.jsx(Bc,{size:16,className:"text-gray-400"})]},s))})})},u6=({onSelectPatient:t})=>{const{patients:e,searchTerm:n,setSearchTerm:r,filterRisk:s,setFilterRisk:i}=c6();return o.jsxs("div",{className:"space-y-8",children:[o.jsx(pp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",isActive:!0}]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Patients"}),o.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Manage your patient records and reviews"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(s4,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search patients...",value:n,onChange:a=>r(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-base",style:{fontFamily:"Inter, system-ui, sans-serif"}})]}),o.jsxs("div",{className:"relative",children:[o.jsx(qP,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsxs("select",{value:s,onChange:a=>i(a.target.value),className:"pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-base",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[o.jsx("option",{value:"All",children:"All Risk Levels"}),o.jsx("option",{value:"Low",children:"Low Risk"}),o.jsx("option",{value:"Medium",children:"Medium Risk"}),o.jsx("option",{value:"High",children:"High Risk"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(a=>o.jsx(l6,{patient:a,onSelectPatient:t},a.id))}),e.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"No patients found matching your criteria."})})]})]})},d6=t=>{const[e,n]=k.useState([]),[r,s]=k.useState(!0);return k.useEffect(()=>{if(!t)return;(async()=>{var c;s(!0);const a=[];try{const u=Yt(Qe,"patients",t,"appointments"),d=await Jt(u);for(const h of d.docs){const m=h.id,g=h.data(),x=Yt(Qe,"patients",t,"appointments",m,"thermalScans"),b=await Jt(x);for(const I of b.docs){const A=I.data(),E=Yt(Qe,"patients",t,"appointments",m,"thermalScans",I.id,"aiInferenceResults"),_=hi(E,Bo("inferenceTimestamp","desc"),Kl(1)),D=(c=(await Jt(_)).docs[0])==null?void 0:c.data();a.push({patientId:t,appointmentId:m,scanId:I.id,appointmentDate:g.appointmentDate,scanTimestamp:A.scanTimestamp,scanStatus:A.scanStatus,scanImage1:A.scanImage1,scanImage2:A.scanImage2,scanImage3:A.scanImage3,thRiskLevel:(D==null?void 0:D.thRiskLevel)||0,decision:D==null?void 0:D.decision,detailedFindings:D==null?void 0:D.detailedFindings,reviewUpdatedAt:D==null?void 0:D.reviewUpdatedAt})}}a.sort((h,m)=>new Date(m.scanTimestamp??0).getTime()-new Date(h.scanTimestamp??0).getTime()),n(a)}catch(u){console.error("Error fetching thermal scans",u)}finally{s(!1)}})()},[t]),{reports:e,loading:r}},h6=({patient:t,onBack:e,onSelectReport:n})=>{const[r,s]=k.useState(null),{reports:i,loading:a}=d6(t.id),c=h=>{let m="";switch(h>-1&&h<2?m="Low":h>1&&h<4?m="Medium":m="High",m){case"Low":return["text-green-700 bg-green-100",m];case"Medium":return["text-yellow-700 bg-yellow-100",m];case"High":return["text-red-700 bg-red-100",m];default:return["text-gray-700 bg-gray-100",m]}},u=h=>{if(!h)return 0;const m=new Date(h),g=new Date;let x=g.getFullYear()-m.getFullYear();const b=g.getMonth()-m.getMonth();return(b<0||b===0&&g.getDate()<m.getDate())&&x--,x},d=h=>{if(!h)return"-";const m=h.toDate?h.toDate():new Date(h),g=m.getFullYear(),x=(m.getMonth()+1).toString().padStart(2,"0"),b=m.getDate().toString().padStart(2,"0");return`${g}-${x}-${b}`};return o.jsxs("div",{className:"space-y-8",children:[o.jsx(pp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",onClick:e},{label:t.fullName,isActive:!0}]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:o.jsx(ji,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Patient Details"}),o.jsx("p",{className:"text-gray-600 text-lg",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center",children:o.jsx(Fa,{size:24,className:"text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",style:{fontFamily:"Inter, system-ui, sans-serif"},children:t.fullName}),o.jsxs("p",{className:"text-sm text-gray-500",style:{fontFamily:"Inter, system-ui, sans-serif"},children:["ID: ",t.patientId]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Age"}),o.jsxs("span",{className:"text-gray-900",children:[u(t.dateOfBirth)," years"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Gender"}),o.jsx("span",{className:"text-gray-900",children:t.gender})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date of Birth"}),o.jsx("span",{className:"text-gray-900",children:t.dateOfBirth})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Phone"}),o.jsx("span",{className:"text-gray-900",children:t.contactNumber})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Last Visit"}),o.jsx("span",{className:"text-gray-900",children:d(t.lastVisit)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Visits"}),o.jsx("span",{className:"text-gray-900",children:t.totalVisits})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status"}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})]})]})]}),o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Visit History & Thermography Reports"}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[o.jsx(Xe,{size:16}),o.jsxs("span",{children:[i.length," reports"]})]})]}),!a&&i.length>0?o.jsx("div",{className:"space-y-4",children:i.sort((h,m)=>+new Date(m.scanTimestamp)-+new Date(h.scanTimestamp)).map((h,m)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer",onClick:()=>n(h.scanId,t.id,h.appointmentId),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Oa,{className:"text-gray-400",size:16}),o.jsxs("span",{className:"font-medium text-gray-900",children:["Visit #",i.length-m,":"," ",d(h.scanTimestamp)]}),o.jsxs("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${c(h.thRiskLevel??0)[0]}`,children:["TH:",h.thRiskLevel??"-"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${h.scanStatus==="Completed"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:h.scanStatus}),o.jsx(Ht,{className:"text-blue-600",size:16})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-700",children:["Decision:"," "]}),o.jsx("span",{className:h.decision==="Normal/Low Risk"?"text-green-600":"text-orange-600",children:h.decision??"-"})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium text-gray-700",children:["Reviewed:"," "]}),o.jsx("span",{className:"text-gray-600",children:d(h.reviewUpdatedAt)})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:h.detailedFindings??"-"})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"text-white font-medium text-sm flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#1488fc"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#0066cc",onMouseLeave:g=>g.currentTarget.style.backgroundColor="#1488fc",disabled:r===h.scanId,onClick:g=>{g.stopPropagation(),s(h.scanId),n(h.scanId,t.id,h.appointmentId)},children:r===h.scanId?o.jsx("span",{children:"Loading..."}):o.jsxs(o.Fragment,{children:[o.jsx(Ht,{size:14}),o.jsx("span",{children:"Review"}),o.jsx(ji,{className:"rotate-180",size:14})]})})})]},h.scanId))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Xe,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:a&&o.jsxs("span",{children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"We're fetching the latest reports of your patient"}),o.jsx("p",{className:"text-gray-500",children:"This will just take a few moments"})]})}),!a&&o.jsxs("span",{children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Reports Available"}),o.jsx("p",{className:"text-gray-500",children:"This patient doesn't have any thermography reports yet."})]})]})]})]})]})},f6=[{level:1,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-500",textColor:"text-blue-700",icon:ne,title:"TH:1",description:"99% chance no cancer present",details:"Minimal thermal activity"},{level:2,color:"green",bgColor:"bg-green-50",borderColor:"border-green-500",textColor:"text-green-700",icon:ne,title:"TH:2",description:"99% chance no cancer present",details:"Low thermal activity"},{level:3,color:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-500",textColor:"text-yellow-700",icon:Me,title:"TH:3",description:"Medium/average risk (1 in 7 chance)",details:"Moderate thermal patterns"},{level:4,color:"orange",bgColor:"bg-orange-50",borderColor:"border-orange-500",textColor:"text-orange-700",icon:dp,title:"TH:4",description:"Moderate to high risk",details:"Concerning thermal patterns"},{level:5,color:"red",bgColor:"bg-red-50",borderColor:"border-red-500",textColor:"text-red-700",icon:FP,title:"TH:5",description:"90% chance cancer present",details:"High-risk thermal patterns"}],m6=({selectedLevel:t,onLevelChange:e})=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Thermography Risk Scale"}),o.jsx("div",{className:"space-y-3",children:f6.map(n=>{const r=n.icon,s=t===n.level;return o.jsx("button",{onClick:()=>e(n.level),className:`w-full p-4 rounded-lg border-2 transition-all text-left ${s?`border-blue-400 ${n.bgColor}`:"border-gray-200 hover:border-gray-300 bg-white"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(r,{size:20,className:s?n.textColor:"text-gray-400"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:`font-bold ${s?n.textColor:"text-gray-700"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.title}),o.jsx("span",{className:`text-xs ${s?n.textColor:"text-gray-500"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.details})]}),o.jsx("p",{className:`text-sm mt-1 ${s?n.textColor:"text-gray-600"}`,style:{fontFamily:"Inter, system-ui, sans-serif"},children:n.description})]})]})},n.level)})})]}),p6=({greyScaleImage:t,colorScaleImage:e,newScanImage:n})=>{const[r,s]=k.useState(1),[i,a]=k.useState("grey"),[c,u]=k.useState({x:0,y:0}),[d,h]=k.useState(!1),[m,g]=k.useState({x:0,y:0}),[x,b]=k.useState(0),[I,A]=k.useState(!1);k.useEffect(()=>{n&&a("newScan")},[n]);const E=()=>s(C=>Math.min(C+.25,3)),_=()=>s(C=>Math.max(C-.25,.5)),w=()=>{s(1),u({x:0,y:0}),b(0)},D=()=>b(C=>C-90),M=()=>b(C=>C+90),F=()=>A(!I),N=C=>{r>1&&(h(!0),g({x:C.clientX-c.x,y:C.clientY-c.y}))},v=C=>{d&&r>1&&u({x:C.clientX-m.x,y:C.clientY-m.y})},T=()=>{h(!1)},S=i==="newScan"?n:i==="grey"?t:e,R=i==="grey"?{title:"Grey Scale Reference",desc:"White = Cool, Black = Hot"}:i==="color"?{title:"Color Scale Reference",desc:"Blue = Cool, Red = Hot"}:{title:"New Scan",desc:""};return o.jsxs("div",{className:`space-y-4 ${I?"fixed inset-0 z-50 bg-black p-4":""}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[!n&&o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>a("grey"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${i==="grey"?"text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-sm"}`,style:{backgroundColor:i==="grey"?"#1488fc":void 0,fontFamily:"Inter, system-ui, sans-serif"},children:"Grey Scale"}),o.jsx("button",{onClick:()=>a("color"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${i==="color"?"text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:{backgroundColor:i==="color"?"#1488fc":void 0,fontFamily:"Inter, system-ui, sans-serif"},children:"Color Scale"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:_,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},disabled:r<=.5,children:o.jsx(u4,{size:16})}),o.jsxs("span",{className:"text-sm text-gray-600 min-w-[4rem] text-center font-medium",children:[Math.round(r*100),"%"]}),o.jsx("button",{onClick:E,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},disabled:r>=3,children:o.jsx(c4,{size:16})}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx("button",{onClick:D,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Rotate Left",children:o.jsx(t4,{size:16})}),o.jsx("button",{onClick:M,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Rotate Right",children:o.jsx(n4,{size:16})}),o.jsx("button",{onClick:w,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Reset View",children:o.jsx(ZP,{size:16})}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx("button",{onClick:F,className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:I?"Exit Fullscreen":"Fullscreen",children:o.jsx(JP,{size:16})}),o.jsx("button",{className:"p-2 text-gray-600 border border-gray-300 rounded-lg transition-all duration-200",style:{color:"#1488fc",borderColor:"#e5e7eb"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#1488fc"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent",C.currentTarget.style.borderColor="#e5e7eb"},title:"Download Image",children:o.jsx(hp,{size:16})})]})]}),o.jsxs("div",{className:`relative bg-gray-100 rounded-lg overflow-hidden ${d?"cursor-grabbing":r>1?"cursor-grab":"cursor-default"}`,style:{height:I?"calc(100vh - 120px)":"500px"},onMouseDown:N,onMouseMove:v,onMouseUp:T,onMouseLeave:T,children:[o.jsx("div",{className:"flex h-full items-center justify-center p-4 select-none",children:o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[o.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg text-sm font-medium z-10",children:"DEMO SCAN - For Presentation Only"}),o.jsx("img",{src:S,alt:"Thermography Scan",className:"w-full h-full object-contain rounded-lg shadow-sm transition-all duration-200",style:{transform:`scale(${r}) translate(${c.x/r}px, ${c.y/r}px) rotate(${x}deg)`,transformOrigin:"center center"},draggable:!1})]})}),o.jsxs("div",{className:"absolute bottom-4 left-4 bg-white bg-opacity-95 backdrop-blur-sm rounded-lg p-3 shadow-lg border border-gray-200",children:[o.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:R.title}),o.jsx("p",{className:"text-xs text-gray-600",children:R.desc})]}),r!==1&&o.jsx("div",{className:"absolute top-4 right-4 bg-white bg-opacity-95 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg border border-gray-200",children:o.jsxs("p",{className:"text-xs font-medium text-gray-700",children:[Math.round(r*100),"% ",r>1&&" Drag to pan"]})}),I&&o.jsx("button",{onClick:F,className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-all duration-200",children:o.jsx(fp,{size:20})})]})]})},g6=({doctor:t,onSaveReview:e})=>{var w,D;const n=Yn(),r=Bn(),s=(w=n.state)==null?void 0:w.report,i=(D=n.state)==null?void 0:D.patient,a=()=>r(-1),[c,u]=k.useState((s==null?void 0:s.thRiskLevel)||1),[d,h]=k.useState((s==null?void 0:s.decision)||""),[m,g]=k.useState({vascularPattern:(s==null?void 0:s.vascularPattern)||"",thermalSymmetry:(s==null?void 0:s.thermalSymmetry)||"",hotSpots:(s==null?void 0:s.hotSpots)||"",nippleTemperature:(s==null?void 0:s.nippleTemperature)||""}),[x,b]=k.useState((s==null?void 0:s.detailedFindings)||""),[I,A]=k.useState(!1);k.useEffect(()=>{console.log(" Entered ThermographyReview page"),console.log("Report Data : ",s),console.log("Patient ID:",i==null?void 0:i.patientId),console.log("Doctor ID:",t)},[t,i==null?void 0:i.patientId,s]),k.useEffect(()=>{(!s||!i)&&r("/patients")},[s,i,r]);const E=async()=>{if(A(!0),!s||!i){Pr.error("No report or patient data available"),A(!1);return}const M={patientId:i.id,appointmentId:s.appointmentId,scanId:s.scanId,decision:d,detailedFindings:x,hotSpots:m.hotSpots,nippleTemperature:m.nippleTemperature,thRiskLevel:c,vascularPattern:m.vascularPattern,thermalSymmetry:m.thermalSymmetry,reviewDoctorId:t.id,reviewedUpdatedAt:he.fromDate(new Date),reviewStatus:"Completed"};try{await e(s.aiInferenceId,M),Pr.success("Review saved successfully!")}catch{Pr.error("Failed to save review. Please try again.")}A(!1)},_=M=>{if(!M)return"-";let F;if(M instanceof Date?F=M:"toDate"in M&&typeof M.toDate=="function"?F=M.toDate():"seconds"in M&&typeof M.seconds=="number"?F=new Date(M.seconds*1e3):F=new Date(M),isNaN(F.getTime()))return"-";const N=F.getFullYear(),v=(F.getMonth()+1).toString().padStart(2,"0"),T=F.getDate().toString().padStart(2,"0");return`${N}-${v}-${T}`};return o.jsxs("div",{className:"space-y-8",children:[o.jsx(pp,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Patients",onClick:a},{label:(i==null?void 0:i.fullName)||"Patient"},{label:"Review Scan",isActive:!0}]}),o.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-purple-50 to-white rounded-2xl p-6 border border-purple-200 shadow-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-purple-600 transition-colors rounded-xl hover:bg-purple-50",children:o.jsx(ji,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold text-purple-900 mb-2",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Thermography Review"}),o.jsxs("p",{className:"text-purple-700 text-xl",style:{fontFamily:"Inter, system-ui, sans-serif"},children:[i==null?void 0:i.fullName," - ",_(s.scanTimestamp)]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("button",{onClick:E,disabled:I,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-xl transition-all duration-200 disabled:opacity-50 font-medium shadow-lg hover:shadow-xl text-lg",children:I?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Saving..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(r4,{size:18}),o.jsx("span",{children:"Save Review"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Thermography Images"}),s&&o.jsx(p6,{greyScaleImage:s.scanImage1Grey||s.scanImage1,colorScaleImage:s.scanImage1})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Clinical Findings"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Vascular Pattern Assessment"}),o.jsx("textarea",{value:m.vascularPattern,onChange:M=>g(F=>({...F,vascularPattern:M.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Describe vascular patterns observed..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Thermal Symmetry Evaluation"}),o.jsx("textarea",{value:m.thermalSymmetry,onChange:M=>g(F=>({...F,thermalSymmetry:M.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Evaluate thermal symmetry..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Hot Spot Identification"}),o.jsx("textarea",{value:m.hotSpots,onChange:M=>g(F=>({...F,hotSpots:M.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Identify and describe hot spots..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Nipple Temperature Comparison"}),o.jsx("textarea",{value:m.nippleTemperature,onChange:M=>g(F=>({...F,nippleTemperature:M.target.value})),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:3,placeholder:"Compare nipple temperatures..."})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Patient Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Patient ID"}),o.jsx("p",{className:"text-purple-900",children:i==null?void 0:i.patientId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Age"}),o.jsxs("p",{className:"text-purple-900",children:[i==null?void 0:i.age," years"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Visit Date"}),o.jsx("p",{className:"text-purple-900",children:_(s.scanCreatedAt)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Total Visits"}),o.jsx("p",{className:"text-purple-900",children:i==null?void 0:i.totalVisits})]})]})]}),o.jsx(m6,{selectedLevel:c,onLevelChange:u}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Assessment Decision"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("button",{onClick:()=>h("Normal/Low Risk"),className:`p-4 rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 ${d==="Normal/Low Risk"?"border-green-400 bg-gradient-to-r from-green-50 to-green-100 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx(ne,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Normal/Low Risk"})]}),o.jsxs("button",{onClick:()=>h("Requires Further Medical Evaluation"),className:`p-4 rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 ${d==="Requires Further Medical Evaluation"?"border-red-400 bg-gradient-to-r from-red-50 to-red-100 text-red-700":"border-gray-200 hover:border-gray-300"}`,children:[o.jsx(dp,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Requires Further Evaluation"})]})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-purple-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Detailed Findings"}),o.jsx("textarea",{value:x,onChange:M=>b(M.target.value),className:"w-full p-3 border border-purple-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base",rows:5,placeholder:"Write detailed findings here..."})]})]})]})]})},y6=()=>{const t=NE,e=[{month:"December 2024",reports:28,amount:1400,status:"Current"},{month:"November 2024",reports:45,amount:2250,status:"Paid"},{month:"October 2024",reports:38,amount:1900,status:"Paid"},{month:"September 2024",reports:42,amount:2100,status:"Paid"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Tracking"}),o.jsx("p",{className:"text-gray-600",children:"Monitor your earnings and payment history"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:o.jsx(xE,{className:"text-green-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Earnings"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["SAR ",t.monthlyEarnings.toLocaleString()]})]})]}),o.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[o.jsx(EE,{size:16,className:"mr-1"}),o.jsx("span",{children:"+18% from last month"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:o.jsx(Xe,{className:"text-blue-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Reports This Month"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalReportsProcessed})]})]}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Rate: SAR ",t.reportPaymentRate," per report"]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:o.jsx(Oa,{className:"text-purple-600",size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Processed"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalReportsProcessed})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Since joining platform"})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"p-6 border-b border-gray-100",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment History"})}),o.jsx("div",{className:"divide-y divide-gray-100",children:e.map((n,r)=>o.jsxs("div",{className:"p-6 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:n.month}),o.jsxs("p",{className:"text-sm text-gray-500",children:[n.reports," reports reviewed"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"font-bold text-gray-900",children:["SAR ",n.amount.toLocaleString()]}),o.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${n.status==="Paid"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n.status})]})]},r))})]})]})},x6=()=>{const t=()=>{const n=document.createElement("a");n.href="/thermography/Thermography-Risk-ScaleV2.pdf",n.download="Thermography-Risk-ScaleV2.pdf",n.click()},e=()=>{window.open("/thermography/Thermography-Risk-ScaleV2.pdf","_blank")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Thermography Risk Scale Reference"}),o.jsx("p",{className:"text-gray-600",children:"Official thermography risk assessment guidelines and documentation"})]}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(Xe,{size:40,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Thermography Risk Scale V2"}),o.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Access the comprehensive thermography risk assessment guide containing detailed information about TH risk levels, clinical findings, and professional recommendations for breast cancer screening."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs("button",{onClick:e,className:"flex items-center justify-center space-x-2 bg-violet-600 text-white px-6 py-3 rounded-lg hover:bg-violet-700 transition-colors font-medium",children:[o.jsx(vE,{size:20}),o.jsx("span",{children:"View PDF Guide"})]}),o.jsxs("button",{onClick:t,className:"flex items-center justify-center space-x-2 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:[o.jsx(hp,{size:20}),o.jsx("span",{children:"Download PDF"})]})]})]})}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Xe,{className:"text-blue-600 mt-0.5 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Professional Guidelines"}),o.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[o.jsx("p",{children:" This document contains the official thermography risk scale used for breast cancer screening"}),o.jsx("p",{children:" Review the complete guidelines before conducting thermography assessments"}),o.jsx("p",{children:" Ensure all risk classifications follow the standardized TH:1-5 scale"}),o.jsx("p",{children:" Always correlate thermographic findings with clinical examination and patient history"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Reference"}),o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-blue-700",children:"TH:1-2"}),o.jsx("span",{className:"text-gray-600",children:"Low Risk (99% no cancer)"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-yellow-700",children:"TH:3"}),o.jsx("span",{className:"text-gray-600",children:"Medium Risk (1 in 7 chance)"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-orange-700",children:"TH:4"}),o.jsx("span",{className:"text-gray-600",children:"High Risk"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-red-700",children:"TH:5"}),o.jsx("span",{className:"text-gray-600",children:"Very High Risk (90% cancer present)"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Assessment Areas"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsx("p",{children:" Vascular pattern analysis"}),o.jsx("p",{children:" Thermal symmetry evaluation"}),o.jsx("p",{children:" Hot spot identification"}),o.jsx("p",{children:" Nipple temperature comparison"}),o.jsx("p",{children:" Estrogen dominance indicators"}),o.jsx("p",{children:" Overall thermal distribution"})]})]})]})]})},v6=({doctor:t})=>{const[e,n]=k.useState(!1),[r,s]=k.useState(!1),[i,a]=k.useState(t),c=h=>{if(!h)return"-";const m=h.toDate?h.toDate():new Date(h),g=m.getFullYear(),x=(m.getMonth()+1).toString().padStart(2,"0"),b=m.getDate().toString().padStart(2,"0");return`${g}-${x}-${b}`};k.useEffect(()=>{a(t)},[t]);const u=h=>{const{name:m,value:g}=h.target;a(x=>({...x,[m]:m==="yearsOfExperience"?Number(g):g}))},d=async()=>{try{s(!0);const h=di(Qe,"doctors",t.id),m={phoneNumber:i.phoneNumber,medicalLicenseNumber:i.medicalLicenseNumber,ibanNumber:i.ibanNumber,medicalSpecialty:i.medicalSpecialty,hospitalAffiliation:i.hospitalAffiliation,yearsOfExperience:i.yearsOfExperience};await cf(h,m),n(!1),Pr.success("Profile saved successfully!")}catch(h){console.error(h),Pr.error(h instanceof Error?h.message:"Failed to save review. Please try again.")}finally{s(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),o.jsx("p",{className:"text-gray-600",children:"Manage your professional information"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center",children:o.jsx(Fa,{size:32,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.fullName}),o.jsx("p",{className:"text-gray-600",children:t.medicalSpecialty}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Member since : ",c(new Date(t.joinedDate).toLocaleDateString())]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Professional Information"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Mn,{size:18,className:"text-gray-400"}),o.jsx("input",{value:i.email,disabled:!0,className:"w-full bg-gray-100 px-3 py-2 rounded-lg"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Medical License"}),o.jsx("input",{name:"medicalLicenseNumber",value:i.medicalLicenseNumber,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Medical Specialty"}),o.jsx("select",{name:"medicalSpecialty",value:i.medicalSpecialty,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg",children:TE.map(h=>o.jsx("option",{value:h,children:h},h))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Hospital Affiliation"}),o.jsx("select",{name:"hospitalAffiliation",value:i.hospitalAffiliation,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg",children:IE.map(h=>o.jsx("option",{value:h,children:h},h))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Years of Experience"}),o.jsx("input",{type:"number",name:"yearsOfExperience",min:1,value:i.yearsOfExperience,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Contact & Payment"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),o.jsx("input",{name:"phoneNumber",value:i.phoneNumber,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"IBAN"}),o.jsx("input",{name:"ibanNumber",value:i.ibanNumber,onChange:u,disabled:!e,className:"w-full px-3 py-2 border rounded-lg font-mono"})]})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t flex gap-3",children:e?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:d,disabled:r,className:"bg-violet-600 text-white px-6 py-2 rounded-lg",children:r?"Saving...":"Save"}),o.jsx("button",{onClick:()=>{a(t),n(!1)},className:"border px-6 py-2 rounded-lg",children:"Cancel"})]}):o.jsx("button",{onClick:()=>n(!0),className:"bg-violet-600 text-white px-6 py-2 rounded-lg",children:"Edit Profile"})})]})]})},Ms=({title:t,children:e,isOpen:n,onToggle:r,icon:s})=>o.jsxs("div",{className:"border border-gray-200 rounded-lg mb-4",children:[o.jsxs("button",{onClick:r,className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[s,o.jsx("span",{className:"font-semibold text-gray-900",children:t})]}),n?o.jsx($P,{className:"text-gray-500 flex-shrink-0",size:20}):o.jsx(Bc,{className:"text-gray-500 flex-shrink-0",size:20})]}),n&&o.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:o.jsx("div",{className:"pt-4",children:e})})]}),lx=({term:t,definition:e})=>{const[n,r]=k.useState(!1);return o.jsxs("span",{className:"relative",children:[o.jsx("button",{className:"text-violet-600 underline hover:text-violet-700 cursor-help",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!n),children:t}),n&&o.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-lg z-10",children:[e,o.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})},_6=()=>{const[t,e]=k.useState("en"),[n,r]=k.useState(new Set([0])),s=d=>{const h=new Set(n);h.has(d)?h.delete(d):h.add(d),r(h)},i=()=>{window.print()},a=()=>{alert("PDF download functionality would be implemented here")},c="January 15, 2025";return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100 print:bg-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 print:shadow-none",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(Ge,{size:24,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis Privacy Policy"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Professionals Platform"})]})]}),o.jsxs("div",{className:"flex items-center space-x-4 print:hidden",children:[o.jsx("a",{href:"/",className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:o.jsx("span",{children:" Back to Login"})}),o.jsxs("button",{onClick:()=>e(t==="en"?"ar":"en"),className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(_E,{size:16}),o.jsx("span",{children:t==="en"?"":"English"})]}),o.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx(e4,{size:16}),o.jsx("span",{children:"Print"})]}),o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 bg-violet-600 text-white px-4 py-2 rounded-lg hover:bg-violet-700 transition-colors",children:[o.jsx(hp,{size:16}),o.jsx("span",{children:"Download PDF"})]})]})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Privacy Policy for Medical Professionals"}),o.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Oa,{size:16}),o.jsxs("span",{children:["Last Updated: ",c]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{size:16}),o.jsxs("span",{children:["Version ","2.1"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8 print:hidden",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Navigation"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:["Introduction","Data Collection","Data Usage","Security","Data Sharing","Your Rights","Data Retention","International Transfers","Cookies","Updates"].map((d,h)=>o.jsx("button",{onClick:()=>s(h),className:"text-left p-3 rounded-lg border border-gray-200 hover:border-violet-300 hover:bg-violet-50 transition-colors text-sm",children:d},h))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ms,{title:"1. Introduction and Scope",isOpen:n.has(0),onToggle:()=>s(0),icon:o.jsx(KP,{className:"text-blue-600",size:20}),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Purpose of This Privacy Policy"}),o.jsx("p",{className:"text-blue-800 text-sm",children:'This privacy policy explains how Fahm Biotech LLC ("Fahis", "we", "us", or "our") collects, uses, protects, and shares personal information in connection with the Fahis thermography doctor platform designed specifically for medical professionals.'})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Scope of Application"}),o.jsxs("ul",{className:"space-y-2 text-gray-700 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Licensed medical professionals using the Fahis platform"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Healthcare institutions and affiliated doctors"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Patient data accessed through the platform"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"All platform-related communications and activities"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Legal Compliance"}),o.jsxs("ul",{className:"space-y-2 text-gray-700 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Saudi Personal Data Protection Law (PDPL)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Ministry of Health regulations"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"International healthcare data standards"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:16,className:"text-violet-600 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:"Medical confidentiality requirements"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Privacy Contact Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Mn,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"privacy@fahmbiotech.com"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(xa,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"+966 55 710 1103"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(df,{size:16,className:"text-gray-600"}),o.jsx("span",{children:"Riyadh, Saudi Arabia"})]})]})]})]})}),o.jsx(Ms,{title:"2. Data We Collect",isOpen:n.has(1),onToggle:()=>s(1),icon:o.jsx(Xe,{className:"text-green-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Doctor Registration Data"}),o.jsxs("ul",{className:"space-y-2 text-green-800 text-sm",children:[o.jsx("li",{children:" Medical license number and verification documents"}),o.jsx("li",{children:" Professional credentials and certifications"}),o.jsx("li",{children:" Contact information (email, phone, address)"}),o.jsx("li",{children:" Institutional affiliations and specializations"}),o.jsx("li",{children:" Professional references and background checks"}),o.jsx("li",{children:" IBAN and payment information"}),o.jsx("li",{children:" Years of experience and education history"})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Platform Usage Data"}),o.jsxs("ul",{className:"space-y-2 text-blue-800 text-sm",children:[o.jsx("li",{children:" Login timestamps and IP addresses"}),o.jsx("li",{children:" Platform feature usage and navigation patterns"}),o.jsx("li",{children:" Report generation and review activities"}),o.jsx("li",{children:" System performance and error logs"}),o.jsx("li",{children:" Communication records with patients"}),o.jsx("li",{children:" Search queries and filter preferences"}),o.jsx("li",{children:" Session duration and activity patterns"})]})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Patient Data Accessed"}),o.jsxs("ul",{className:"space-y-2 text-purple-800 text-sm",children:[o.jsxs("li",{children:[" ",o.jsx(lx,{term:"Thermography scan images",definition:"Thermal imaging data showing heat patterns in breast tissue for medical analysis"})," and metadata"]}),o.jsx("li",{children:" Patient demographic information (limited access)"}),o.jsx("li",{children:" Medical history relevant to thermography"}),o.jsx("li",{children:" Previous scan comparisons and analysis"}),o.jsx("li",{children:" Report generation and recommendations"}),o.jsx("li",{children:" Risk assessment classifications (TH:1-5)"}),o.jsx("li",{children:" Follow-up scheduling and notes"})]})]})]}),o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Me,{className:"text-yellow-600 mt-0.5 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Data Minimization Principle"}),o.jsx("p",{className:"text-yellow-800 text-sm",children:"We collect only the minimum amount of personal data necessary to provide medical services and maintain platform functionality. All data collection is purpose-limited and proportionate to the legitimate medical and operational needs of the platform."})]})]})})]})}),o.jsx(Ms,{title:"3. How We Use Your Data",isOpen:n.has(2),onToggle:()=>s(2),icon:o.jsx(o4,{className:"text-purple-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"For Medical Practice"}),o.jsxs("ul",{className:"space-y-2 text-purple-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Facilitating thermography scan review and analysis"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Generating medical reports and recommendations"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Enabling patient communication and follow-up"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Supporting clinical decision-making processes"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-purple-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Maintaining accurate medical records"})]})]})]}),o.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-3",children:"For Platform Operations"}),o.jsxs("ul",{className:"space-y-2 text-indigo-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"User authentication and access control"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"System security and fraud prevention"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Platform improvement and feature development"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Technical support and troubleshooting"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-indigo-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Compliance monitoring and audit trails"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Legal Basis for Processing"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Legitimate Interest"}),o.jsx("p",{className:"text-gray-600",children:"Platform security, fraud prevention, and service improvement"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Contractual Necessity"}),o.jsx("p",{className:"text-gray-600",children:"Providing medical services and platform functionality"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Legal Compliance"}),o.jsx("p",{className:"text-gray-600",children:"Meeting regulatory requirements and medical standards"})]})]})]})]})}),o.jsx(Ms,{title:"4. Data Protection and Security",isOpen:n.has(3),onToggle:()=>s(3),icon:o.jsx(Hc,{className:"text-red-600",size:20}),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Technical Safeguards"}),o.jsxs("ul",{className:"space-y-2 text-red-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx(lx,{term:"AES-256 encryption",definition:"Advanced Encryption Standard with 256-bit keys, providing military-grade security for data protection"})," for data at rest and in transit"]})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Multi-factor authentication for account access"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Regular security audits and penetration testing"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Automated backup and disaster recovery systems"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Ge,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Secure API endpoints with rate limiting"})]})]})]}),o.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-orange-900 mb-3",children:"Administrative Controls"}),o.jsxs("ul",{className:"space-y-2 text-orange-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(jn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Role-based access permissions"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(jn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Regular staff security training"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(jn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Incident response procedures"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(jn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Data breach notification protocols"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(jn,{size:14,className:"text-orange-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Third-party vendor security assessments"})]})]})]})]}),o.jsxs("div",{className:"bg-gray-900 text-white rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Security Incident Response"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Detection"}),o.jsx("p",{className:"text-gray-400",children:"24/7 monitoring and automated threat detection"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Response"}),o.jsx("p",{className:"text-gray-400",children:"Immediate containment and impact assessment"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Notification"}),o.jsx("p",{className:"text-gray-400",children:"Affected parties notified within 72 hours"})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-300 mb-2",children:"Recovery"}),o.jsx("p",{className:"text-gray-400",children:"System restoration and preventive measures"})]})]})]})]})}),o.jsx(Ms,{title:"5. Data Sharing and Disclosure",isOpen:n.has(4),onToggle:()=>s(4),icon:o.jsx(jn,{className:"text-yellow-600",size:20}),children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Permitted Sharing"}),o.jsxs("ul",{className:"space-y-2 text-green-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With patients (their own data only)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With referring physicians (with patient consent)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"With healthcare institutions (as authorized)"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"For legal compliance and regulatory requirements"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:14,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"For emergency medical situations"})]})]})]}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Prohibited Sharing"}),o.jsxs("ul",{className:"space-y-2 text-red-800 text-sm",children:[o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Me,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Commercial marketing purposes"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Me,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Unauthorized third parties"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Me,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Non-medical research without consent"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Me,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Social media or public platforms"})]}),o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(Me,{size:14,className:"text-red-600 mt-1 flex-shrink-0"}),o.jsx("span",{children:"Personal use outside medical practice"})]})]})]})]})})}),o.jsx(Ms,{title:"6. Your Rights as a Medical Professional",isOpen:n.has(5),onToggle:()=>s(5),icon:o.jsx(Ht,{className:"text-indigo-600",size:20}),children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-3",children:"Account Management Rights"}),o.jsxs("ul",{className:"space-y-2 text-indigo-800 text-sm",children:[o.jsx("li",{children:" Access and update your professional information"}),o.jsx("li",{children:" Download your platform usage data"}),o.jsx("li",{children:" Request account deactivation or deletion"}),o.jsx("li",{children:" Modify notification preferences"}),o.jsx("li",{children:" Review automated decisions"})]})]}),o.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-teal-900 mb-3",children:"Patient Data Rights"}),o.jsxs("ul",{className:"space-y-2 text-teal-800 text-sm",children:[o.jsx("li",{children:" Facilitate patient access requests"}),o.jsx("li",{children:" Support patient data correction requests"}),o.jsx("li",{children:" Honor patient deletion requests"}),o.jsx("li",{children:" Provide data portability assistance"}),o.jsx("li",{children:" Respect patient consent withdrawal"})]})]})]})})})]}),o.jsxs("div",{className:"mt-12 bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How long do you retain my professional data?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"Doctor account data is retained for 7 years after account deactivation to comply with medical record retention requirements and regulatory obligations."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I request deletion of patient data I've accessed?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"Patient data deletion requests must come directly from the patient. As a medical professional, you can facilitate these requests but cannot initiate deletion of patient medical records."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How do you ensure PDPL compliance?"}),o.jsx("p",{className:"text-gray-700 text-sm",children:"We maintain full compliance with Saudi PDPL through regular audits, staff training, technical safeguards, and ongoing legal review of our privacy practices."})]})]})]}),o.jsxs("div",{className:"mt-8 bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl border border-violet-200 p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Privacy Questions?"}),o.jsx("p",{className:"text-gray-700 mb-6",children:"If you have questions about this privacy policy or our data practices, please contact our privacy team."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("a",{href:"mailto:privacy@fahmbiotech.com",className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200 hover:border-violet-300 transition-colors",children:[o.jsx(Mn,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Email"}),o.jsx("div",{className:"text-sm text-gray-600",children:"privacy@fahmbiotech.com"})]})]}),o.jsxs("a",{href:"tel:+966557101103",className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200 hover:border-violet-300 transition-colors",children:[o.jsx(xa,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Phone"}),o.jsx("div",{className:"text-sm text-gray-600",children:"+966 55 710 1103"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-white rounded-lg border border-violet-200",children:[o.jsx(df,{className:"text-violet-600",size:20}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Address"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Riyadh, Saudi Arabia"})]})]})]})]}),o.jsxs("div",{className:"mt-8 text-center text-gray-500 text-sm",children:[o.jsx("p",{children:" 2025 Fahm Biotech LLC. All rights reserved."}),o.jsxs("p",{className:"mt-2",children:["This privacy policy is effective as of ",c," and may be updated periodically."]})]})]}),o.jsx("style",{jsx:!0,children:`
        @media print {
          .print\\:hidden { display: none !important; }
          .print\\:bg-white { background-color: white !important; }
          .print\\:shadow-none { box-shadow: none !important; }
          body { font-size: 12pt; }
          h1 { font-size: 18pt; }
          h2 { font-size: 16pt; }
          h3 { font-size: 14pt; }
          h4 { font-size: 13pt; }
        }
      `})]})},DE=()=>{const[t,e]=k.useState({name:"",email:"",subject:"",message:"",priority:"normal"}),[n,r]=k.useState(!1),[s,i]=k.useState(!1),a=async h=>{h.preventDefault(),r(!0),setTimeout(()=>{r(!1),i(!0)},2e3)},c=h=>{e(m=>({...m,[h.target.name]:h.target.value}))},u=Bn(),d=()=>{u("/dashboard",{replace:!0})};return s?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ne,{size:32,className:"text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Message Sent!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for contacting us. Our support team will respond within 4 business hours."}),o.jsx("button",{onClick:d,className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:" Back to Main Page"})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Vn,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Contact Support"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:d,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(ji,{size:20}),o.jsx("span",{children:"Back to Dashboard"})]})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contact Us"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Get in touch with our team for support, partnerships, or general inquiries about our thermography platform and medical services."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us a message"}),o.jsxs("form",{onSubmit:a,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),o.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Dr. John Smith"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),o.jsx("input",{type:"email",name:"email",required:!0,value:t.email,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"doctor@hospital.sa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inquiry Type"}),o.jsxs("select",{name:"priority",value:t.priority,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",children:[o.jsx("option",{value:"general",children:"General Inquiry"}),o.jsx("option",{value:"technical",children:"Technical Support"}),o.jsx("option",{value:"medical",children:"Medical Professional Support"}),o.jsx("option",{value:"partnership",children:"Partnership Opportunity"}),o.jsx("option",{value:"business",children:"Business Development"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),o.jsx("input",{type:"text",name:"subject",required:!0,value:t.subject,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Brief description of your inquiry"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),o.jsx("textarea",{name:"message",required:!0,value:t.message,onChange:c,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Please provide details about your inquiry..."})]}),o.jsx("button",{type:"submit",disabled:n,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 cursor-pointer active:scale-95",children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Sending..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(i4,{size:18}),o.jsx("span",{children:"Send Message"})]})})]})]}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"FAHM BioTech"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(df,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Headquarters"}),o.jsx("p",{className:"text-gray-600",children:"Riyadh, Saudi Arabia"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Mn,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"General Inquiries"}),o.jsx("a",{href:"mailto:info@fahmbiotech.com",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"info@fahmbiotech.com"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(xa,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Phone"}),o.jsx("a",{href:"tel:+966557101103",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"+966 55 710 1103"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(_E,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Website"}),o.jsx("a",{href:"https://fahmbiotech.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:"fahmbiotech.com"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-8 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Ge,{className:"text-purple-600 mr-3",size:24}),o.jsx("h3",{className:"text-xl font-bold text-purple-900",children:"Medical Professional Support"})]}),o.jsx("p",{className:"text-purple-800 mb-4",children:"Dedicated support for healthcare professionals using our thermography platform."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"mailto:medical@fahmbiotech.com",className:"flex items-center space-x-3 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Mn,{size:18}),o.jsx("span",{children:"medical@fahmbiotech.com"})]}),o.jsx("div",{className:"bg-purple-200 p-3 rounded-lg",children:o.jsxs("p",{className:"text-purple-800 text-sm",children:[o.jsx("strong",{children:"Response Time:"})," Within 4 business hours for medical inquiries"]})})]})]}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Me,{className:"text-red-600 mr-3",size:24}),o.jsx("h3",{className:"text-lg font-bold text-red-900",children:"Emergency Support"})]}),o.jsx("p",{className:"text-red-800 mb-4",children:"For urgent technical issues affecting patient care:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"tel:+966557101103",className:"flex items-center space-x-3 bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(xa,{size:18}),o.jsx("span",{children:"+966 55 710 1103"})]}),o.jsxs("a",{href:"https://wa.me/966557101103",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(XP,{size:18}),o.jsx("span",{children:"WhatsApp Support"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Au,{className:"text-purple-600 mr-3",size:20}),o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Business Hours"})]}),o.jsxs("div",{className:"space-y-2 text-gray-700",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Sunday - Thursday:"})," 9:00 AM - 6:00 PM (AST)"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Friday - Saturday:"})," Emergency support only"]}),o.jsx("p",{className:"text-sm text-purple-600 mt-3 bg-purple-50 p-2 rounded",children:"* Emergency medical support available 24/7 for critical issues"})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-purple-50 rounded-2xl p-6 border border-pink-200",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(WP,{className:"text-pink-600 mr-3",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Our Mission"})]}),o.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:"FAHM BioTech is dedicated to advancing women's health through innovative thermography solutions. We provide cutting-edge medical technology that empowers healthcare professionals to deliver better patient outcomes through early detection and comprehensive breast health monitoring."})]})]})]}),o.jsxs("div",{className:"mt-16 bg-white rounded-2xl shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center mb-4",children:[o.jsx(jn,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Partnership Opportunities"})]}),o.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:"We're always looking for strategic partnerships with healthcare institutions, medical professionals, and technology partners to expand access to advanced thermography solutions across the region."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Healthcare Institutions"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Partner with hospitals and clinics to integrate our thermography platform"})]}),o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Medical Professionals"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Join our network of certified thermography specialists"})]}),o.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-purple-900 mb-2",children:"Technology Partners"}),o.jsx("p",{className:"text-purple-700 text-sm",children:"Collaborate on advancing medical imaging and AI technologies"})]})]}),o.jsx("div",{className:"text-center mt-8",children:o.jsxs("a",{href:"mailto:partnerships@fahmbiotech.com",className:"inline-flex items-center space-x-2 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors cursor-pointer active:scale-95",children:[o.jsx(Mn,{size:18}),o.jsx("span",{children:"partnerships@fahmbiotech.com"})]})})]})]})]})},w6=({currentDoctor:t,logout:e})=>{const n=Bn(),[r,s]=k.useState([]);k.useEffect(()=>{(async()=>{const g=(await Jt(Yt(Qe,"patients"))).docs.map(x=>({id:x.id,...x.data()}));s(g)})()},[]);const i=async(h,m,g)=>{console.log(`patients/${h}/appointments/${m}/thermalScans`);const x=await Jt(Yt(Qe,`patients/${h}/appointments/${m}/thermalScans`));for(const b of x.docs){if(b.id!==g)continue;const I=await Jt(Yt(Qe,`patients/${h}/appointments/${m}/thermalScans/${b.id}/aiInferenceResults`));for(const A of I.docs)return{patientId:h,appointmentId:m,scanId:b.id,aiInferenceId:A.id,...b.data(),...A.data()}}return null},a=h=>{n(`/patients/${h}`)},c=(h,m,g)=>{const x=r.find(b=>b.id===m);i(m,g,h).then(b=>{b&&n("/thermography-review",{state:{report:b,patient:x}})})},u=async(h,m)=>{try{const g={...m};delete g.patientId,delete g.appointmentId,delete g.scanId,console.log(m,"updatesInferenceClean : ",g);const x=di(Qe,`patients/${m.patientId}/appointments/${m.appointmentId}/thermalScans/${m.scanId}/aiInferenceResults/${h}`);await cf(x,g);const b=Yt(Qe,`patients/${m.patientId}/appointments`),I=await Jt(hi(b,Bo("appointmentDate","desc"),Kl(1)));if(I.empty)return;const A=I.docs[0].id,E=Yt(Qe,`patients/${m.patientId}/appointments/${A}/thermalScans`),_=await Jt(hi(E,Bo("scanTimestamp","desc"),Kl(1)));if(_.empty)return;const w=_.docs[0].id,D=Yt(Qe,`patients/${m.patientId}/appointments/${A}/thermalScans/${w}/aiInferenceResults`),M=await Jt(hi(D,Bo("reviewUpdatedAt","desc"),Kl(1)));if(M.empty)return;const F=M.docs[0].data().thRiskLevel,N=di(Qe,`patients/${m.patientId}`);return await cf(N,{thRiskLevel:F}),s(T=>T.map(S=>S.id===m.patientId?{...S,thRiskLevel:F}:S)),console.log(" Firebase updated successfully : App"),!0}catch(g){return console.error(" Firebase update failed: App",g),!1}},d=({allPatients:h,onSelectReport:m})=>{const{patientId:g}=_T(),x=Bn();if(!g)return o.jsx("div",{children:"Patient not found"});const b=h.find(A=>A.id===g);if(!b)return o.jsx("div",{children:"Patient not found"});const I=()=>{x("/patients")};return o.jsx(h6,{patient:b,onBack:I,onSelectReport:m})};return o.jsx(i6,{doctor:t,onLogout:e,children:o.jsxs(M1,{children:[o.jsx(it,{path:"/",element:o.jsx(DT,{to:"/dashboard",replace:!0})}),o.jsx(it,{path:"/dashboard",element:o.jsx(a6,{})}),o.jsx(it,{path:"/patients",element:o.jsx(u6,{onSelectPatient:a})}),o.jsx(it,{path:"/patients/:patientId",element:o.jsx(d,{allPatients:r,onSelectReport:c})}),o.jsx(it,{path:"/thermography-review",element:o.jsx(g6,{doctor:t,onSaveReview:u})}),o.jsx(it,{path:"/profile",element:o.jsx(v6,{doctor:t})}),o.jsx(it,{path:"/payments",element:o.jsx(y6,{})}),o.jsx(it,{path:"/risk-scale",element:o.jsx(x6,{})}),o.jsx(it,{path:"/privacy-policy",element:o.jsx(_6,{})}),o.jsx(it,{path:"/contact-support",element:o.jsx(DE,{})})]})})},E6=()=>o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-indigo-100",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(Vn,{size:24,className:"text-violet-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Medical Guidelines"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsx("a",{href:"/",className:"flex items-center space-x-2 px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:o.jsx("span",{children:" Back to Main Page"})})})]})})}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(Xe,{size:40,className:"text-violet-600"})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Medical Guidelines"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Clinical protocols and best practices for thermographic breast screening using the Fahis platform"})]}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 mb-8 rounded-r-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Me,{className:"text-red-400 mt-1 mr-3 flex-shrink-0",size:24}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Important Medical Notice"}),o.jsx("p",{className:"text-red-700",children:"These guidelines are intended for licensed healthcare professionals only. Thermography is an adjunctive screening tool and should never replace standard diagnostic procedures."})]})]})}),o.jsxs("div",{className:"space-y-12",children:[o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Ge,{size:24,className:"text-blue-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"1. Scope of Use"})]}),o.jsxs("div",{className:"space-y-4 text-gray-700",children:[o.jsx("p",{className:"text-lg font-medium text-blue-900",children:"Thermography as an Adjunctive Screening Tool"}),o.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Primary Applications:"}),o.jsxs("ul",{className:"space-y-2 text-blue-800",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Adjunctive screening"})," for breast health assessment in asymptomatic women"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Risk stratification"})," to identify patients requiring closer monitoring"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Monitoring tool"})," for patients with dense breast tissue where mammography may be limited"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(ne,{size:16,className:"text-blue-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"Complementary assessment"})," in conjunction with clinical breast examination"]})]})]})]}),o.jsxs("div",{className:"bg-red-50 p-6 rounded-lg border border-red-200",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-3",children:"Critical Limitations:"}),o.jsxs("ul",{className:"space-y-2 text-red-800",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx(Me,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT a replacement"})," for mammography, ultrasound, or MRI"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Me,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT diagnostic"})," - cannot definitively diagnose cancer"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Me,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT suitable"})," as a standalone screening method"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx(Me,{size:16,className:"text-red-600 mt-1 mr-2 flex-shrink-0"}),o.jsxs("span",{children:[o.jsx("strong",{children:"NOT recommended"})," for patients with acute breast symptoms requiring immediate evaluation"]})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Ht,{size:24,className:"text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"2. Best Practices for Image Interpretation"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-4",children:"Systematic Interpretation Checklist:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Vascular Assessment:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Bilateral vascular symmetry"}),o.jsx("li",{children:" Vessel recruitment patterns"}),o.jsx("li",{children:" Abnormal vascular density"}),o.jsx("li",{children:" Serpentine vessel patterns"}),o.jsx("li",{children:" Vascular cut-off signs"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Thermal Patterns:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Temperature differentials (>1.5C significant)"}),o.jsx("li",{children:" Thermal symmetry evaluation"}),o.jsx("li",{children:" Hot spot identification and mapping"}),o.jsx("li",{children:" Cold areas or thermal voids"}),o.jsx("li",{children:" Nipple temperature comparison"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Morphological Features:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Breast contour irregularities"}),o.jsx("li",{children:" Skin temperature variations"}),o.jsx("li",{children:" Areolar thermal changes"}),o.jsx("li",{children:" Lymphatic drainage patterns"}),o.jsx("li",{children:" Axillary thermal activity"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-green-800 mb-3",children:"Risk Indicators:"}),o.jsxs("ul",{className:"space-y-2 text-green-700 text-sm",children:[o.jsx("li",{children:" Estrogen dominance patterns"}),o.jsx("li",{children:" Inflammatory thermal signatures"}),o.jsx("li",{children:" Metabolic activity indicators"}),o.jsx("li",{children:" Angiogenesis markers"}),o.jsx("li",{children:" Progressive thermal changes"})]})]})]})]}),o.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-3",children:"TH Classification System (TH:1-5):"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-3 bg-blue-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-blue-800",children:"TH:1"}),o.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"Minimal thermal activity"}),o.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"99% no cancer"})]}),o.jsxs("div",{className:"text-center p-3 bg-green-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-green-800",children:"TH:2"}),o.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Low thermal activity"}),o.jsx("div",{className:"text-xs text-green-600 mt-1",children:"99% no cancer"})]}),o.jsxs("div",{className:"text-center p-3 bg-yellow-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-yellow-800",children:"TH:3"}),o.jsx("div",{className:"text-xs text-yellow-700 mt-1",children:"Moderate patterns"}),o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"1 in 7 chance"})]}),o.jsxs("div",{className:"text-center p-3 bg-orange-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-orange-800",children:"TH:4"}),o.jsx("div",{className:"text-xs text-orange-700 mt-1",children:"Concerning patterns"}),o.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"High risk"})]}),o.jsxs("div",{className:"text-center p-3 bg-red-100 rounded-lg",children:[o.jsx("div",{className:"font-bold text-red-800",children:"TH:5"}),o.jsx("div",{className:"text-xs text-red-700 mt-1",children:"High-risk patterns"}),o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"90% cancer present"})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(BP,{size:24,className:"text-purple-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"3. Standardized Reporting"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-gray-700",children:"Every thermographic report generated through the Fahis platform must contain the following standardized components:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-4",children:"Required Report Sections:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"1. Patient Demographics & History"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Age, menstrual status, hormone use"}),o.jsx("li",{children:" Family history of breast/ovarian cancer"}),o.jsx("li",{children:" Previous breast imaging results"}),o.jsx("li",{children:" Current symptoms or concerns"}),o.jsx("li",{children:" Medications affecting circulation"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"2. Technical Parameters"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Imaging date and time"}),o.jsx("li",{children:" Room temperature and conditions"}),o.jsx("li",{children:" Equilibration time"}),o.jsx("li",{children:" Image quality assessment"})]})]})]})]}),o.jsxs("div",{className:"bg-indigo-50 p-6 rounded-lg border border-indigo-200",children:[o.jsx("h4",{className:"font-semibold text-indigo-900 mb-4",children:"Clinical Findings:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-indigo-800 mb-2",children:"3. Thermal Findings"}),o.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[o.jsx("li",{children:" Vascular pattern description"}),o.jsx("li",{children:" Thermal symmetry assessment"}),o.jsx("li",{children:" Hot spot identification and location"}),o.jsx("li",{children:" Temperature differentials"}),o.jsx("li",{children:" Estrogen dominance indicators"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-indigo-800 mb-2",children:"4. Classification & Recommendations"}),o.jsxs("ul",{className:"text-sm text-indigo-700 space-y-1",children:[o.jsx("li",{children:" TH risk level (1-5) with rationale"}),o.jsx("li",{children:" Clinical impression"}),o.jsx("li",{children:" Recommended follow-up actions"}),o.jsx("li",{children:" Suggested imaging intervals"}),o.jsx("li",{children:" Referral recommendations if indicated"})]})]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Report Quality Standards:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Clear, objective language"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Standardized terminology"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Evidence-based conclusions"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Appropriate disclaimers"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Actionable recommendations"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600"}),o.jsx("span",{className:"text-sm text-gray-700",children:"Professional formatting"})]})]})]})]})]}),o.jsxs("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Me,{size:24,className:"text-red-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"4. Clinical Disclaimer"})]}),o.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 p-6 rounded-r-lg",children:[o.jsx("h4",{className:"font-bold text-red-900 text-lg mb-4",children:"Professional Responsibility Statement"}),o.jsxs("div",{className:"space-y-4 text-red-800",children:[o.jsx("p",{className:"font-medium",children:"The Fahis thermography platform is a clinical decision support tool designed to assist qualified healthcare professionals in the interpretation of thermal imaging data. The ultimate responsibility for patient diagnosis, treatment decisions, and clinical management remains solely with the licensed physician."}),o.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[o.jsx("h5",{className:"font-semibold text-red-900 mb-2",children:"Physician Responsibilities:"}),o.jsxs("ul",{className:"space-y-1 text-red-800 text-sm",children:[o.jsx("li",{children:" Verify all thermographic findings through appropriate clinical correlation"}),o.jsx("li",{children:" Ensure compliance with local medical practice standards and regulations"}),o.jsx("li",{children:" Maintain appropriate professional liability coverage"}),o.jsx("li",{children:" Document all clinical decisions and rationale in patient records"}),o.jsx("li",{children:" Provide appropriate patient counseling regarding limitations of thermography"}),o.jsx("li",{children:" Ensure timely referral for additional imaging or specialist consultation when indicated"})]})]}),o.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[o.jsx("h5",{className:"font-semibold text-red-900 mb-2",children:"Platform Limitations:"}),o.jsxs("ul",{className:"space-y-1 text-red-800 text-sm",children:[o.jsx("li",{children:" Fahis does not provide medical advice, diagnosis, or treatment recommendations"}),o.jsx("li",{children:" The platform does not replace clinical judgment or standard diagnostic procedures"}),o.jsx("li",{children:" Technical malfunctions or interpretation errors may occur"}),o.jsx("li",{children:" Results must be interpreted within the context of complete clinical assessment"}),o.jsx("li",{children:" The platform is not intended for emergency or acute care situations"})]})]}),o.jsx("p",{className:"font-medium text-red-900 border-t border-red-300 pt-4",children:"By using the Fahis platform, healthcare professionals acknowledge their understanding of these limitations and accept full responsibility for all clinical decisions made in connection with thermographic assessments."})]})]})]}),o.jsxs("section",{className:"bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl border border-violet-200 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center mr-4",children:o.jsx(Ru,{size:24,className:"text-violet-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Additional Resources"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-violet-900 mb-3",children:"Professional Development:"}),o.jsxs("ul",{className:"space-y-2 text-violet-800 text-sm",children:[o.jsx("li",{children:" Thermography certification programs"}),o.jsx("li",{children:" Continuing medical education opportunities"}),o.jsx("li",{children:" Professional society memberships"}),o.jsx("li",{children:" Research publications and case studies"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-violet-900 mb-3",children:"Clinical Support:"}),o.jsxs("ul",{className:"space-y-2 text-violet-800 text-sm",children:[o.jsx("li",{children:" Expert consultation services"}),o.jsx("li",{children:" Quality assurance programs"}),o.jsx("li",{children:" Peer review opportunities"}),o.jsx("li",{children:" Technical support and training"})]})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-violet-200",children:o.jsxs("p",{className:"text-violet-700 text-sm",children:["For questions regarding these medical guidelines or clinical protocols, please contact our medical affairs team at ",o.jsx("a",{href:"mailto:medical@fahis.com",className:"text-violet-600 underline font-medium",children:"medical@fahis.com"})]})})]})]}),o.jsxs("div",{className:"mt-12 text-center",children:[o.jsxs("p",{className:"text-gray-500 text-sm",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),o.jsx("p",{className:"text-gray-500 text-sm mt-2",children:" 2025 Fahm Biotech LLC. All rights reserved."})]})]})]}),b6=({case:t,onClose:e})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-purple-100",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-purple-900",children:t.title}),o.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[o.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${t.tag==="Urgent"?"bg-red-100 text-red-800":t.tag==="Benign"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.tag}),o.jsx("span",{className:"text-sm text-purple-700",children:t.anatomy}),o.jsxs("span",{className:"text-sm text-purple-600",children:["Difficulty: ",t.difficulty]})]})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(fp,{size:24})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 180px)"},children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Thermography Scan"}),o.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-center",children:[o.jsx("img",{src:t.thumbnail,alt:"Thermography scan",className:"w-full h-64 object-cover rounded-lg shadow-sm"}),o.jsx("div",{className:"mt-3 bg-purple-50 p-3 rounded-lg border border-purple-200",children:o.jsx("p",{className:"text-xs text-purple-700 font-medium",children:"SAMPLE CASE  For training only. Not real patient data."})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"AI-Generated Interpretation"}),o.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:o.jsx("p",{className:"text-purple-800 text-sm leading-relaxed",children:t.aiInterpretation})}),o.jsx("h4",{className:"text-md font-semibold text-purple-900 mt-6 mb-3",children:"Discussion Notes"}),o.jsx("div",{className:"space-y-2",children:t.discussionNotes.map((n,r)=>o.jsxs("div",{className:"flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),o.jsx("p",{className:"text-gray-700 text-sm",children:n})]},r))})]})]})}),o.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:["Training Case #",t.id,"  ",t.anatomy," Thermography"]}),o.jsx("button",{onClick:e,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Close Case"})]})})]})}),N6=()=>{const[t,e]=k.useState(null),n=[{id:"001",title:"Bilateral Breast Asymmetry",thumbnail:"/thermography/case1.jpeg",tag:"Urgent",anatomy:"Breast",aiInterpretation:"Significant thermal asymmetry detected in left breast upper outer quadrant. Temperature differential of 2.3C compared to contralateral side. Increased vascular activity with serpentine pattern suggests possible malignancy. Recommend immediate clinical correlation and imaging workup.",discussionNotes:["Upload: High-resolution thermal images acquired following 15-minute acclimatization period","Review: Systematic evaluation reveals focal hyperthermia with irregular borders","Consult: Correlation with mammography and ultrasound recommended within 48 hours","Follow-up: Patient counseled on findings and referred to breast specialist","Teaching Point: Temperature differentials >2C warrant urgent evaluation"],difficulty:"Advanced"},{id:"002",title:"Normal Thermal Symmetry",thumbnail:"/thermography/case2.jpeg",tag:"Benign",anatomy:"Breast",aiInterpretation:"Excellent bilateral thermal symmetry observed. Temperature differential <0.5C throughout breast tissue. Normal vascular patterns with symmetric distribution. No areas of focal hyperthermia or concerning thermal signatures identified.",discussionNotes:["Upload: Standard positioning with optimal image quality achieved","Review: Systematic assessment confirms normal thermal distribution","Consult: Baseline study established for future comparison","Follow-up: Routine screening interval recommended (12 months)","Teaching Point: Normal studies provide valuable baseline for longitudinal monitoring"],difficulty:"Beginner"},{id:"003",title:"Thyroid Thermal Irregularity",thumbnail:"/thermography/case3.jpeg",tag:"Follow-up",anatomy:"Thyroid",aiInterpretation:"Focal thermal elevation in right thyroid lobe with temperature increase of 1.8C. Pattern suggests possible nodular disease or inflammatory process. Recommend thyroid ultrasound and TSH evaluation for clinical correlation.",discussionNotes:["Upload: Neck positioning optimized for thyroid visualization","Review: Asymmetric thermal pattern in thyroid region identified","Consult: Endocrinology referral for comprehensive thyroid assessment","Follow-up: Repeat thermography in 3 months to assess progression","Teaching Point: Thyroid thermography complements but does not replace ultrasound"],difficulty:"Intermediate"},{id:"004",title:"Vascular Malformation",thumbnail:"/thermography/case1.jpeg",tag:"Follow-up",anatomy:"Vascular",aiInterpretation:"Linear thermal signature consistent with arteriovenous malformation in left upper extremity. Increased perfusion pattern with temperature elevation of 1.5C along vascular distribution. Recommend vascular surgery consultation.",discussionNotes:["Upload: Extremity positioning allows clear visualization of vascular patterns","Review: Abnormal thermal signature follows anatomical vascular distribution","Consult: Vascular surgery evaluation for treatment planning","Follow-up: Monitor for progression or complications","Teaching Point: Thermography excellent for vascular anomaly detection"],difficulty:"Intermediate"},{id:"005",title:"Post-Surgical Monitoring",thumbnail:"/thermography/case2.jpeg",tag:"Follow-up",anatomy:"Breast",aiInterpretation:"Post-lumpectomy thermal changes consistent with normal healing process. Mild temperature elevation (1.2C) in surgical site with gradual thermal gradient. No signs of infection or complications. Healing progressing appropriately.",discussionNotes:["Upload: Post-operative imaging at 6 weeks following surgery","Review: Expected thermal changes in healing tissue identified","Consult: Surgical team informed of normal healing progression","Follow-up: Continue monitoring until thermal normalization","Teaching Point: Understanding normal post-surgical thermal evolution is crucial"],difficulty:"Advanced"},{id:"006",title:"Inflammatory Breast Changes",thumbnail:"/thermography/case3.jpeg",tag:"Urgent",anatomy:"Breast",aiInterpretation:"Diffuse thermal elevation across entire left breast with temperature increase of 2.8C. Pattern consistent with inflammatory breast cancer or severe mastitis. Immediate clinical evaluation required for definitive diagnosis and treatment.",discussionNotes:["Upload: Emergency thermography requested for acute breast symptoms","Review: Diffuse hyperthermia with concerning thermal signature","Consult: Immediate oncology and infectious disease consultation","Follow-up: Urgent biopsy and imaging studies initiated","Teaching Point: Inflammatory patterns require immediate medical attention"],difficulty:"Advanced"}],r=c=>{switch(c){case"Urgent":return o.jsx(Me,{size:16,className:"text-red-600"});case"Benign":return o.jsx(ne,{size:16,className:"text-green-600"});case"Follow-up":return o.jsx(Au,{size:16,className:"text-yellow-600"});default:return null}},s=c=>{switch(c){case"Urgent":return"bg-red-100 text-red-800 border-red-200";case"Benign":return"bg-green-100 text-green-800 border-green-200";case"Follow-up":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=Bn(),a=()=>{i("/dashboard",{replace:!0})};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Ru,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Training Materials"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[o.jsx(ji,{size:20}),o.jsx("span",{children:"Back to Main Page"})]})})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Interactive Case Library"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Explore anonymized thermography cases with AI-generated interpretations and expert discussion notes. Perfect for training and continuing medical education."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Xe,{size:24,className:"text-purple-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Training Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(Me,{size:24,className:"text-red-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.filter(c=>c.tag==="Urgent").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Urgent Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(ne,{size:24,className:"text-green-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.filter(c=>c.tag==="Benign").length}),o.jsx("div",{className:"text-sm text-gray-600",children:"Benign Cases"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:o.jsx(jn,{size:24,className:"text-purple-600"})}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"3"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Anatomical Areas"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 overflow-hidden hover:shadow-xl hover:border-purple-300 transition-all duration-200",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-48 object-cover"}),o.jsx("div",{className:"absolute top-3 left-3",children:o.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${s(c.tag)}`,children:[r(c.tag),o.jsx("span",{className:"ml-1",children:c.tag})]})}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsx("span",{className:"bg-white bg-opacity-90 text-purple-700 px-2 py-1 rounded text-xs font-medium",children:c.anatomy})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:[c.aiInterpretation.substring(0,120),"..."]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded",children:c.difficulty}),o.jsxs("button",{onClick:()=>e(c),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:[o.jsx(Ht,{size:16}),o.jsx("span",{children:"View Case + AI Notes"})]})]})]})]},c.id))}),o.jsx("div",{className:"mt-12 bg-purple-50 border border-purple-200 rounded-xl p-8",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(yE,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-2",children:"Educational Purpose"}),o.jsxs("p",{className:"text-purple-800 mb-4",children:["These training cases are designed to enhance your thermography interpretation skills through realistic scenarios and AI-assisted learning. Each case follows the proven workflow:",o.jsx("strong",{children:" Upload  Review  Consult"}),"."]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Upload:"})," Proper image acquisition and quality assessment"]}),o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Review:"})," Systematic interpretation and pattern recognition"]}),o.jsxs("div",{className:"bg-white p-3 rounded-lg border border-purple-200",children:[o.jsx("strong",{className:"text-purple-900",children:"Consult:"})," Clinical correlation and next steps"]})]})]})]})})]}),t&&o.jsx(b6,{case:t,onClose:()=>e(null)})]})},T6=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),[s,i]=k.useState(null);return k.useEffect(()=>{(async()=>{try{const c=hi(Yt(Qe,"publications"),Bo("year","desc")),d=(await Jt(c)).docs.map(h=>({id:h.id,...h.data()}));e(d)}catch(c){console.error(c),i("Failed to load publications")}finally{r(!1)}})()},[]),{publications:t,loading:n,error:s}},I6=()=>{const[t,e]=k.useState("guide"),n=Bn(),{publications:r,loading:s,error:i}=T6(),a=()=>{n("/dashboard",{replace:!0})},c=[{anatomy:"Breast",tempRange:"30C  36C",colorMap:"Rainbow",notes:"Optimal for detecting asymmetry and vascular patterns"},{anatomy:"Thyroid",tempRange:"32C  37C",colorMap:"Iron",notes:"Enhanced contrast for nodular detection"},{anatomy:"Extremities",tempRange:"28C  35C",colorMap:"Hot Metal",notes:"Ideal for vascular and circulation assessment"},{anatomy:"Face/Head",tempRange:"31C  36C",colorMap:"Rainbow",notes:"Balanced contrast for facial thermal patterns"}],u=[{step:1,title:"Confirm Patient ID + Laterality",description:"Verify patient identity and ensure correct left/right orientation",details:["Check patient name and ID against requisition","Confirm date and time of examination","Verify anatomical markers (L/R indicators)","Ensure proper patient positioning was maintained"],icon:o.jsx(a4,{size:24,className:"text-purple-600"})},{step:2,title:"Adjust Window/Level Settings",description:"Optimize thermal display for specific anatomy and clinical question",details:["Select appropriate temperature range for anatomy","Choose optimal color map (Rainbow, Iron, Hot Metal)","Adjust contrast for maximum abnormality detection","Save preset settings for consistency"],icon:o.jsx(Ht,{size:24,className:"text-purple-600"})},{step:3,title:"Scan for Asymmetry",description:"Systematic comparison of bilateral thermal patterns",details:["Compare temperature differentials (>1.5C significant)","Assess bilateral symmetry in vascular patterns","Identify focal hot or cold spots","Document temperature measurements at key landmarks"],icon:o.jsx(wE,{size:24,className:"text-purple-600"})},{step:4,title:"Flag Vascular Irregularities",description:"Identify abnormal vascular patterns and recruitment",details:["Look for serpentine or tortuous vessels","Assess vascular density and distribution","Identify vessel cut-offs or abrupt terminations","Compare with contralateral vascular architecture"],icon:o.jsx(l4,{size:24,className:"text-purple-600"})},{step:5,title:"Compare with Prior Studies",description:"Evaluate temporal changes and progression",details:["Load previous examinations if available","Assess interval changes in thermal patterns","Document new findings or resolution of prior abnormalities","Consider patient factors affecting thermal patterns"],icon:o.jsx(Au,{size:24,className:"text-purple-600"})}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white",children:[o.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Ru,{size:24,className:"text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fahis"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Scan Interpretation Help"})]})]}),o.jsx("div",{className:"ml-auto",children:o.jsxs("button",{onClick:a,className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors",children:[o.jsx(ji,{size:20}),o.jsx("span",{children:"Back to Main Page"})]})})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Quick Reference + Recent Research"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive guide to thermography interpretation with step-by-step protocols, technical references, and latest research findings."})]}),o.jsxs("div",{className:"flex flex-wrap justify-center mb-8 bg-white rounded-xl shadow-sm border border-purple-100 p-2",children:[o.jsx("button",{onClick:()=>e("guide"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="guide"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Step-by-Step Guide"}),o.jsx("button",{onClick:()=>e("settings"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="settings"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Window/Level Settings"}),o.jsx("button",{onClick:()=>e("research"),className:`px-6 py-3 rounded-lg font-medium transition-colors ${t==="research"?"bg-purple-600 text-white":"text-purple-600 hover:bg-purple-50"}`,children:"Recent Publications"})]}),t==="guide"&&o.jsx("div",{className:"space-y-8",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(Vn,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"How to Read a Thermography Scan in 5 Steps"})]}),o.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-8",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Me,{className:"text-purple-600 mt-1 flex-shrink-0",size:20}),o.jsx("div",{children:o.jsxs("p",{className:"text-purple-800 text-sm",children:[o.jsx("strong",{children:"Professional Tip:"})," Use systematic windowing to maximize abnormality detection rate. Sudden thermal breaks or asymmetries often suggest pathology requiring further evaluation."]})})]})}),o.jsx("div",{className:"space-y-6",children:u.map(d=>o.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-white border border-purple-200 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:d.icon})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsxs("span",{className:"bg-purple-600 text-white text-sm font-bold px-3 py-1 rounded-full mr-3",children:["Step ",d.step]}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.title})]}),o.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),o.jsx("ul",{className:"space-y-2",children:d.details.map((h,m)=>o.jsxs("li",{className:"flex items-start space-x-2",children:[o.jsx(ne,{size:16,className:"text-green-600 mt-1 flex-shrink-0"}),o.jsx("span",{className:"text-gray-600 text-sm",children:h})]},m))})]})]})},d.step))})]})}),t==="settings"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(Ht,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Window/Level Cheat Sheet"})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-blue-800 text-sm",children:[o.jsx("strong",{children:"Optimization Tip:"})," Proper windowing maximizes abnormality pickup rate. Adjust temperature ranges based on anatomy and clinical indication for optimal contrast."]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-purple-50",children:[o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Anatomy"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Recommended Temp Range"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Color Map"}),o.jsx("th",{className:"border border-purple-200 px-4 py-3 text-left font-semibold text-purple-900",children:"Clinical Notes"})]})}),o.jsx("tbody",{children:c.map((d,h)=>o.jsxs("tr",{className:h%2===0?"bg-white":"bg-purple-25",children:[o.jsx("td",{className:"border border-purple-200 px-4 py-3 font-medium text-gray-900",children:d.anatomy}),o.jsx("td",{className:"border border-purple-200 px-4 py-3 text-gray-700",children:d.tempRange}),o.jsx("td",{className:"border border-purple-200 px-4 py-3",children:o.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm font-medium",children:d.colorMap})}),o.jsx("td",{className:"border border-purple-200 px-4 py-3 text-gray-600 text-sm",children:d.notes})]},h))})]})}),o.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Temperature Significance"}),o.jsxs("ul",{className:"space-y-2 text-sm text-purple-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:">1.5C:"})," Clinically significant"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:">2.0C:"})," Highly suspicious"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:">2.5C:"})," Urgent evaluation"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Color Map Selection"}),o.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Rainbow:"})," General purpose"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Iron:"})," High contrast"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Hot Metal:"})," Vascular studies"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Quality Factors"}),o.jsxs("ul",{className:"space-y-2 text-sm text-green-800",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Room temp:"})," 20-24C"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Acclimatization:"})," 15-20 min"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Distance:"})," 1-2 meters"]})]})]})]})]}),t==="research"&&o.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-8",children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx(Xe,{className:"text-purple-600 mr-3",size:32}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Recent Publications"})]}),o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:o.jsxs("p",{className:"text-green-800 text-sm",children:[o.jsx("strong",{children:"Evidence-Based Practice:"})," Stay current with latest research to improve diagnostic accuracy and reduce missed findings. These publications represent cutting-edge developments in medical thermography."]})}),o.jsxs("div",{className:"space-y-6",children:[s&&o.jsx("p",{className:"text-gray-500",children:"Loading publications..."}),i&&o.jsx("p",{className:"text-red-600",children:i}),r.map(d=>o.jsxs("div",{className:"border border-purple-200 rounded-lg p-6 hover:border-purple-300 transition-colors",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded mr-3",children:d.year}),o.jsx("span",{className:"text-sm text-gray-600",children:d.journal})]}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:d.name}),o.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[d.firstAuthor,d.secondAuthor&&`, ${d.secondAuthor}`]})]})}),o.jsx("p",{className:"text-gray-700 mb-4",children:d.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:["DOI: ",d.doi]}),o.jsx("div",{className:"flex space-x-3",children:o.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 transition-colors text-sm",children:[o.jsx(vE,{size:16}),o.jsx("span",{children:"View Online"})]})})]})]},d.id))]}),o.jsxs("div",{className:"mt-8 bg-purple-50 border border-purple-200 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-purple-900 mb-3",children:"Key Research Insights"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Diagnostic Accuracy"}),o.jsxs("ul",{className:"space-y-1 text-sm text-purple-700",children:[o.jsx("li",{children:" AI-assisted interpretation: 94% accuracy"}),o.jsx("li",{children:" Human radiologists alone: 87% accuracy"}),o.jsx("li",{children:" Combined approach: 97% accuracy"})]})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"Quality Improvement"}),o.jsxs("ul",{className:"space-y-1 text-sm text-purple-700",children:[o.jsx("li",{children:" Checklist reduces missed findings by 34%"}),o.jsx("li",{children:" Standardized protocols improve consistency"}),o.jsx("li",{children:" Population-specific baselines enhance accuracy"})]})]})]})]})]})]})]})};function j6(){const{isAuthenticated:t,currentDoctor:e,authError:n,login:r,register:s,logout:i}=gE(),[a,c]=k.useState("login");return o.jsxs(iI,{children:[o.jsx(e6,{position:"top-right",reverseOrder:!1}),o.jsxs(M1,{children:[o.jsx(it,{path:"/medical-guidelines",element:o.jsx(E6,{})}),o.jsx(it,{path:"/training-materials",element:o.jsx(N6,{})}),o.jsx(it,{path:"/scan-interpretation-help",element:o.jsx(I6,{})}),o.jsx(it,{path:"/contact-support",element:o.jsx(DE,{})}),o.jsx(it,{path:"/*",element:t?e?o.jsx(w6,{currentDoctor:e,logout:i}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"text-center text-gray-600",children:"Error loading doctor information"})}):a==="login"?o.jsx(h4,{onLogin:r,onSwitchToRegister:()=>c("register"),authError:n}):o.jsx(t6,{onRegister:s,onSwitchToLogin:()=>c("login")})})]})]})}w1(document.getElementById("root")).render(o.jsx(k.StrictMode,{children:o.jsx(j6,{})}));
